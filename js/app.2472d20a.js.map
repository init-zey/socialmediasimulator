{"version":3,"file":"js/app.2472d20a.js","mappings":"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","sources":["webpack://vue-project/./src/event.ts","webpack://vue-project/./src/game.ts","webpack://vue-project/./src/llm.ts","webpack://vue-project/./src/text.ts","webpack://vue-project/./src/components/CanvasUser.vue?4afb","webpack://vue-project/./src/components/CanvasUser.vue","webpack://vue-project/./src/components/CanvasUser.vue?7b96","webpack://vue-project/./src/components/GameCanvas.vue","webpack://vue-project/./src/components/GameCanvas.vue?d007","webpack://vue-project/./src/components/GameCanvas.vue?cf9f","webpack://vue-project/./src/components/MessageCard.vue?0f40","webpack://vue-project/./src/components/MessageCard.vue","webpack://vue-project/./src/components/MessageCard.vue?3d29","webpack://vue-project/./src/components/MessageList.vue?13dd","webpack://vue-project/./src/components/MessageList.vue","webpack://vue-project/./src/components/MessageList.vue?2e85","webpack://vue-project/./src/App.vue?2a5e","webpack://vue-project/./src/App.vue","webpack://vue-project/./src/App.vue?7ccd","webpack://vue-project/./src/main.ts","webpack://vue-project/webpack/bootstrap","webpack://vue-project/webpack/runtime/chunk loaded","webpack://vue-project/webpack/runtime/compat get default export","webpack://vue-project/webpack/runtime/define property getters","webpack://vue-project/webpack/runtime/global","webpack://vue-project/webpack/runtime/hasOwnProperty shorthand","webpack://vue-project/webpack/runtime/jsonp chunk loading","webpack://vue-project/webpack/startup"],"sourcesContent":["const events:Record<string, Record<string, (...params:any[])=>void>> = {}\nexport function subscribe(event:string, action:(...params:any[])=>void):number\n{\n    if (!(event in events))\n    {\n        events[event] = {}\n    }\n    const key = Object.keys(events[event]).length-1;\n    events[event][key] = action;\n    return key;\n}\nexport function desubscribe(event:string, key:number):void\n{\n    if (event in events)\n    {\n        delete events[event][key];\n    }\n}\nexport function emit(event:string, ...args:any[]):void\n{\n    if (event in events)\n    {\n        Object.values(events[event]).forEach(action => {\n            action(...args);\n        });\n    }\n}","import { emit } from \"./event\";\n\nexport interface Message {id:number, i:number, j:number, v:number, t:number}\n\nexport interface Progress{\n  userGraph: Record<string, number>;\n  userSize: Record<number, number>;\n  userMemory: Record<number, Array<number>>;\n  messages: Array<Message>;\n  userCount: number;\n  time: number;\n}\n\nexport let progress:Progress = {\n    userGraph: {},\n    userSize: {},\n    userMemory: {},\n    messages: [],\n    userCount: 0,\n    time: 0\n}\n\nexport function setProgress(newProgress:Progress)\n{\n  emit(\"resetProgress\");\n  progress = newProgress;\n  for(let i=0;i<progress.userCount;i++)\n  {\n    emit(\"createdUser\",i);\n  }\n  progress.messages.forEach(msg => {\n    emit('addedMessage', msg);\n  });\n}\n\nexport function rGet(a:number,b:number)\n{\n  if(a>b){\n    return rGet(b,a);\n  }\n  const k = a.toString(32)+'_'+b.toString(32);\n  if (!(k in progress.userGraph)) {\n    return 0;\n  }\n  return progress.userGraph[k];\n}\n\nexport function rSet(a:number,b:number,v:number)\n{\n  if(a>b) {\n    rSet(b,a,v);\n    return;\n  }\n  const k = a.toString(32)+'_'+b.toString(32);\n  progress.userGraph[k] = v;\n}\n\nfunction balance(po:number, px:number, ox:number):{newPx:number, newPo:number}\n{\n  // const newPx = (Math.abs(px) + ox * Math.abs(po)) / (Math.abs(px) + Math.abs(po));\n  // return {\n  //   newPx: newPx,\n  //   newPo: ox * newPx\n  // }\n  let newPx = px;\n  let newPo = po;\n  if (po!=0&&ox!=0) newPx = 1/po/ox;\n  if (px!=0&&ox!=0) newPo = 1/px/ox;\n  return {newPx, newPo};\n}\n\nfunction changeAttitude(user:number, target:number, value:number):number\n{\n  const d = value - rGet(user, target);\n  rSet(user, target, value);\n  return d;\n}\n\nexport function processPushTask(task:Record<number,Array<number>>)\n{\n  for(const user in task){\n    const userId = parseInt(user);\n    const diffrence:Record<number, number>={};\n    for(const msgId in task[user])\n    {\n      const msg = progress.messages[msgId];\n      const {dpx, dpo} = pushMsgToUser(msg, userId);\n      diffrence[msg.i]=dpo;\n      diffrence[msg.j]=dpx;\n    }\n    for(const other in diffrence)\n    {\n      if (other == user) continue;\n      const diff = diffrence[other];\n      if (Math.abs(diff) >= 0.5) createMessage(userId, parseInt(other), diff);\n    }\n  }\n}\n\nexport function createMessage(i:number, j:number, v:number)\n{\n  const msg = {id:progress.messages.length,i,j,v,t:progress.time};\n  progress.messages.push(msg);\n  emit('addedMessage', msg);\n}\n\nexport function pushMsgToUser(msg:Message, user:number):{dpx:number,dpo:number}\n{\n  if(!(user in progress.userMemory))\n  {\n    progress.userMemory[user] = [];\n  }\n  progress.userMemory[user].push(msg.id);\n  console.log(progress.userMemory);\n  const {newPx, newPo} = balance(rGet(user, msg.i), rGet(user, msg.j), msg.v);\n  return {\n    dpx:changeAttitude(user, msg.j, newPx),\n    dpo:changeAttitude(user, msg.i, newPo)\n  };\n}\n\nexport function getRepulsion(i:number, j:number):boolean\n{\n    const rij=(a:number,b:number)=>Math.abs(rGet(a,b))<0.5;\n    let repulsion = rij(i,j);\n    if (!repulsion)\n    {\n        let innerRepulsion = false;\n        for(let d=1;d<j-i&&!innerRepulsion;d++)\n        {\n            innerRepulsion = !rij(i,i+d)&&!rij(i+d,j);\n        }\n        let outterRepulsion = false;\n        for(let d=1;d<i-j+progress.userCount&&!outterRepulsion;d++)\n        {\n            let o = j+d;\n            if (o >= progress.userCount)\n            {\n                o -= progress.userCount;\n            }\n            outterRepulsion = !rij(o,i)&&!rij(j,o);\n        }\n        repulsion = innerRepulsion && outterRepulsion;\n    }\n    return repulsion;\n}\n\nexport function createUser()\n{\n    const id = progress.userCount;\n    progress.userCount += 1;\n    emit(\"createdUser\",id);\n}\n\nexport default {}","import OpenAI from \"openai\"\n\nconst client = new OpenAI({\n    apiKey: \"sk-uFDUPAriuBg6l84rhrFxcRect2V0gpH59KVXj8dxG6wblr5p\",\n    baseURL: \"http://localhost:8080/llmapi\",\n    dangerouslyAllowBrowser: true\n})\n\nfunction delay(ms:number) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport async function chat(msg:string)\n{\n    await delay(100);\n    return msg;\n    for (let attempt = 1; attempt <= 2; attempt++) {\n        try {\n            const completion = await client.chat.completions.create({\n                model: \"kimi-k2-turbo-preview\",\n                messages: [\n                    {\"role\": \"system\", \"content\": msg},\n                ],\n                temperature: 0.6,\n            })\n            return completion.choices[0].message.content??\"\";\n        }\n        catch (e)\n        {\n            await delay(5000);\n            console.error(e);\n        }\n    }\n    return \"\";\n}","import { ref, Ref } from \"vue\"\nimport { emit } from \"./event\"\nimport { Message, progress } from \"./game\"\nimport { chat } from \"./llm\"\n\nexport interface UserText {\n    name:string,\n    prompt:string\n}\nexport interface MessageText {\n    title: string,\n    content: string,\n    minimumVersion: string\n}\n\nexport let text:{\n    userTexts:Array<UserText>\n    messageTexts:Array<MessageText>\n}={\n    userTexts: [],\n    messageTexts: []\n}\n\nconst textSource = localStorage.getItem('text');\nif (textSource != null)\n{\n    text = JSON.parse(textSource);\n}\n\nfunction getUserText(id:number):UserText\n{\n    if (id >= 0 && id < text.userTexts.length) return text.userTexts[id];\n    return {\n        name: '',\n        prompt: ''\n    }\n}\n\nexport function getUserName(id:number):string\n{\n    if (id<0 || id>=text.userTexts.length) return id.toString();\n    return text.userTexts[id].name\n}\n\nfunction getFullUserPrompt(id:number)\n{\n    // const basicPrompt = getUserText(id).prompt;\n    let historyContainer = \"\";\n    if (id in progress.userMemory && progress.userMemory[id].length>0)\n    {\n        historyContainer = `你需要参考的信息：[${progress.userMemory[id].filter(m=>m<text.messageTexts.length).map(m=>text.messageTexts[m].minimumVersion).join()}]。`;\n    }\n    return `${historyContainer}`;\n}\n\nconst traits:Array<string> = [\"神经质\",\"幽默\",\"严肃\"];\n\nfunction randomPick(arr:Array<string>):string\n{\n    return arr[Math.floor(Math.random()*traits.length)];\n}\n\nfunction getRelationshipDiffDescribe(relationship:number,other:string):string\n{\n    if (relationship > 0.5) return `对${other}的认同`;\n    if (relationship < 0.5) return `反对${other}`;\n    return `对社交媒体平台推送机制的反感`;\n}\nfunction getRelationshipDescribe(relationship:number):string\n{\n    if (relationship > 0.5) return \"认同\";\n    if (relationship < 0.5) return \"排斥\";\n    return \"不感兴趣\";\n}\n\nfunction getMessageContentPrompt(msg:Message):string\n{\n    return `扮演一名社交媒体用户虚构贴文。你的个性：${randomPick(traits)}。${getFullUserPrompt(msg.i)}要求1：长度1句话。要求2：站在${getUserText(msg.i).prompt}的视角表达你${getRelationshipDiffDescribe(msg.v,getUserText(msg.j).prompt)}。`;\n}\n\nfunction getMessageTitlePrompt(content:string):string\n{\n    return `[${content}]扮演作者，选择1个短语作为标题，不要出现任何标点符号。`;\n}\nfunction getMessageMinimumVersionPrompt(content:string):string\n{\n    return `[${content}]一句话总结这篇社媒博文。`;\n}\n\nconst generateQueue:Array<Message> = []\n\nlet generating = false;\n\nexport async function processGenerateQueue()\n{\n    if (generating || generateQueue.length==0) return;\n    console.log(\"生成新消息\");\n    generating = true;\n    const msg = generateQueue[0];\n    if (text.messageTexts.length - 1 < msg.id)\n    {\n        text.messageTexts.push({\n            title: \"\",\n            content: \"\",\n            minimumVersion: \"\"\n        });\n    }\n    const content = await chat(getMessageContentPrompt(msg));\n    const title = await chat(getMessageTitlePrompt(content));\n    const minimumVersion = await chat(getMessageMinimumVersionPrompt(content));\n    text.messageTexts[msg.id] = {title, content, minimumVersion}\n    localStorage.setItem('text', JSON.stringify(text));\n    emit(\"generatedMessage\", msg.id, title, content);\n    generateQueue.shift();\n    generating = false;\n    console.log(\"消息生成完毕\");\n}\n\nexport async function startGenerateMessage(msg:Message)\n{\n    if (msg.id>=text.messageTexts.length || text.messageTexts[msg.id].title == '')\n    {\n        generateQueue.push(msg);\n    }\n}\n\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { emit } from '@/event';\n\nimport { NBadge } from 'naive-ui';\nimport { getUserName } from '@/text';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CanvasUser',\n  props: {\n    id: {},\n    x: {},\n    y: {},\n    selected: { type: Boolean },\n    focused: { type: Boolean },\n    px: {},\n    py: {},\n    ps: {},\n    badgeDefault: {},\n    badgeInfo: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\nfunction onClick()\n{\n  emit('userPressed', props.id);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"canvas-user\",\n    style: _normalizeStyle({left: (__props.px + __props.x) * __props.ps - 20 + 'px', top: (__props.py + __props.y) * __props.ps - 20 + 'px', outline: (__props.selected?'2px':'1px') + ' solid '+ (__props.focused?'#ff0':'#000')}),\n    onClick: onClick\n  }, [\n    _createVNode(_unref(NBadge), {\n      value: __props.badgeDefault,\n      offset: [10,-5]\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NBadge), {\n          value: __props.badgeInfo,\n          type: 'info',\n          offset: [10,30]\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", null, _toDisplayString(_unref(getUserName)(__props.id)), 1)\n          ]),\n          _: 1\n        }, 8, [\"value\"])\n      ]),\n      _: 1\n    }, 8, [\"value\"])\n  ], 4))\n}\n}\n\n})","<template>\n  <div class=\"canvas-user\" :style=\"{left: (px + x) * ps - 20 + 'px', top: (py + y) * ps - 20 + 'px', outline: (selected?'2px':'1px') + ' solid '+ (focused?'#ff0':'#000')}\"\n  @click=\"onClick\"\n  >\n    <n-badge :value=\"badgeDefault\" :offset=\"[10,-5]\">\n    <n-badge :value=\"badgeInfo\" :type=\"'info'\" :offset=\"[10,30]\">\n    <div>{{ getUserName(id) }}</div>\n    </n-badge>\n    </n-badge>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { emit } from '@/event';\nimport { defineProps } from 'vue'\nimport { NBadge } from 'naive-ui';\nimport { getUserName } from '@/text';\nconst props = defineProps<{\n  id: number,\n  x: number,\n  y: number,\n  selected: boolean,\n  focused: boolean,\n  px: number,\n  py: number,\n  ps: number,\n  badgeDefault: number,\n  badgeInfo: number\n}>();\nfunction onClick()\n{\n  emit('userPressed', props.id);\n}\n</script>\n\n<style scoped>\n.canvas-user\n{\n  position: absolute;\n  border-radius: 100%;\n  outline: 1px solid #000;\n  background: #fff;\n  color: #000;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  -webkit-user-drag: none;\n  cursor: pointer;\n}\n</style>","import script from \"./CanvasUser.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CanvasUser.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CanvasUser.vue?vue&type=style&index=0&id=83950c74&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-83950c74\"]])\n\nexport default __exports__","<template>\n<div class=\"canvas\"\n:style=\"{'background-size': 20*s+'px '+20*s+'px', 'background-position': x*s+'px '+y*s+'px'}\">\n    <div class=\"mouse-input-handler\" @mousedown=\"onMousedown\" @mouseup=\"onMouseup\" @mousemove=\"onMousemove\" @touchstart=\"onTouchStart\" @touchend=\"onTouchEnd\" @touchmove=\"onTouchMove\" @wheel=\"onWheel\"></div>\n    <CanvasUser v-for=\"user in state.users\" :key=\"user.id\"\n    :id=\"user.id\" :x=\"user.x\" :y=\"user.y\" :px=\"x\" :py=\"y\" :ps=\"s\" :selected=\"state.selectedUsers.includes(user.id)\" :focused=\"state.focusedUser==user.id\"\n    :badge-default=\"(user.id in appState.uncollectedMessages)?appState.uncollectedMessages[user.id].length:0\"\n    :badge-info=\"(user.id in appState.readyToPushMessages)?appState.readyToPushMessages[user.id].length:0\"\n    />\n    <canvas id=\"lines\"/>\n</div>\n</template>\n\n<script setup lang=\"ts\">\nimport { getRepulsion, progress, rGet, rSet } from '../game'\nimport { defineProps, onMounted, Ref, ref } from 'vue'\nimport CanvasUser from './CanvasUser.vue'\nimport { subscribe } from '../event'\nimport { AppState } from '@/App.vue';\ntype User = {\n    id: number;\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n};\nconst state:Ref<{\n    users: Array<User>,\n    selectedUsers: Array<number>\n    focusedUser: number\n}> = ref({\n  users: [],\n  selectedUsers: [],\n  focusedUser: -1\n})\n\nconst props = defineProps<{appState:AppState}>();\n\nconst x = ref(0);\nconst y = ref(0);\nconst s = ref(1);\nsubscribe('userPressed', (id)=>\n{\n    if (props.appState.mode == 'user-edit') return;\n    let selectedUsers = state.value.selectedUsers;\n    if (selectedUsers.includes(id))\n    {\n        if (state.value.focusedUser != id)\n        {\n            state.value.focusedUser = id;\n        }\n        else\n        {\n            state.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n            state.value.focusedUser = -1;\n        }\n    }\n    else{\n        state.value.focusedUser = id;\n        selectedUsers.push(id);\n    }\n})\n\nlet multiSelecting = false;\nlet multiSelectStartX = 0;\nlet multiSelectStartY = 0;\nlet mouseX = 0;\nlet mouseY = 0;\nlet touchStartX = 0;\nlet touchStartY = 0;\nlet touchStartCanvasX = 0;\nlet touchStartCanvasY = 0;\nlet touchesDistance = -1;\n\nfunction onTouchStart(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1)\n    {\n        const touch = e.touches[0];\n        touchStartX = touch.clientX;\n        touchStartY = touch.clientY;\n        touchStartCanvasX = x.value;\n        touchStartCanvasY = y.value;\n    }\n}\n\nfunction onTouchEnd(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 0)\n    {\n        touchesDistance = -1;\n    }\n}\n\nfunction onTouchMove(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1 && touchesDistance == -1)\n    {\n        const touch = e.touches[0];\n        mouseX = touch.clientX;\n        mouseY = touch.clientY;\n        x.value = mouseX - touchStartX + touchStartCanvasX;\n        y.value = mouseY - touchStartY + touchStartCanvasY;\n    }\n    else if (e.touches.length == 2)\n    {\n        const x1 = e.touches[0].clientX;\n        const y1 = e.touches[0].clientY;\n        const x2 = e.touches[1].clientX;\n        const y2 = e.touches[1].clientY;\n        const d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        if (touchesDistance>0)\n        {\n            let delta = (d - touchesDistance) * 0.01;\n            if (delta < -1)\n            {\n                delta = -1;\n            }\n            if (delta > 1)\n            {\n                delta = 1;\n            }\n            delta += 1;\n            // if (delta < 0)\n            // {\n            //     delta += 1;\n            // }\n            changeScale((x1+x2)/2, (y1+y2)/2, delta);\n        }\n        touchesDistance = d;\n    }\n}\n\nfunction onMousemove(e:any)\n{\n    if (e.buttons==4) {\n        x.value += e.movementX / s.value;\n        y.value += e.movementY / s.value;\n    }\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n    multiSelecting = e.buttons==1;\n}\n\nfunction onMousedown(e:any)\n{\n    if (e.buttons==1)\n    {\n        multiSelecting = true;\n        multiSelectStartX=e.clientX;\n        multiSelectStartY=e.clientY;\n    }\n    bgDownButtons = e.buttons;\n}\n\nlet bgDownButtons = 0;\n\n\nfunction onMouseup(e:any)\n{\n    if (bgDownButtons == 1)\n    {\n        state.value.selectedUsers = [];\n        state.value.focusedUser = -1;\n    }\n    if (multiSelecting && Math.abs(mouseX - multiSelectStartX) > 10 && Math.abs(mouseY - multiSelectStartY) > 10)\n    {\n        state.value.selectedUsers = state.value.users.filter(user=>\n        {\n            const ux = (user.x + x.value) * s.value;\n            const uy = (user.y + y.value) * s.value;\n            let newSelecteState = e.shiftKey?state.value.selectedUsers.includes(user.id):false;\n            if (((ux > multiSelectStartX && ux < mouseX) || (ux > mouseX && ux < multiSelectStartX))\n            && ((uy > multiSelectStartY && uy < mouseY) || (uy > mouseY && uy < multiSelectStartY)))\n            {\n                newSelecteState = true;\n            }\n            return newSelecteState;\n        }).map(user=>user.id);\n    }\n    multiSelecting = false;\n}\n\nfunction changeScale(mx:number, my:number, delta:number)\n{\n\n    let s1 = s.value;\n    let mx1 = mx / s1 - x.value;\n    let my1 = my / s1 - y.value;\n    s.value *= delta;\n    let s2 = s.value;\n    let mx2 = mx / s2 - x.value;\n    let my2 = my / s2 - y.value;\n    x.value += mx2 - mx1;\n    y.value += my2 - my1;\n}\n\nfunction onWheel(e:any)\n{\n    let delta = e.wheelDelta * 0.01;\n    if (delta < 0)\n    {\n        delta += 2.0;\n    }\n    if (delta < 0 || delta > 2.0) return;\n    changeScale(e.clientX, e.clientY, delta);\n}\n\nlet linesCanvas:any;\nlet linesCtx:any;\n\nconst idealDist = 150;\nconst delta = 1/60;\nconst stepLength = 100;\nconst d = delta * stepLength;\n\nfunction getForce(ax:number, ay:number, bx:number, by:number, repulsion:boolean, idealDistScale:number, strengthScale:number) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ls = dx * dx + dy * dy;\n    const l = Math.sqrt(ls);\n    const tl = idealDist * idealDistScale;\n    const s = 15 * strengthScale;\n    let f = s * (l - tl) / ls * d;\n    if (repulsion && l >= tl)\n    {\n        f = 0;\n    }\n    return {\n        x: dx * f,\n        y: dy * f\n    }\n}\n\nonMounted(()=>{\n    linesCanvas = document.getElementById('lines');\n    linesCtx = linesCanvas.getContext(\"2d\");\n    setInterval(physicsProcess,delta*1000);\n    document.addEventListener('keydown', (e)=>{\n        const focusedUser = state.value.focusedUser;\n        if(e.key=='a' && e.ctrlKey && focusedUser>=0)\n        {\n            state.value.selectedUsers.forEach(user=>{\n                if (user==focusedUser) return;\n                rSet(user, focusedUser, 1);\n            })\n        }\n        else if(e.key=='c' && e.ctrlKey && focusedUser>=0)\n        {\n            state.value.selectedUsers.forEach(user=>{\n                if (user==focusedUser) return;\n                rSet(user, focusedUser, 0);\n            })\n        }\n        else if (e.key=='Escape')\n        {\n            state.value.selectedUsers = [];\n            state.value.focusedUser = -1;\n        }\n    });\n    subscribe(\"createdUser\", (id:number)=>{\n        state.value.users.push({\n            id: id,\n            x: (id % 2) * 100,\n            y: Math.floor(id / 2) * 100,\n            vx: 0,\n            vy: 0\n        });\n    });\n});\n\nfunction physicsProcess()\n{\n    const users = state.value.users;\n    for (let i = 0; i < progress.userCount-1; i++) {\n        const a = users[i];\n        for (let j = i + 1; j < progress.userCount; j++) {\n            const b = users[j];\n            const repulsion = getRepulsion(i,j);\n            let f = getForce(a.x, a.y, b.x, b.y, repulsion, repulsion?1:0.5, repulsion?0.5:0.5);\n            a.vx += f.x;\n            a.vy += f.y;\n            b.vx -= f.x;\n            b.vy -= f.y;\n        }\n    }\n    Object.values(state.value.users).forEach(user=>\n        {\n            user.vx *= 1 - (0.2 * d);\n            user.vy *= 1 - (0.2 * d);\n            user.vx -= user.x * 0.01 * d;\n            user.vy -= user.y * 0.01 * d;\n            user.x += user.vx * d;\n            user.y += user.vy * d;\n        }\n    )\n    redraw();\n}\n\nfunction redraw()\n{\n    linesCanvas.width = window.innerWidth;\n    linesCanvas.height = window.innerHeight;\n    Object.entries(progress.userGraph).forEach(([k,v])=>\n    {\n        const splited = k.split('_');\n        const fromId = parseInt(splited[0],32);\n        const toId = parseInt(splited[1],32);\n        const from = state.value.users[fromId];\n        const to = state.value.users[toId];\n        const r = rGet(fromId, toId);\n        let a = Math.abs(r);\n        if (a < 0) return;\n        const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n        // const style = `#000`;\n        linesCtx.strokeStyle = style;\n        linesCtx.beginPath();\n        linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n        linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n        linesCtx.stroke();\n    });\n    // for(let i=0;i<progress.userCount;i++)\n    // {\n    //     for(let j=i+1;j<progress.userCount;j++)\n    //     {\n    //         const from = state.value.users[i];\n    //         const to = state.value.users[j];\n    //         const repulsion = getRepulsion(i,j);\n    //         const style = `#00ff00${(!repulsion)?'ff':'00'}`;\n    //         linesCtx.strokeStyle = style;\n    //         linesCtx.beginPath();\n    //         linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n    //         linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n    //         linesCtx.stroke();\n    //     }\n    // }\n    const w = mouseX-multiSelectStartX;\n    const h = mouseY-multiSelectStartY;\n    if (multiSelecting && Math.abs(w) > 10 && Math.abs(h) > 10)\n    {\n        linesCtx.rect(multiSelectStartX, multiSelectStartY, w, h);\n        linesCtx.fillStyle = '#00000033';\n        linesCtx.fill();\n    }\n}\n\n</script>\n\n<style scoped>\n.canvas\n{\n    position: absolute;\n    width: 100vw;\n    height: 100vh;\n    scroll-behavior:unset;\n    background-image:\n    linear-gradient(to right, gainsboro 1px, transparent 1px),\n    linear-gradient(to bottom, gainsboro 1px, transparent 1px);\n}\n.bg\n{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n}\n.mouse-input-handler\n{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n</style>","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, normalizeStyle as _normalizeStyle } from \"vue\"\n\nimport { getRepulsion, progress, rGet, rSet } from '../game'\nimport { onMounted, Ref, ref } from 'vue'\nimport CanvasUser from './CanvasUser.vue'\nimport { subscribe } from '../event'\nimport { AppState } from '@/App.vue';\ntype User = {\n    id: number;\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n};\nconst idealDist = 150;\nconst delta = 1/60;\nconst stepLength = 100;\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'GameCanvas',\n  props: {\n    appState: {}\n  },\n  setup(__props: any) {\n\nconst state:Ref<{\n    users: Array<User>,\n    selectedUsers: Array<number>\n    focusedUser: number\n}> = ref({\n  users: [],\n  selectedUsers: [],\n  focusedUser: -1\n})\n\nconst props = __props;\n\nconst x = ref(0);\nconst y = ref(0);\nconst s = ref(1);\nsubscribe('userPressed', (id)=>\n{\n    if (props.appState.mode == 'user-edit') return;\n    let selectedUsers = state.value.selectedUsers;\n    if (selectedUsers.includes(id))\n    {\n        if (state.value.focusedUser != id)\n        {\n            state.value.focusedUser = id;\n        }\n        else\n        {\n            state.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n            state.value.focusedUser = -1;\n        }\n    }\n    else{\n        state.value.focusedUser = id;\n        selectedUsers.push(id);\n    }\n})\n\nlet multiSelecting = false;\nlet multiSelectStartX = 0;\nlet multiSelectStartY = 0;\nlet mouseX = 0;\nlet mouseY = 0;\nlet touchStartX = 0;\nlet touchStartY = 0;\nlet touchStartCanvasX = 0;\nlet touchStartCanvasY = 0;\nlet touchesDistance = -1;\n\nfunction onTouchStart(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1)\n    {\n        const touch = e.touches[0];\n        touchStartX = touch.clientX;\n        touchStartY = touch.clientY;\n        touchStartCanvasX = x.value;\n        touchStartCanvasY = y.value;\n    }\n}\n\nfunction onTouchEnd(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 0)\n    {\n        touchesDistance = -1;\n    }\n}\n\nfunction onTouchMove(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1 && touchesDistance == -1)\n    {\n        const touch = e.touches[0];\n        mouseX = touch.clientX;\n        mouseY = touch.clientY;\n        x.value = mouseX - touchStartX + touchStartCanvasX;\n        y.value = mouseY - touchStartY + touchStartCanvasY;\n    }\n    else if (e.touches.length == 2)\n    {\n        const x1 = e.touches[0].clientX;\n        const y1 = e.touches[0].clientY;\n        const x2 = e.touches[1].clientX;\n        const y2 = e.touches[1].clientY;\n        const d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        if (touchesDistance>0)\n        {\n            let delta = (d - touchesDistance) * 0.01;\n            if (delta < -1)\n            {\n                delta = -1;\n            }\n            if (delta > 1)\n            {\n                delta = 1;\n            }\n            delta += 1;\n            // if (delta < 0)\n            // {\n            //     delta += 1;\n            // }\n            changeScale((x1+x2)/2, (y1+y2)/2, delta);\n        }\n        touchesDistance = d;\n    }\n}\n\nfunction onMousemove(e:any)\n{\n    if (e.buttons==4) {\n        x.value += e.movementX / s.value;\n        y.value += e.movementY / s.value;\n    }\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n    multiSelecting = e.buttons==1;\n}\n\nfunction onMousedown(e:any)\n{\n    if (e.buttons==1)\n    {\n        multiSelecting = true;\n        multiSelectStartX=e.clientX;\n        multiSelectStartY=e.clientY;\n    }\n    bgDownButtons = e.buttons;\n}\n\nlet bgDownButtons = 0;\n\n\nfunction onMouseup(e:any)\n{\n    if (bgDownButtons == 1)\n    {\n        state.value.selectedUsers = [];\n        state.value.focusedUser = -1;\n    }\n    if (multiSelecting && Math.abs(mouseX - multiSelectStartX) > 10 && Math.abs(mouseY - multiSelectStartY) > 10)\n    {\n        state.value.selectedUsers = state.value.users.filter(user=>\n        {\n            const ux = (user.x + x.value) * s.value;\n            const uy = (user.y + y.value) * s.value;\n            let newSelecteState = e.shiftKey?state.value.selectedUsers.includes(user.id):false;\n            if (((ux > multiSelectStartX && ux < mouseX) || (ux > mouseX && ux < multiSelectStartX))\n            && ((uy > multiSelectStartY && uy < mouseY) || (uy > mouseY && uy < multiSelectStartY)))\n            {\n                newSelecteState = true;\n            }\n            return newSelecteState;\n        }).map(user=>user.id);\n    }\n    multiSelecting = false;\n}\n\nfunction changeScale(mx:number, my:number, delta:number)\n{\n\n    let s1 = s.value;\n    let mx1 = mx / s1 - x.value;\n    let my1 = my / s1 - y.value;\n    s.value *= delta;\n    let s2 = s.value;\n    let mx2 = mx / s2 - x.value;\n    let my2 = my / s2 - y.value;\n    x.value += mx2 - mx1;\n    y.value += my2 - my1;\n}\n\nfunction onWheel(e:any)\n{\n    let delta = e.wheelDelta * 0.01;\n    if (delta < 0)\n    {\n        delta += 2.0;\n    }\n    if (delta < 0 || delta > 2.0) return;\n    changeScale(e.clientX, e.clientY, delta);\n}\n\nlet linesCanvas:any;\nlet linesCtx:any;\n\nconst d = delta * stepLength;\n\nfunction getForce(ax:number, ay:number, bx:number, by:number, repulsion:boolean, idealDistScale:number, strengthScale:number) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ls = dx * dx + dy * dy;\n    const l = Math.sqrt(ls);\n    const tl = idealDist * idealDistScale;\n    const s = 15 * strengthScale;\n    let f = s * (l - tl) / ls * d;\n    if (repulsion && l >= tl)\n    {\n        f = 0;\n    }\n    return {\n        x: dx * f,\n        y: dy * f\n    }\n}\n\nonMounted(()=>{\n    linesCanvas = document.getElementById('lines');\n    linesCtx = linesCanvas.getContext(\"2d\");\n    setInterval(physicsProcess,delta*1000);\n    document.addEventListener('keydown', (e)=>{\n        const focusedUser = state.value.focusedUser;\n        if(e.key=='a' && e.ctrlKey && focusedUser>=0)\n        {\n            state.value.selectedUsers.forEach(user=>{\n                if (user==focusedUser) return;\n                rSet(user, focusedUser, 1);\n            })\n        }\n        else if(e.key=='c' && e.ctrlKey && focusedUser>=0)\n        {\n            state.value.selectedUsers.forEach(user=>{\n                if (user==focusedUser) return;\n                rSet(user, focusedUser, 0);\n            })\n        }\n        else if (e.key=='Escape')\n        {\n            state.value.selectedUsers = [];\n            state.value.focusedUser = -1;\n        }\n    });\n    subscribe(\"createdUser\", (id:number)=>{\n        state.value.users.push({\n            id: id,\n            x: (id % 2) * 100,\n            y: Math.floor(id / 2) * 100,\n            vx: 0,\n            vy: 0\n        });\n    });\n});\n\nfunction physicsProcess()\n{\n    const users = state.value.users;\n    for (let i = 0; i < progress.userCount-1; i++) {\n        const a = users[i];\n        for (let j = i + 1; j < progress.userCount; j++) {\n            const b = users[j];\n            const repulsion = getRepulsion(i,j);\n            let f = getForce(a.x, a.y, b.x, b.y, repulsion, repulsion?1:0.5, repulsion?0.5:0.5);\n            a.vx += f.x;\n            a.vy += f.y;\n            b.vx -= f.x;\n            b.vy -= f.y;\n        }\n    }\n    Object.values(state.value.users).forEach(user=>\n        {\n            user.vx *= 1 - (0.2 * d);\n            user.vy *= 1 - (0.2 * d);\n            user.vx -= user.x * 0.01 * d;\n            user.vy -= user.y * 0.01 * d;\n            user.x += user.vx * d;\n            user.y += user.vy * d;\n        }\n    )\n    redraw();\n}\n\nfunction redraw()\n{\n    linesCanvas.width = window.innerWidth;\n    linesCanvas.height = window.innerHeight;\n    Object.entries(progress.userGraph).forEach(([k,v])=>\n    {\n        const splited = k.split('_');\n        const fromId = parseInt(splited[0],32);\n        const toId = parseInt(splited[1],32);\n        const from = state.value.users[fromId];\n        const to = state.value.users[toId];\n        const r = rGet(fromId, toId);\n        let a = Math.abs(r);\n        if (a < 0) return;\n        const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n        // const style = `#000`;\n        linesCtx.strokeStyle = style;\n        linesCtx.beginPath();\n        linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n        linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n        linesCtx.stroke();\n    });\n    // for(let i=0;i<progress.userCount;i++)\n    // {\n    //     for(let j=i+1;j<progress.userCount;j++)\n    //     {\n    //         const from = state.value.users[i];\n    //         const to = state.value.users[j];\n    //         const repulsion = getRepulsion(i,j);\n    //         const style = `#00ff00${(!repulsion)?'ff':'00'}`;\n    //         linesCtx.strokeStyle = style;\n    //         linesCtx.beginPath();\n    //         linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n    //         linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n    //         linesCtx.stroke();\n    //     }\n    // }\n    const w = mouseX-multiSelectStartX;\n    const h = mouseY-multiSelectStartY;\n    if (multiSelecting && Math.abs(w) > 10 && Math.abs(h) > 10)\n    {\n        linesCtx.rect(multiSelectStartX, multiSelectStartY, w, h);\n        linesCtx.fillStyle = '#00000033';\n        linesCtx.fill();\n    }\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"canvas\",\n    style: _normalizeStyle({'background-size': 20*s.value+'px '+20*s.value+'px', 'background-position': x.value*s.value+'px '+y.value*s.value+'px'})\n  }, [\n    _createElementVNode(\"div\", {\n      class: \"mouse-input-handler\",\n      onMousedown: onMousedown,\n      onMouseup: onMouseup,\n      onMousemove: onMousemove,\n      onTouchstart: onTouchStart,\n      onTouchend: onTouchEnd,\n      onTouchmove: onTouchMove,\n      onWheel: onWheel\n    }, null, 32),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.value.users, (user) => {\n      return (_openBlock(), _createBlock(CanvasUser, {\n        key: user.id,\n        id: user.id,\n        x: user.x,\n        y: user.y,\n        px: x.value,\n        py: y.value,\n        ps: s.value,\n        selected: state.value.selectedUsers.includes(user.id),\n        focused: state.value.focusedUser==user.id,\n        \"badge-default\": (user.id in __props.appState.uncollectedMessages)?__props.appState.uncollectedMessages[user.id].length:0,\n        \"badge-info\": (user.id in __props.appState.readyToPushMessages)?__props.appState.readyToPushMessages[user.id].length:0\n      }, null, 8, [\"id\", \"x\", \"y\", \"px\", \"py\", \"ps\", \"selected\", \"focused\", \"badge-default\", \"badge-info\"]))\n    }), 128)),\n    _cache[0] || (_cache[0] = _createElementVNode(\"canvas\", { id: \"lines\" }, null, -1))\n  ], 4))\n}\n}\n\n})","import script from \"./GameCanvas.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameCanvas.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameCanvas.vue?vue&type=style&index=0&id=da511bb6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-da511bb6\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, renderSlot as _renderSlot, withCtx as _withCtx } from \"vue\"\n\nconst _hoisted_1 = { key: 1 }\nconst _hoisted_2 = { key: 1 }\n\nimport { Message } from '@/game';\nimport { ref } from 'vue';\nimport { NCard, NSkeleton } from 'naive-ui';\nimport { text } from '@/text';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MessageCard',\n  props: {\n    msg: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\nlet title = ref(\"\");\nlet content = ref(\"\");\nconst intervalId = setInterval(()=>{\n    const messageText = text.messageTexts[props.msg.id];\n    if (typeof(messageText)!=\"undefined\" && messageText.title != '')\n    {\n        title.value = messageText.title;\n        content.value = messageText.content;\n        clearInterval(intervalId);\n    }\n}, 100);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NCard), {\n    class: \"message-card\",\n    hoverable: \"\"\n  }, {\n    header: _withCtx(() => [\n      (_unref(title)=='')\n        ? (_openBlock(), _createBlock(_unref(NSkeleton), {\n            key: 0,\n            width: 100,\n            round: \"\"\n          }))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n            _createElementVNode(\"h3\", null, _toDisplayString(_unref(title)), 1)\n          ]))\n    ]),\n    action: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"action\")\n    ]),\n    default: _withCtx(() => [\n      (_unref(content)=='')\n        ? (_openBlock(), _createBlock(_unref(NSkeleton), {\n            key: 0,\n            text: \"\",\n            repeat: 2\n          }))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n            _createElementVNode(\"p\", null, _toDisplayString(__props.msg.t), 1),\n            _createElementVNode(\"p\", null, _toDisplayString(_unref(content)), 1)\n          ]))\n    ]),\n    _: 3\n  }))\n}\n}\n\n})","<template>\n<n-card class=\"message-card\" hoverable>\n    <template #header>\n        <n-skeleton v-if=\"title==''\" :width=\"100\" round />\n        <div v-else>\n            <h3>{{ title }}</h3>\n        </div>\n    </template>\n    <n-skeleton v-if=\"content==''\" text :repeat=\"2\"/>\n    <div v-else>\n        <p>{{msg.t}}</p><p>{{ content }}</p>\n    </div>\n    <template #action>\n        <slot name=\"action\"></slot>\n    </template>\n</n-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { Message } from '@/game';\nimport { defineProps, ref } from 'vue';\nimport { NCard, NSkeleton } from 'naive-ui';\nimport { text } from '@/text';\nconst props = defineProps<{msg:Message}>();\n\nlet title = ref(\"\");\nlet content = ref(\"\");\nconst intervalId = setInterval(()=>{\n    const messageText = text.messageTexts[props.msg.id];\n    if (typeof(messageText)!=\"undefined\" && messageText.title != '')\n    {\n        title.value = messageText.title;\n        content.value = messageText.content;\n        clearInterval(intervalId);\n    }\n}, 100);\n</script>\n\n<style scoped>\n.message-card\n{\n    margin-left: auto;\n    margin-right: auto;\n    margin-top: 20px;\n    padding: 10px;\n}\n</style>","import script from \"./MessageCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageCard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MessageCard.vue?vue&type=style&index=0&id=3848783c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3848783c\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { Message } from '@/game';\nimport { DataTableColumns } from 'naive-ui';\n\nimport { NDataTable } from 'naive-ui';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MessageList',\n  props: /*@__PURE__*/_mergeModels({\n    source: {},\n    select: { type: Boolean }\n  }, {\n    \"modelValue\": {},\n    \"modelModifiers\": {},\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props: any) {\n\nconst props = __props;\n\nconst checkedRowKeys=_useModel<Array<number>>(__props, \"modelValue\");\n\nfunction createColumns(): DataTableColumns<Message> {\n  return [\n    {\n      title: '创作群体',\n      key: 'i'\n    },\n    {\n      title: '时间',\n      key: 't'\n    },\n    {\n      title: '涉及群体',\n      key: 'j'\n    },\n    {\n      title: '态度',\n      key: 'v'\n    }\n  ]\n}\n\nlet columns=createColumns();\n\nif (props.select)\n{\n  columns = [{\n    type: 'selection',\n    multiple: true\n  }, ...columns]\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NDataTable), {\n    \"checked-row-keys\": checkedRowKeys.value,\n    \"onUpdate:checkedRowKeys\": _cache[0] || (_cache[0] = ($event: any) => ((checkedRowKeys).value = $event)),\n    columns: _unref(columns),\n    data: __props.source,\n    pagination: false,\n    bordered: false,\n    \"row-key\": (msg)=>msg.id,\n    striped: \"\"\n  }, null, 8, [\"checked-row-keys\", \"columns\", \"data\", \"row-key\"]))\n}\n}\n\n})","<template>\n<n-data-table\n    v-model:checked-row-keys=\"checkedRowKeys\"\n    :columns=\"columns\"\n    :data=\"source\"\n    :pagination=\"false\"\n    :bordered=\"false\"\n    :row-key=\"(msg:Message)=>msg.id\"\nstriped />\n</template>\n\n<script setup lang=\"ts\">\nimport { Message } from '@/game';\nimport { DataTableColumns } from 'naive-ui';\nimport { defineProps, defineModel } from 'vue';\nimport { NDataTable } from 'naive-ui';\nconst props = defineProps<{source:Array<Message>,select:boolean}>();\n\nconst checkedRowKeys=defineModel<Array<number>>();\n\nfunction createColumns(): DataTableColumns<Message> {\n  return [\n    {\n      title: '创作群体',\n      key: 'i'\n    },\n    {\n      title: '时间',\n      key: 't'\n    },\n    {\n      title: '涉及群体',\n      key: 'j'\n    },\n    {\n      title: '态度',\n      key: 'v'\n    }\n  ]\n}\n\nlet columns=createColumns();\n\nif (props.select)\n{\n  columns = [{\n    type: 'selection',\n    multiple: true\n  }, ...columns]\n}\n\n</script>\n\n<style scoped>\n\n</style>","import script from \"./MessageList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageList.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"app\" }\nconst _hoisted_2 = { class: \"corner-buttons\" }\n\nimport { onMounted, Ref, ref } from 'vue';\nimport GameCanvas from './components/GameCanvas.vue';\nimport MessageCard from './components/MessageCard.vue';\nimport MessageList from './components/MessageList.vue';\nimport { rSet, createUser, Message, progress, createMessage, processPushTask, setProgress } from './game';\nimport { subscribe } from './event';\nimport { NPageHeader, NTabs, NTabPane, NDrawer, NDrawerContent, NButton, NModal, NCard, NFlex } from 'naive-ui';\nimport { getUserName, processGenerateQueue } from './text';\nimport { startGenerateMessage } from './text';\n\nexport interface AppState {\n        mode: \"user-edit\" | \"broadcast\";\n        editingUser: number;\n        uncollectedMessages: Record<number,Array<number>>;\n        collectedMessages: Array<number>;\n        readyToPushMessages: Record<number,Array<number>>;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\nonMounted(()=>{\n    const progressSource = localStorage.getItem('progress');\n    if (progressSource != null)\n    {\n        setProgress(JSON.parse(progressSource));\n    }\n    const appstateSource = localStorage.getItem('appstate');\n    if (appstateSource != null)\n    {\n        appState.value = JSON.parse(appstateSource);\n    }\n    else\n    {\n        for(let i=0;i<10;i++)\n        {\n            createUser();\n            for(let j=0;j<i;j++){\n                const v = Math.floor(Math.random()*3)-1;\n                rSet(i,j,v);\n                if (Math.abs(v)>0.5)\n                {\n                    if (Math.random()>0.5)\n                    {\n                        createMessage(i,j,v);\n                    }\n                    else\n                    {\n                        createMessage(j,i,v);\n                    }\n                }\n            }\n        }\n    }\n    window.addEventListener('beforeunload', ()=>{\n        localStorage.setItem('appstate', JSON.stringify(appState.value))\n        localStorage.setItem('progress', JSON.stringify(progress));\n    });\n});\n\nconst appState:Ref<AppState> = ref({\n    mode:'user-edit',\n    editingUser:-1,\n    uncollectedMessages:{},\n    collectedMessages:[],\n    readyToPushMessages:{}\n});\n\nconst showUserEditor = ref(false);\nconst collectedMessagesModal = ref(false);\n\nconst messages = ref(progress.messages);\nfunction getUserMessages(author:number)\n{\n    return messages.value.filter(m=>m.i==author);\n}\nfunction getUserPushableMessages(user:number)\n{\n    return appState.value.collectedMessages.map(mid=>progress.messages[mid]).filter(m=>m.i!=user&&(progress.userMemory[user]==undefined||progress.userMemory[user].includes(m.id)))\n}\n\nsubscribe('userPressed', (id)=>\n{\n    if (appState.value.mode==\"user-edit\")\n    {\n        if (!(id in appState.value.readyToPushMessages)) {appState.value.readyToPushMessages[id] = []}\n        showUserEditor.value = true;\n        appState.value.editingUser = id;\n    }\n})\n\nsubscribe('addedMessage', (msg:Message)=>{\n    if (!(msg.i in appState.value.uncollectedMessages))\n    {\n        appState.value.uncollectedMessages[msg.i] = [];\n    }\n    appState.value.uncollectedMessages[msg.i].push(msg.id);\n});\n\nfunction forgetMsg(msg:Message)\n{\n    appState.value.uncollectedMessages[msg.i] = appState.value.uncollectedMessages[msg.i].filter(m=>m!=msg.id);\n}\nfunction collectMsg(msg:Message)\n{\n    forgetMsg(msg);\n    appState.value.collectedMessages.push(msg.id);\n}\nfunction finishRound()\n{\n    progress.time += 1;\n    // appState.value.uncollectedMessages = {};\n    // appState.value.collectedMessages = appState.value.collectedMessages.filter(msg=>progress.time-msg.t<=1);\n    processPushTask(appState.value.readyToPushMessages);\n    appState.value.readyToPushMessages = {};\n}\nsubscribe('addedMessage', (msg:Message)=>startGenerateMessage(msg));\nsetInterval(() => {\n    processGenerateQueue();\n}, 1000);\nsetInterval(() => {\n    windowWidth.value = window.innerWidth;\n}, 1);\nconst windowWidth = ref(0);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(GameCanvas, {\n      \"app-state\": appState.value,\n      ref: \"canvas\"\n    }, null, 8, [\"app-state\"]),\n    _createVNode(_unref(NDrawer), {\n      class: \"user-editor-container\",\n      show: showUserEditor.value,\n      \"onUpdate:show\": _cache[2] || (_cache[2] = ($event: any) => ((showUserEditor).value = $event)),\n      width: windowWidth.value>500?500:windowWidth.value\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NDrawerContent), { \"native-scrollbar\": false }, {\n          header: _withCtx(() => [\n            _createVNode(_unref(NPageHeader), {\n              subtitle: \"用户分析\",\n              onBack: _cache[0] || (_cache[0] = ($event: any) => {appState.value.editingUser=-1;showUserEditor.value=false})\n            }),\n            _createElementVNode(\"h1\", null, \"#\" + _toDisplayString(_unref(getUserName)(appState.value.editingUser)), 1)\n          ]),\n          default: _withCtx(() => [\n            _createVNode(_unref(NTabs), {\n              class: \"user-editor\",\n              type: \"segment\",\n              animated: \"\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_unref(NTabPane), {\n                  name: \"new\",\n                  tab: \"最新发言\"\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList((appState.value.uncollectedMessages[appState.value.editingUser]), (msgId) => {\n                      return (_openBlock(), _createBlock(MessageCard, {\n                        msg: _unref(progress).messages[msgId],\n                        key: msgId\n                      }, {\n                        action: _withCtx(() => [\n                          _createVNode(_unref(NFlex), { justify: \"space-between\" }, {\n                            default: _withCtx(() => [\n                              _createVNode(_unref(NButton), {\n                                onClick: ($event: any) => (collectMsg(_unref(progress).messages[msgId]))\n                              }, {\n                                default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                                  _createTextVNode(\"收集\", -1)\n                                ]))]),\n                                _: 1\n                              }, 8, [\"onClick\"]),\n                              _createVNode(_unref(NButton), {\n                                onClick: ($event: any) => (forgetMsg(_unref(progress).messages[msgId]))\n                              }, {\n                                default: _withCtx(() => [...(_cache[6] || (_cache[6] = [\n                                  _createTextVNode(\"忽略\", -1)\n                                ]))]),\n                                _: 1\n                              }, 8, [\"onClick\"])\n                            ]),\n                            _: 2\n                          }, 1024)\n                        ]),\n                        _: 2\n                      }, 1032, [\"msg\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_unref(NTabPane), {\n                  name: \"history\",\n                  tab: \"历史发言\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(MessageList, {\n                      source: getUserMessages(appState.value.editingUser),\n                      select: false\n                    }, null, 8, [\"source\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_unref(NTabPane), {\n                  name: \"push-list\",\n                  tab: \"本次推送\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(MessageList, {\n                      source: getUserPushableMessages(appState.value.editingUser),\n                      select: true,\n                      modelValue: appState.value.readyToPushMessages[appState.value.editingUser],\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((appState.value.readyToPushMessages[appState.value.editingUser]) = $event))\n                    }, null, 8, [\"source\", \"modelValue\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"show\", \"width\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_unref(NButton), {\n        round: \"\",\n        type: \"primary\",\n        size: \"large\",\n        onClick: _cache[3] || (_cache[3] = ($event: any) => (collectedMessagesModal.value=true))\n      }, {\n        default: _withCtx(() => [...(_cache[7] || (_cache[7] = [\n          _createTextVNode(\"已收集消息\", -1)\n        ]))]),\n        _: 1\n      }),\n      _createVNode(_unref(NButton), {\n        round: \"\",\n        type: \"primary\",\n        size: \"large\",\n        onClick: finishRound\n      }, {\n        default: _withCtx(() => [...(_cache[8] || (_cache[8] = [\n          _createTextVNode(\"结束回合\", -1)\n        ]))]),\n        _: 1\n      })\n    ]),\n    _createVNode(_unref(NModal), {\n      show: collectedMessagesModal.value,\n      \"onUpdate:show\": _cache[4] || (_cache[4] = ($event: any) => ((collectedMessagesModal).value = $event))\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NCard), {\n          style: {\"width\":\"600px\"},\n          title: \"已收集消息\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(MessageList, {\n              source: appState.value.collectedMessages.map(mid=>_unref(progress).messages[mid]),\n              select: false\n            }, null, 8, [\"source\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"show\"])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { onMounted, Ref, ref } from 'vue';\nimport GameCanvas from './components/GameCanvas.vue';\nimport MessageCard from './components/MessageCard.vue';\nimport MessageList from './components/MessageList.vue';\nimport { rSet, createUser, Message, progress, createMessage, processPushTask, setProgress } from './game';\nimport { subscribe } from './event';\nimport { NPageHeader, NTabs, NTabPane, NDrawer, NDrawerContent, NButton, NModal, NCard, NFlex } from 'naive-ui';\nimport { getUserName, processGenerateQueue } from './text';\nimport { startGenerateMessage } from './text';\n\nonMounted(()=>{\n    const progressSource = localStorage.getItem('progress');\n    if (progressSource != null)\n    {\n        setProgress(JSON.parse(progressSource));\n    }\n    const appstateSource = localStorage.getItem('appstate');\n    if (appstateSource != null)\n    {\n        appState.value = JSON.parse(appstateSource);\n    }\n    else\n    {\n        for(let i=0;i<10;i++)\n        {\n            createUser();\n            for(let j=0;j<i;j++){\n                const v = Math.floor(Math.random()*3)-1;\n                rSet(i,j,v);\n                if (Math.abs(v)>0.5)\n                {\n                    if (Math.random()>0.5)\n                    {\n                        createMessage(i,j,v);\n                    }\n                    else\n                    {\n                        createMessage(j,i,v);\n                    }\n                }\n            }\n        }\n    }\n    window.addEventListener('beforeunload', ()=>{\n        localStorage.setItem('appstate', JSON.stringify(appState.value))\n        localStorage.setItem('progress', JSON.stringify(progress));\n    });\n});\n\nexport interface AppState {\n        mode: \"user-edit\" | \"broadcast\";\n        editingUser: number;\n        uncollectedMessages: Record<number,Array<number>>;\n        collectedMessages: Array<number>;\n        readyToPushMessages: Record<number,Array<number>>;\n}\n\nconst appState:Ref<AppState> = ref({\n    mode:'user-edit',\n    editingUser:-1,\n    uncollectedMessages:{},\n    collectedMessages:[],\n    readyToPushMessages:{}\n});\n\nconst showUserEditor = ref(false);\nconst collectedMessagesModal = ref(false);\n\nconst messages = ref(progress.messages);\nfunction getUserMessages(author:number)\n{\n    return messages.value.filter(m=>m.i==author);\n}\nfunction getUserPushableMessages(user:number)\n{\n    return appState.value.collectedMessages.map(mid=>progress.messages[mid]).filter(m=>m.i!=user&&(progress.userMemory[user]==undefined||progress.userMemory[user].includes(m.id)))\n}\n\nsubscribe('userPressed', (id)=>\n{\n    if (appState.value.mode==\"user-edit\")\n    {\n        if (!(id in appState.value.readyToPushMessages)) {appState.value.readyToPushMessages[id] = []}\n        showUserEditor.value = true;\n        appState.value.editingUser = id;\n    }\n})\n\nsubscribe('addedMessage', (msg:Message)=>{\n    if (!(msg.i in appState.value.uncollectedMessages))\n    {\n        appState.value.uncollectedMessages[msg.i] = [];\n    }\n    appState.value.uncollectedMessages[msg.i].push(msg.id);\n});\n\nfunction forgetMsg(msg:Message)\n{\n    appState.value.uncollectedMessages[msg.i] = appState.value.uncollectedMessages[msg.i].filter(m=>m!=msg.id);\n}\nfunction collectMsg(msg:Message)\n{\n    forgetMsg(msg);\n    appState.value.collectedMessages.push(msg.id);\n}\nfunction finishRound()\n{\n    progress.time += 1;\n    // appState.value.uncollectedMessages = {};\n    // appState.value.collectedMessages = appState.value.collectedMessages.filter(msg=>progress.time-msg.t<=1);\n    processPushTask(appState.value.readyToPushMessages);\n    appState.value.readyToPushMessages = {};\n}\nsubscribe('addedMessage', (msg:Message)=>startGenerateMessage(msg));\nsetInterval(() => {\n    processGenerateQueue();\n}, 1000);\nsetInterval(() => {\n    windowWidth.value = window.innerWidth;\n}, 1);\nconst windowWidth = ref(0);\n</script>\n\n<template>\n<div class=\"app\">\n    <GameCanvas :app-state=\"appState\" ref=\"canvas\"/>\n    <n-drawer class=\"user-editor-container\" v-model:show=\"showUserEditor\" :width=\"windowWidth>500?500:windowWidth\">\n        <n-drawer-content :native-scrollbar=\"false\">\n            <template #header>\n                <NPageHeader subtitle=\"用户分析\" @back=\"appState.editingUser=-1;showUserEditor=false\"></NPageHeader>\n                <h1>#{{ getUserName(appState.editingUser) }}</h1>\n            </template>\n            <n-tabs class=\"user-editor\" type=\"segment\" animated>\n                <n-tab-pane name=\"new\" tab=\"最新发言\">\n                    <MessageCard :msg=\"progress.messages[msgId]\" v-for=\"msgId in (appState.uncollectedMessages[appState.editingUser])\" :key=\"msgId\">\n                        <template #action>\n                            <n-flex justify=\"space-between\">\n                                <n-button @click=\"collectMsg(progress.messages[msgId])\">收集</n-button>\n                                <n-button @click=\"forgetMsg(progress.messages[msgId])\">忽略</n-button>\n                            </n-flex>\n                        </template>\n                    </MessageCard>\n                </n-tab-pane>\n                <n-tab-pane name=\"history\" tab=\"历史发言\">\n                    <MessageList :source=\"getUserMessages(appState.editingUser)\" :select=\"false\"/>\n                </n-tab-pane>\n                <n-tab-pane name=\"push-list\" tab=\"本次推送\">\n                    <!-- <n-flex justify=\"center\">\n                        <n-button @click=\"selectMessageModal=true\" :disabled=\"getUserPushableMessages(appState.editingUser).length==0\">修改</n-button>\n                    </n-flex>\n                    <MessageCard :msg=\"progress.messages[msgId]\" v-for=\"msgId in (appState.readyToPushMessages[appState.editingUser])\" :key=\"msgId\"/> -->\n                    <MessageList :source=\"getUserPushableMessages(appState.editingUser)\" :select=\"true\" v-model=\"appState.readyToPushMessages[appState.editingUser]\"/>\n                </n-tab-pane>\n            </n-tabs>\n        </n-drawer-content>\n    </n-drawer>\n    <div class=\"corner-buttons\">\n        <n-button round type=\"primary\" size=\"large\" @click=\"collectedMessagesModal=true\">已收集消息</n-button>\n        <n-button round type=\"primary\" size=\"large\" @click=\"finishRound\">结束回合</n-button>\n    </div>\n    <n-modal v-model:show=\"collectedMessagesModal\">\n    <n-card style=\"width: 600px\" title=\"已收集消息\">\n    <MessageList :source=\"appState.collectedMessages.map(mid=>progress.messages[mid])\" :select=\"false\"/>\n    </n-card>\n    </n-modal>\n</div>\n</template>\n\n<style>\nbody\n{\n    margin: 0;\n    overflow: hidden;\n}\n\n.app\n{\n    display: flex;\n    width: 100vw;\n    height: 100vh;\n}\n.corner-buttons\n{\n    position: absolute;\n    right: 20px;\n    bottom: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n@media (max-width: 500px) {\n    .user-editor-container {\n        width: 400px;\n    }\n}\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=31e3cd29&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_project\"] = self[\"webpackChunkvue_project\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(9542); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["events","subscribe","event","action","key","Object","keys","length","emit","args","values","forEach","progress","userGraph","userSize","userMemory","messages","userCount","time","setProgress","newProgress","i","msg","rGet","a","b","k","toString","rSet","v","balance","po","px","ox","newPx","newPo","changeAttitude","user","target","value","d","processPushTask","task","userId","parseInt","diffrence","msgId","dpx","dpo","pushMsgToUser","j","other","diff","Math","abs","createMessage","id","t","push","console","log","getRepulsion","rij","repulsion","innerRepulsion","outterRepulsion","o","createUser","OpenAI","apiKey","baseURL","dangerouslyAllowBrowser","delay","ms","Promise","resolve","setTimeout","async","chat","text","userTexts","messageTexts","textSource","localStorage","getItem","getUserText","name","prompt","getUserName","getFullUserPrompt","historyContainer","filter","m","map","minimumVersion","join","JSON","parse","traits","randomPick","arr","floor","random","getRelationshipDiffDescribe","relationship","getMessageContentPrompt","getMessageTitlePrompt","content","getMessageMinimumVersionPrompt","generateQueue","generating","processGenerateQueue","title","setItem","stringify","shift","startGenerateMessage","_defineComponent","__name","props","x","y","selected","type","Boolean","focused","py","ps","badgeDefault","badgeInfo","setup","__props","onClick","_ctx","_cache","_openBlock","_createElementBlock","class","style","_normalizeStyle","left","top","outline","_createVNode","_unref","NBadge","offset","default","_withCtx","_createElementVNode","_toDisplayString","_","__exports__","idealDist","delta","stepLength","appState","state","ref","users","selectedUsers","focusedUser","s","mode","includes","multiSelecting","multiSelectStartX","multiSelectStartY","mouseX","mouseY","touchStartX","touchStartY","touchStartCanvasX","touchStartCanvasY","touchesDistance","onTouchStart","e","preventDefault","touches","touch","clientX","clientY","onTouchEnd","onTouchMove","x1","y1","x2","y2","sqrt","changeScale","onMousemove","buttons","movementX","movementY","onMousedown","bgDownButtons","linesCanvas","linesCtx","onMouseup","ux","uy","newSelecteState","shiftKey","mx","my","s1","mx1","my1","s2","mx2","my2","onWheel","wheelDelta","getForce","ax","ay","bx","by","idealDistScale","strengthScale","dx","dy","ls","l","tl","f","physicsProcess","vx","vy","redraw","width","window","innerWidth","height","innerHeight","entries","splited","split","fromId","toId","from","to","r","padStart","strokeStyle","beginPath","moveTo","lineTo","stroke","w","h","rect","fillStyle","fill","onMounted","document","getElementById","getContext","setInterval","addEventListener","ctrlKey","onTouchstart","onTouchend","onTouchmove","_Fragment","_renderList","_createBlock","CanvasUser","uncollectedMessages","readyToPushMessages","_hoisted_1","_hoisted_2","intervalId","messageText","clearInterval","NCard","hoverable","header","NSkeleton","round","_renderSlot","$slots","repeat","_mergeModels","source","select","emits","checkedRowKeys","_useModel","createColumns","columns","multiple","NDataTable","$event","data","pagination","bordered","striped","progressSource","appstateSource","editingUser","collectedMessages","showUserEditor","collectedMessagesModal","getUserMessages","author","getUserPushableMessages","mid","undefined","forgetMsg","collectMsg","finishRound","windowWidth","GameCanvas","NDrawer","show","NDrawerContent","NPageHeader","subtitle","onBack","NTabs","animated","NTabPane","tab","MessageCard","NFlex","justify","NButton","_createTextVNode","MessageList","modelValue","size","NModal","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","splice","n","getter","__esModule","definition","defineProperty","enumerable","get","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}