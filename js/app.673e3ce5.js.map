{"version":3,"file":"js/app.673e3ce5.js","mappings":"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","sources":["webpack://vue-project/./src/event.ts","webpack://vue-project/./src/llm.ts","webpack://vue-project/./src/text.ts","webpack://vue-project/./src/game.ts","webpack://vue-project/./src/components/CanvasUser.vue?4afb","webpack://vue-project/./src/components/CanvasUser.vue","webpack://vue-project/./src/components/CanvasUser.vue?7b96","webpack://vue-project/./src/components/GameCanvas.vue","webpack://vue-project/./src/components/GameCanvas.vue?d007","webpack://vue-project/./src/components/GameCanvas.vue?cf9f","webpack://vue-project/./src/components/MessageCard.vue?0f40","webpack://vue-project/./src/components/MessageCard.vue","webpack://vue-project/./src/components/MessageCard.vue?3d29","webpack://vue-project/./src/App.vue?2a5e","webpack://vue-project/./src/App.vue","webpack://vue-project/./src/App.vue?7ccd","webpack://vue-project/./src/AppContainer.vue","webpack://vue-project/./src/AppContainer.vue?759d","webpack://vue-project/./src/main.ts","webpack://vue-project/webpack/bootstrap","webpack://vue-project/webpack/runtime/chunk loaded","webpack://vue-project/webpack/runtime/compat get default export","webpack://vue-project/webpack/runtime/define property getters","webpack://vue-project/webpack/runtime/global","webpack://vue-project/webpack/runtime/hasOwnProperty shorthand","webpack://vue-project/webpack/runtime/jsonp chunk loading","webpack://vue-project/webpack/startup"],"sourcesContent":["const events:Record<string, Record<string, (...params:any[])=>void>> = {}\nexport function subscribe(event:string, action:(...params:any[])=>void):number\n{\n    if (!(event in events))\n    {\n        events[event] = {}\n    }\n    const key = Object.keys(events[event]).length-1;\n    events[event][key] = action;\n    return key;\n}\nexport function desubscribe(event:string, key:number):void\n{\n    if (event in events)\n    {\n        delete events[event][key];\n    }\n}\nexport function emit(event:string, ...args:any[]):void\n{\n    if (event in events)\n    {\n        Object.values(events[event]).forEach(action => {\n            action(...args);\n        });\n    }\n}","import OpenAI from \"openai\"\n\nconst client = new OpenAI({\n    apiKey: \"sk-uFDUPAriuBg6l84rhrFxcRect2V0gpH59KVXj8dxG6wblr5p\",\n    baseURL: \"http://localhost:8080/llmapi\",\n    dangerouslyAllowBrowser: true\n})\n\nfunction delay(ms:number) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport async function chat(msg:string)\n{\n    await delay(100);\n    return msg;\n    for (let attempt = 1; attempt <= 2; attempt++) {\n        try {\n            const completion = await client.chat.completions.create({\n                model: \"kimi-k2-turbo-preview\",\n                messages: [\n                    {\"role\": \"system\", \"content\": msg},\n                ],\n                temperature: 0.6,\n            })\n            return completion.choices[0].message.content??\"\";\n        }\n        catch (e)\n        {\n            await delay(5000);\n            console.error(e);\n        }\n    }\n    return \"\";\n}","import { emit } from \"./event\"\nimport { Message, progress } from \"./game\"\nimport { chat } from \"./llm\"\n\nexport interface UserText {\n    name:string,\n    prompt:string\n}\nexport interface MessageText {\n    content: string,\n    time: string,\n    minimumVersion: string\n}\n\nexport let text:{\n    userTexts:Array<UserText>,\n    messageTexts:Array<MessageText>,\n    generateQueue:Array<number>,\n    flowLabel:Array<string>\n}={\n    userTexts: [],\n    messageTexts: [],\n    generateQueue: [],\n    flowLabel: ['‰∏ªÊé®ÈÄÅÊµÅ']\n}\n\nexport function loadText()\n{\n    const textSource = localStorage.getItem('text');\n    if (textSource != null)\n    {\n        text = JSON.parse(textSource);\n    }\n}\n\nexport function resetText()\n{\n    text = {\n        userTexts: [],\n        messageTexts: [],\n        generateQueue: [],\n        flowLabel: ['‰∏ªÊé®ÈÄÅÊµÅ']\n    }\n}\n\nfunction getUserText(id:number):UserText\n{\n    if (id >= 0 && id < text.userTexts.length) return text.userTexts[id];\n    return {\n        name: '',\n        prompt: ''\n    }\n}\n\nexport function getUserName(id:number):string\n{\n    if (id<0 || id>=text.userTexts.length) return id.toString();\n    return text.userTexts[id].name\n}\n\nfunction getFullUserPrompt(id:number)\n{\n    // const basicPrompt = getUserText(id).prompt;\n    let historyContainer = \"\";\n    if (id in progress.userMemory && progress.userMemory[id].length>0)\n    {\n        historyContainer = `‰Ω†ÈúÄË¶ÅÂèÇËÄÉÁöÑ‰ø°ÊÅØÔºö[${progress.userMemory[id].filter(m=>m<text.messageTexts.length).map(m=>text.messageTexts[m].minimumVersion).join()}]„ÄÇ`;\n    }\n    return `${historyContainer}`;\n}\n\nconst traits:Array<string> = [\"Á•ûÁªèË¥®\",\"ÂπΩÈªò\",\"‰∏•ËÇÉ\"];\n\nfunction randomPick(arr:Array<string>):string\n{\n    return arr[Math.floor(Math.random()*traits.length)];\n}\n\nfunction getRelationshipDiffDescribe(relationship:number,other:string):string\n{\n    if (relationship > 0.5) return `ÂØπ${other}ÁöÑËÆ§Âêå`;\n    if (relationship < 0.5) return `ÂèçÂØπ${other}`;\n    return `ÂØπÁ§æ‰∫§Â™í‰ΩìÂπ≥Âè∞Êé®ÈÄÅÊú∫Âà∂ÁöÑÂèçÊÑü`;\n}\nfunction getRelationshipDescribe(relationship:number):string\n{\n    if (relationship > 0.5) return \"ËÆ§Âêå\";\n    if (relationship < 0.5) return \"ÊéíÊñ•\";\n    return \"‰∏çÊÑüÂÖ¥Ë∂£\";\n}\n\nfunction getMessageContentPrompt(msg:Message):string\n{\n    return `ÊâÆÊºî‰∏ÄÂêçÁ§æ‰∫§Â™í‰ΩìÁî®Êà∑ËôöÊûÑË¥¥Êñá„ÄÇ‰Ω†ÁöÑ‰∏™ÊÄßÔºö${randomPick(traits)}„ÄÇ${getFullUserPrompt(msg.i)}Ë¶ÅÊ±Ç1ÔºöÈïøÂ∫¶1Âè•ËØù„ÄÇË¶ÅÊ±Ç2ÔºöÁ´ôÂú®${getUserText(msg.i).prompt}ÁöÑËßÜËßíË°®Ëææ‰Ω†${getRelationshipDiffDescribe(msg.v,getUserText(msg.j).prompt)}„ÄÇ`;\n}\nfunction getMessageMinimumVersionPrompt(content:string):string\n{\n    return `[${content}]‰∏ÄÂè•ËØùÊÄªÁªìËøôÁØáÁ§æÂ™íÂçöÊñá„ÄÇ`;\n}\n\nlet generating = false;\n\nexport async function processGenerateQueue()\n{\n    if (generating || text.generateQueue == undefined || text.generateQueue.length==0) return;\n    const msg = text.generateQueue[0];\n    if (msg==undefined) return;\n    console.log(\"ÁîüÊàêÊñ∞Ê∂àÊÅØ\");\n    generating = true;\n    if (text.messageTexts.length - 1 < msg)\n    {\n        text.messageTexts.push({\n            content: \"\",\n            minimumVersion: \"\",\n            time:\"\"\n        });\n    }\n    // const content = await chat(getMessageContentPrompt(progress.messages[msg]));\n    // const title = await chat(getMessageTitlePrompt(content));\n    const msgObj = progress.messages[msg];\n    if(msgObj!=undefined)\n    {\n        let describe = '‰∏çÊÑüÂÖ¥Ë∂£'\n        if (msgObj.v>0.1) describe='ËÆ§Âêå';\n        if (msgObj.v<-0.1) describe='ÂèçÂØπ';\n        const content = `${msgObj.i==msgObj.a?'Êàë':getUserName(msgObj.i)}ÂØπ${msgObj.j==msgObj.a?'ÊàëËá™Â∑±':getUserName(msgObj.j)}${describe}„ÄÇ`;\n        const minimumVersion = await chat(getMessageMinimumVersionPrompt(content));\n        text.messageTexts[msg] = {content, minimumVersion, time:getTimeText(msgObj.t)}\n        emit(\"generatedMessage\", msg, content);\n        text.generateQueue.shift();\n    }\n    generating = false;\n    console.log(\"Ê∂àÊÅØÁîüÊàêÂÆåÊØï\");\n}\n\nexport async function startGenerateMessage(msg:Message)\n{\n    if (text.generateQueue != undefined && (msg.id>=text.messageTexts.length || text.messageTexts[msg.id].content == ''))\n    {\n        text.generateQueue.push(msg.id);\n    }\n}\n\nconst weekdays = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];\n\nexport function getTimeText(time:number)\n{\n    const day = time + 100;\n    const year = ((day / 365) + 22).toFixed();\n    const month = (day % 365 / 12).toFixed();\n    const weekday = day % 7;\n    return (Math.random()*12).toFixed()+':'+(Math.random()*60).toFixed()+' '+(Math.random()>0.5?'P':'A')+'M'+' ‚Ä¢ '+`${weekdays[weekday]} ${month}, ${year}`\n}\n\nexport function getResponse(user:number, msg:Message, dInstability:number)\n{\n    const d = -dInstability;\n    if (d>0.2)\n    {\n        return \"üëç\";\n    }\n    else if (d>0.4)\n    {\n        return \"ü§£\";\n    }\n    else if (d<-0.2)\n    {\n        return \"üò°\";\n    }\n    else if (d<-0.4)\n    {\n        return \"üòÖ\";\n    }\n    else\n    {\n        return \"üëÄ\";\n    }\n}","import { emit } from \"./event\";\nimport { getResponse, getUserName } from \"./text\";\n\nexport interface Message {id:number, a:number, i:number, j:number, v:number, t:number}\n\nexport interface Progress{\n  userMemory: Record<number, Array<number>>;\n  userGraph: Record<string, number>;\n  messages: Array<Message>;\n  userCount: number;\n  userType: Array<number>;\n  userAttention: Array<Record<number,number>>;\n  userFlowTags: Array<Array<number>>;\n  time: number;\n  score: number;\n}\n\nlet userGraphChange:Record<string, number>={};\n\nexport let debugMode = false;\n\nexport let progress:Progress = {\n  userMemory: {},\n  userGraph: {},\n  messages: [],\n  userType: [],\n  userAttention: [],\n  userCount: 0,\n  userFlowTags: [],\n  time: 0,\n  score: 1000\n}\n\nexport function resetProgress()\n{\n  progress = {\n    userMemory: {},\n    userGraph: {},\n    messages: [],\n    userType: [],\n    userAttention: [],\n    userCount: 0,\n    userFlowTags: [],\n    time: 0,\n    score: 1000\n  };\n  emit(\"resetProgress\");\n}\n\nexport function loadProgress()\n{\n  resetProgress();\n  const progressSource = localStorage.getItem('progress');\n  if (progressSource != null)\n  {\n    setProgress(JSON.parse(progressSource));  \n  }\n}\n\nfunction setProgress(newProgress:Progress)\n{\n  resetProgress();\n  progress = newProgress;\n  for(let i=0;i<progress.userCount;i++)\n  {\n    emit(\"createdUser\",i);\n  }\n  progress.messages.forEach(msg => {\n    emit('addedMessage', msg);\n  });\n}\n\nexport function rGet(a:number,b:number):number\n{\n  return rGetIn(a,b,progress.userGraph);\n}\nfunction rGetIn(a:number,b:number,G:Record<string,number>):number\n{\n  if (a>b) return rGet(b,a);\n  const k = a.toString(32)+'_'+b.toString(32);\n  if (!(k in G)) {\n    return 0;\n  }\n  return G[k];\n}\n\nexport function rSet(a:number,b:number,v:number)\n{\n  rSetIn(a,b,v,progress.userGraph);\n}\nfunction rSetIn(a:number,b:number,v:number,G:Record<string,number>)\n{\n  if (a>b)\n  {\n    rSetIn(b,a,v,G);\n    return;\n  }\n  const k = a.toString(32)+'_'+b.toString(32);\n  G[k] = v;\n}\n\nexport function createMessage(a:number, i:number, j:number, v:number)\n{\n  const msg = {id:progress.messages.length,a,i,j,v,t:progress.time};\n  progress.messages.push(msg);\n  emit('addedMessage', msg);\n  return msg;\n}\n\nfunction changeAttitude(a:number, b:number, d:number):number\n{\n  const value=rGetIn(a,b,userGraphChange)+d;\n  rSetIn(a,b,value,userGraphChange);\n  return d;\n}\n\nfunction updateUser(user:number,delta:number)\n{\n  const oxPairs:Array<string> = [];\n  let maxIPD_o = -1;\n  let maxIPD_x = -1;\n  let maxIPD = 0;\n  for(let o=0;o<progress.userCount;o++)\n  {\n    for(let x=o;x<progress.userCount;x++)\n    {\n      if (oxPairs.includes(`${o}_${x}`))\n      {\n        continue;\n      }\n      const IPD = instabilityPartialD(o,x);\n      // if (o!=user) IPD *= (1-progress.userLearnRate[user]);\n      // if (x==user) IPD *= 0.5;\n      if (Math.abs(IPD) > Math.abs(maxIPD))\n      {\n        maxIPD = IPD;\n        maxIPD_o = o;\n        maxIPD_x = x;\n      }\n    }\n  }\n  if(maxIPD_o>=0)\n  {\n    const dAttitude = -1/maxIPD;\n    changeAttitude(maxIPD_o,maxIPD_x,delta*dAttitude);\n    oxPairs.push(`${maxIPD_o}_${maxIPD_x}`);\n  }\n}\n\nfunction applyChange()\n{\n  for(const k in userGraphChange)\n  {\n    const v = userGraphChange[k];\n    progress.userGraph[k] += v;\n  }\n  userGraphChange = {};\n}\n\nexport function instability(p:number,log:boolean=false)\n{\n  let s = 0;\n  const Gpp = rGet(p,p);\n  for(let x=0;x<progress.userCount;x++)\n  {\n    const Gpx = rGet(p,x);\n    for(let o=0;o<progress.userCount;o++)\n    {\n      const Gpo = rGet(p,o);\n      const Gox = rGet(o,x);\n      const i = Gpx*Gpo*Gox+Gpp;\n      if(log)\n      {\n        console.log(`Gpo=${Gpo}`)\n        console.log(`Gox=${Gox}`)\n        console.log(`Gpx=${Gpx}`)\n        console.log(`i(p=${p},o=${o},x=${x})=${i}`)\n      }\n      s-=Math.min(i,0);\n    }\n  }\n  return s;\n}\n\n// function instabilityPartialD(p:number,o:number)\n// {\n//   const dGpo = 0.01;\n//   const pdir = instabilitydGpo(p,o,dGpo);\n//   const ndir = instabilitydGpo(p,o,-dGpo);\n//   return (pdir + ndir) * 0.5;\n// }\n\nfunction instabilityPartialD(p:number,o:number)\n{\n  let d = 0;\n  const Gpp = rGet(p,p);\n  const Gpo = rGet(p,o);\n  // if (Gpo == 0) return 0;\n  for(let x=0;x<progress.userCount;x++)\n  {\n    const Gox = rGet(o,x);\n    const Gpx = rGet(p,x);\n    if (Gpo*Gox*Gpx+Gpp>=0) continue;\n    if (x==o)\n    {\n      if (p==x)\n      {\n        d-=3*Gpo*Gpo+1;\n      }\n      else\n      {\n        d-=2*Gox*Gpo;\n      }\n    }\n    else\n    {\n      if (p==o)\n      {\n        //GpoGoxGpx-Gpo^3\n        d-=Gox*Gpx+1\n      }\n      else\n      {\n        d-=Gox*Gpx;\n      }\n    }\n    // if (Gox==0) continue;\n    // const Gpx = rGet(p,x);\n    // d+=Gox*(Gpo*Gox-Gpx);\n    // d-=Gpx*Gox-Gpo;\n  }\n  // const GooSub = rGet(o,o)-1;\n  // d-=Gpo*GooSub*GooSub;\n  return d;\n}\n\nexport async function pushMsgToUser(msg:Message, user:number)\n{\n  if (user==msg.a) return;\n  if(!(user in progress.userMemory))\n  {\n    progress.userMemory[user] = [];\n  }\n  progress.userMemory[user].push(msg.id);\n  const oldGij = rGet(msg.i,msg.j);\n  const oldInstability = instability(user);\n  rSet(msg.i,msg.j,msg.v);\n  const newInstability = instability(user);\n  rSet(msg.i,msg.j,oldGij);\n  const d = newInstability - oldInstability;\n  console.log(d);\n  const views = Math.abs(d);\n  const likes = d>0?d:(Math.random()*Math.abs(d)*0.5);\n  emit('viewedMessage', views);\n  emit('likedMessage', likes);\n  if (views > 0.1)\n  {\n    emit('messageResponsed',user,getResponse(user, msg, d))\n  }\n  emit('messageGainedScore',Math.floor(views+likes));\n}\n\nexport function updateUsers(delta:number)\n{\n  for(let i=0;i<progress.userCount;i++)\n  {\n    if(progress.userType[i]!=0) continue;\n    updateUser(i,delta);\n  }\n  applyChange();\n}\n\nexport function getRepulsion(i:number, j:number):boolean\n{\n    const rij=(a:number,b:number)=>rGet(a,b)<0.5;\n    let repulsion = rij(i,j);\n    if (!repulsion)\n    {\n        let innerRepulsion = false;\n        for(let d=1;d<j-i&&!innerRepulsion;d++)\n        {\n            innerRepulsion = !rij(i,i+d)&&!rij(i+d,j);\n        }\n        let outterRepulsion = false;\n        for(let d=1;d<i-j+progress.userCount&&!outterRepulsion;d++)\n        {\n            let o = j+d;\n            if (o >= progress.userCount)\n            {\n                o -= progress.userCount;\n            }\n            outterRepulsion = !rij(o,i)&&!rij(j,o);\n        }\n        repulsion = innerRepulsion && outterRepulsion;\n    }\n    return repulsion;\n}\n\nexport function createUser(type:number,learnRate:number=0.8)\n{\n    const id = progress.userCount;\n    progress.userCount += 1;\n    progress.userType.push(type);\n    progress.userAttention.push({});\n    emit(\"createdUser\",id);\n}\n\nexport function removeUser()\n{\n  progress.userCount -= 1;\n  progress.userType.pop();\n  emit(\"removedUser\");\n}\n\nexport default {}\n\nexport function executeCommand(cmd:string[])\n{\n  if (cmd[0]=='debug')\n  {\n    debugMode = !debugMode;\n  }\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"username\" }\n\nimport { emit } from '@/event';\nimport { onMounted, ref } from 'vue'\nimport { NBadge } from 'naive-ui';\nimport { getUserName } from '@/text';\nimport { instability, progress, rGet } from '@/game';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CanvasUser',\n  props: {\n    id: {},\n    x: {},\n    y: {},\n    selected: { type: Boolean },\n    focused: { type: Boolean },\n    px: {},\n    py: {},\n    ps: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\nfunction onClick()\n{\n  emit('userPressed', props.id);\n}\nconst type=progress.userType[props.id];\nconst userInstability = ref(0);\nconst radius = ref(40);\nonMounted(()=>{\n  // console.log('mounted');\n  setInterval(()=>{\n    userInstability.value = instability(props.id,false);\n    radius.value = 40 + 10 * rGet(props.id, props.id);\n  },10)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"canvas-user\",\n    style: _normalizeStyle({left: (__props.px + __props.x) * __props.ps - 20 + 'px', top: (__props.py + __props.y) * __props.ps - 20 + 'px', outline: (__props.selected?'2px':'1px') + ' solid '+ (__props.focused?'#ff0':'#000'), 'border-radius': ((_unref(type)==0)?50:0)+'%', width:radius.value+'px', height:radius.value+'px'}),\n    onClick: onClick\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, _toDisplayString(_unref(getUserName)(__props.id)) + \",\" + _toDisplayString(userInstability.value.toFixed(2)), 1)\n  ], 4))\n}\n}\n\n})","<template>\n  <div class=\"canvas-user\" :style=\"{left: (px + x) * ps - 20 + 'px', top: (py + y) * ps - 20 + 'px', outline: (selected?'2px':'1px') + ' solid '+ (focused?'#ff0':'#000'), 'border-radius': ((type==0)?50:0)+'%', width:radius+'px', height:radius+'px'}\"\n  @click=\"onClick\"\n  >\n    <!-- <div class=\"username\"> {{ getUserName(id) }} </div> -->\n    <div class=\"username\"> {{ getUserName(id) }},{{ userInstability.toFixed(2) }} </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { emit } from '@/event';\nimport { defineProps, onMounted, ref } from 'vue'\nimport { NBadge } from 'naive-ui';\nimport { getUserName } from '@/text';\nimport { instability, progress, rGet } from '@/game';\nconst props = defineProps<{\n  id: number,\n  x: number,\n  y: number,\n  selected: boolean,\n  focused: boolean,\n  px: number,\n  py: number,\n  ps: number\n}>();\nfunction onClick()\n{\n  emit('userPressed', props.id);\n}\nconst type=progress.userType[props.id];\nconst userInstability = ref(0);\nconst radius = ref(40);\nonMounted(()=>{\n  // console.log('mounted');\n  setInterval(()=>{\n    userInstability.value = instability(props.id,false);\n    radius.value = 40 + 10 * rGet(props.id, props.id);\n  },10)\n})\n</script>\n\n<style scoped>\n.canvas-user\n{\n  position: absolute;\n  outline: 1px solid #000;\n  background: #fff;\n  color: #000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  -webkit-user-drag: none;\n  cursor: pointer;\n}\n.username\n{\n  margin: auto;\n  font-weight: bold;\n  text-wrap-mode: nowrap;\n}\n</style>","import script from \"./CanvasUser.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CanvasUser.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CanvasUser.vue?vue&type=style&index=0&id=14fa59f4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-14fa59f4\"]])\n\nexport default __exports__","<template>\n<div class=\"canvas\"\n:style=\"{'background-size': 20*s+'px '+20*s+'px', 'background-position': x*s+'px '+y*s+'px'}\">\n    <div class=\"mouse-input-handler\" @mousedown=\"onMousedown\" @mouseup=\"onMouseup\" @mousemove=\"onMousemove\" @touchstart=\"onTouchStart\" @touchend=\"onTouchEnd\" @touchmove=\"onTouchMove\" @wheel=\"onWheel\"></div>\n    <CanvasUser v-for=\"user in state.users\" :key=\"user.id\"\n    :id=\"user.id\" :x=\"user.x\" :y=\"user.y\" :px=\"x\" :py=\"y\" :ps=\"s\" :selected=\"appState?.selectedUsers.includes(user.id)??false\" :focused=\"appState?.focusedUser==user.id\"\n    />\n    <canvas id=\"lines\"/>\n</div>\n</template>\n\n<script setup lang=\"ts\">\nimport { debugMode, getRepulsion, progress, rGet } from '../game'\nimport { defineModel, onMounted, Ref, ref } from 'vue'\nimport CanvasUser from './CanvasUser.vue'\nimport { emit, subscribe } from '../event'\nimport { AppState } from '@/App.vue';\ntype User = {\n    id: number;\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n};\nconst state:Ref<{\n    users: Array<User>\n}> = ref({\n  users: [],\n})\n\nsubscribe('resetProgress',()=>{\n    state.value = {\n        users: []\n    };\n})\n\nconst appState = defineModel<AppState>();\n\nconst x = ref(0);\nconst y = ref(0);\nconst s = ref(1);\nsubscribe('userPressed', (id)=>\n{\n    // if (appState.value?.mode == 'user-edit') return;\n    if (appState.value == undefined) return;\n    let selectedUsers = appState.value.selectedUsers;\n    if (appState.value?.mode == 'select-relationship')\n    {\n        if (selectedUsers.includes(id))\n        {\n            if (appState.value.focusedUser != id)\n            {\n                appState.value.focusedUser = id;\n            }\n            else\n            {\n                appState.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n                appState.value.focusedUser = -1;\n            }\n        }\n        else{\n            appState.value.focusedUser = id;\n            selectedUsers.push(id);\n            if (selectedUsers.length==2)\n            {\n                const i=selectedUsers[0];\n                const j=selectedUsers[1];\n                if(appState.value.focusedUser==i)\n                {\n                    emit('relationSelected',i,j);\n                }\n                else\n                {\n                    emit('relationSelected',j,i);\n                }\n                appState.value.focusedUser = -1;\n                appState.value.selectedUsers = [];\n            }\n        }\n    }\n    else\n    {\n        if (selectedUsers.includes(id))\n        {\n            appState.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n        }\n        else\n        {\n            appState.value.selectedUsers.push(id);\n        }\n    }\n})\n\nlet multiSelecting = false;\nlet multiSelectStartX = 0;\nlet multiSelectStartY = 0;\nlet mouseX = 0;\nlet mouseY = 0;\nlet touchStartX = 0;\nlet touchStartY = 0;\nlet touchStartCanvasX = 0;\nlet touchStartCanvasY = 0;\nlet touchesDistance = -1;\n\nfunction onTouchStart(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1)\n    {\n        const touch = e.touches[0];\n        touchStartX = touch.clientX;\n        touchStartY = touch.clientY;\n        touchStartCanvasX = x.value;\n        touchStartCanvasY = y.value;\n    }\n}\n\nfunction onTouchEnd(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 0)\n    {\n        touchesDistance = -1;\n    }\n}\n\nfunction onTouchMove(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1 && touchesDistance == -1)\n    {\n        const touch = e.touches[0];\n        mouseX = touch.clientX;\n        mouseY = touch.clientY;\n        x.value = mouseX - touchStartX + touchStartCanvasX;\n        y.value = mouseY - touchStartY + touchStartCanvasY;\n    }\n    else if (e.touches.length == 2)\n    {\n        const x1 = e.touches[0].clientX;\n        const y1 = e.touches[0].clientY;\n        const x2 = e.touches[1].clientX;\n        const y2 = e.touches[1].clientY;\n        const d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        if (touchesDistance>0)\n        {\n            let delta = (d - touchesDistance) * 0.01;\n            if (delta < -1)\n            {\n                delta = -1;\n            }\n            if (delta > 1)\n            {\n                delta = 1;\n            }\n            delta += 1;\n            // if (delta < 0)\n            // {\n            //     delta += 1;\n            // }\n            changeScale((x1+x2)/2, (y1+y2)/2, delta);\n        }\n        touchesDistance = d;\n    }\n}\n\nfunction onMousemove(e:any)\n{\n    if (e.buttons==4) {\n        x.value += e.movementX / s.value;\n        y.value += e.movementY / s.value;\n    }\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n    multiSelecting = appState.value?.mode==\"broadcast\" && e.buttons==1;\n}\n\nfunction onMousedown(e:any)\n{\n    if (e.buttons==1)\n    {\n        multiSelecting = appState.value?.mode==\"broadcast\";\n        multiSelectStartX=e.clientX;\n        multiSelectStartY=e.clientY;\n    }\n    bgDownButtons = e.buttons;\n}\n\nlet bgDownButtons = 0;\n\n\nfunction onMouseup(e:any)\n{\n    if (appState.value == undefined) return;\n    if (bgDownButtons == 1)\n    {\n        appState.value.selectedUsers = [];\n        appState.value.focusedUser = -1;\n    }\n    if (multiSelecting && Math.abs(mouseX - multiSelectStartX) > 10 && Math.abs(mouseY - multiSelectStartY) > 10)\n    {\n        appState.value.selectedUsers = state.value.users.filter(user=>\n        {\n            if (appState.value == undefined) return;\n            const ux = (user.x + x.value) * s.value;\n            const uy = (user.y + y.value) * s.value;\n            let newSelecteState = e.shiftKey?appState.value.selectedUsers.includes(user.id):false;\n            if (((ux > multiSelectStartX && ux < mouseX) || (ux > mouseX && ux < multiSelectStartX))\n            && ((uy > multiSelectStartY && uy < mouseY) || (uy > mouseY && uy < multiSelectStartY)))\n            {\n                newSelecteState = true;\n            }\n            return newSelecteState;\n        }).map(user=>user.id);\n    }\n    multiSelecting = false;\n}\n\nfunction changeScale(mx:number, my:number, delta:number)\n{\n\n    let s1 = s.value;\n    let mx1 = mx / s1 - x.value;\n    let my1 = my / s1 - y.value;\n    s.value *= delta;\n    let s2 = s.value;\n    let mx2 = mx / s2 - x.value;\n    let my2 = my / s2 - y.value;\n    x.value += mx2 - mx1;\n    y.value += my2 - my1;\n}\n\nfunction onWheel(e:any)\n{\n    let delta = e.wheelDelta * 0.01;\n    if (delta < 0)\n    {\n        delta += 2.0;\n    }\n    if (delta < 0 || delta > 2.0) return;\n    changeScale(e.clientX, e.clientY, delta);\n}\n\nlet linesCanvas:any;\nlet linesCtx:any;\n\nconst idealDist = 150;\nconst delta = 1/60;\nconst stepLength = 100;\nconst d = delta * stepLength;\n\nfunction getForce(ax:number, ay:number, bx:number, by:number, repulsion:boolean, idealDistScale:number, strengthScale:number) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ls = dx * dx + dy * dy;\n    const l = Math.sqrt(ls);\n    const tl = idealDist * idealDistScale;\n    const s = 15 * strengthScale;\n    let f = s * (l - tl) / ls * d;\n    if (repulsion && l >= tl)\n    {\n        f = 0;\n    }\n    return {\n        x: dx * f,\n        y: dy * f\n    }\n}\n\nonMounted(()=>{\n    linesCanvas = document.getElementById('lines');\n    linesCtx = linesCanvas.getContext(\"2d\");\n    setInterval(physicsProcess,delta*1000);\n    subscribe(\"createdUser\", (id:number)=>{\n        state.value.users.push({\n            id: id,\n            x: (id % 2) * 100,\n            y: Math.floor(id / 2) * 100,\n            vx: 0,\n            vy: 0\n        });\n    });\n    subscribe(\"removedUser\", ()=>{\n        state.value.users.pop();\n    });\n    subscribe(\"tryGetBroadcastCollectedMessageTargets\", ()=>{\n        if (appState.value == undefined) return;\n        emit('getBroadcastCollectedMessageTargets',appState.value.selectedUsers);\n        appState.value.selectedUsers = [];\n        appState.value.focusedUser = -1;\n    })\n});\n\nfunction physicsProcess()\n{\n    const users = state.value.users;\n    for (let i = 0; i < progress.userCount-1; i++) {\n        const a = users[i];\n        for (let j = i + 1; j < progress.userCount; j++) {\n            const b = users[j];\n            const repulsion = getRepulsion(i,j);\n            let f = getForce(a.x, a.y, b.x, b.y, repulsion, repulsion?1:0.5, repulsion?0.5:0.5);\n            a.vx += f.x;\n            a.vy += f.y;\n            b.vx -= f.x;\n            b.vy -= f.y;\n        }\n    }\n    Object.values(state.value.users).forEach(user=>\n        {\n            user.vx *= 1 - (0.2 * d);\n            user.vy *= 1 - (0.2 * d);\n            user.vx -= user.x * 0.01 * d;\n            user.vy -= user.y * 0.01 * d;\n            user.x += user.vx * d;\n            user.y += user.vy * d;\n        }\n    )\n    redraw();\n}\n\nfunction redraw()\n{\n    if (appState.value==undefined) return;\n    linesCanvas.width = window.innerWidth;\n    linesCanvas.height = window.innerHeight;\n    for (let fromId=0;fromId<progress.userCount;fromId++)\n    {\n        const from = state.value.users[fromId];\n        if (from==undefined) continue;\n        for (let toId=fromId+1;toId<progress.userCount;toId++){\n            const to = state.value.users[toId];\n            const rFT = rGet(fromId, toId);\n            const rTF = rGet(fromId, toId);\n            let aFT = Math.abs(rFT);\n            if (aFT > 1) aFT = 1;\n            if (aFT < 0) aFT = 0;\n            // if (aFT > 0.2) {aFT = 1} else {aFT=0}\n            const styleFT = `#${(rFT<0)?'ff':'00'}00${(rFT>=0)?'ff':'00'}${Math.floor(aFT*255).toString(16).padStart(2,'0')}`;\n            let aTF = Math.abs(rTF);\n            if (aTF > 1) aTF = 1;\n            if (aTF < 0) aTF = 0;\n            // if (aTF > 0.2) {aTF = 1} else {aTF=0}\n            const styleTF = `#${(rTF<0)?'ff':'00'}00${(rTF>=0)?'ff':'00'}${Math.floor(aTF*255).toString(16).padStart(2,'0')}`;\n            const x1 = (from.x+x.value)*s.value;\n            const y1 = (from.y+y.value)*s.value;\n            const x2 = (to.x+x.value)*s.value;\n            const y2 = (to.y+y.value)*s.value;\n            const grd=linesCtx.createLinearGradient(x1, y1, x2, y2);\n            grd.addColorStop(0,styleFT);\n            grd.addColorStop(1,styleTF);\n            linesCtx.strokeStyle = grd;\n            linesCtx.beginPath();\n            linesCtx.moveTo(x1, y1);\n            linesCtx.lineTo(x2, y2);\n            linesCtx.stroke();\n        }\n    }\n    // for(let i=0;i<progress.userCount;i++)\n    // {\n    //     for(let j=i+1;j<progress.userCount;j++)\n    //     {\n    //         const from = state.value.users[i];\n    //         const to = state.value.users[j];\n    //         const repulsion = getRepulsion(i,j);\n    //         const style = `#00ff00${(!repulsion)?'ff':'00'}`;\n    //         linesCtx.strokeStyle = style;\n    //         linesCtx.beginPath();\n    //         linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n    //         linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n    //         linesCtx.stroke();\n    //     }\n    // }\n    const w = mouseX-multiSelectStartX;\n    const h = mouseY-multiSelectStartY;\n    if (multiSelecting && Math.abs(w) > 10 && Math.abs(h) > 10)\n    {\n        linesCtx.rect(multiSelectStartX, multiSelectStartY, w, h);\n        linesCtx.fillStyle = '#00000033';\n        linesCtx.fill();\n    }\n}\n\n</script>\n\n<style scoped>\n.canvas\n{\n    position: absolute;\n    width: 100vw;\n    height: 100vh;\n    scroll-behavior:unset;\n    background-image:\n    linear-gradient(to right, gainsboro 1px, transparent 1px),\n    linear-gradient(to bottom, gainsboro 1px, transparent 1px);\n}\n.bg\n{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n}\n.mouse-input-handler\n{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n</style>","import { useModel as _useModel, defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, normalizeStyle as _normalizeStyle } from \"vue\"\n\nimport { debugMode, getRepulsion, progress, rGet } from '../game'\nimport { onMounted, Ref, ref } from 'vue'\nimport CanvasUser from './CanvasUser.vue'\nimport { emit, subscribe } from '../event'\nimport { AppState } from '@/App.vue';\ntype User = {\n    id: number;\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n};\nconst idealDist = 150;\nconst delta = 1/60;\nconst stepLength = 100;\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'GameCanvas',\n  props: {\n    \"modelValue\": {},\n    \"modelModifiers\": {},\n  },\n  emits: [\"update:modelValue\"],\n  setup(__props) {\n\nconst state:Ref<{\n    users: Array<User>\n}> = ref({\n  users: [],\n})\n\nsubscribe('resetProgress',()=>{\n    state.value = {\n        users: []\n    };\n})\n\nconst appState = _useModel<AppState>(__props, \"modelValue\");\n\nconst x = ref(0);\nconst y = ref(0);\nconst s = ref(1);\nsubscribe('userPressed', (id)=>\n{\n    // if (appState.value?.mode == 'user-edit') return;\n    if (appState.value == undefined) return;\n    let selectedUsers = appState.value.selectedUsers;\n    if (appState.value?.mode == 'select-relationship')\n    {\n        if (selectedUsers.includes(id))\n        {\n            if (appState.value.focusedUser != id)\n            {\n                appState.value.focusedUser = id;\n            }\n            else\n            {\n                appState.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n                appState.value.focusedUser = -1;\n            }\n        }\n        else{\n            appState.value.focusedUser = id;\n            selectedUsers.push(id);\n            if (selectedUsers.length==2)\n            {\n                const i=selectedUsers[0];\n                const j=selectedUsers[1];\n                if(appState.value.focusedUser==i)\n                {\n                    emit('relationSelected',i,j);\n                }\n                else\n                {\n                    emit('relationSelected',j,i);\n                }\n                appState.value.focusedUser = -1;\n                appState.value.selectedUsers = [];\n            }\n        }\n    }\n    else\n    {\n        if (selectedUsers.includes(id))\n        {\n            appState.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n        }\n        else\n        {\n            appState.value.selectedUsers.push(id);\n        }\n    }\n})\n\nlet multiSelecting = false;\nlet multiSelectStartX = 0;\nlet multiSelectStartY = 0;\nlet mouseX = 0;\nlet mouseY = 0;\nlet touchStartX = 0;\nlet touchStartY = 0;\nlet touchStartCanvasX = 0;\nlet touchStartCanvasY = 0;\nlet touchesDistance = -1;\n\nfunction onTouchStart(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1)\n    {\n        const touch = e.touches[0];\n        touchStartX = touch.clientX;\n        touchStartY = touch.clientY;\n        touchStartCanvasX = x.value;\n        touchStartCanvasY = y.value;\n    }\n}\n\nfunction onTouchEnd(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 0)\n    {\n        touchesDistance = -1;\n    }\n}\n\nfunction onTouchMove(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1 && touchesDistance == -1)\n    {\n        const touch = e.touches[0];\n        mouseX = touch.clientX;\n        mouseY = touch.clientY;\n        x.value = mouseX - touchStartX + touchStartCanvasX;\n        y.value = mouseY - touchStartY + touchStartCanvasY;\n    }\n    else if (e.touches.length == 2)\n    {\n        const x1 = e.touches[0].clientX;\n        const y1 = e.touches[0].clientY;\n        const x2 = e.touches[1].clientX;\n        const y2 = e.touches[1].clientY;\n        const d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        if (touchesDistance>0)\n        {\n            let delta = (d - touchesDistance) * 0.01;\n            if (delta < -1)\n            {\n                delta = -1;\n            }\n            if (delta > 1)\n            {\n                delta = 1;\n            }\n            delta += 1;\n            // if (delta < 0)\n            // {\n            //     delta += 1;\n            // }\n            changeScale((x1+x2)/2, (y1+y2)/2, delta);\n        }\n        touchesDistance = d;\n    }\n}\n\nfunction onMousemove(e:any)\n{\n    if (e.buttons==4) {\n        x.value += e.movementX / s.value;\n        y.value += e.movementY / s.value;\n    }\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n    multiSelecting = appState.value?.mode==\"broadcast\" && e.buttons==1;\n}\n\nfunction onMousedown(e:any)\n{\n    if (e.buttons==1)\n    {\n        multiSelecting = appState.value?.mode==\"broadcast\";\n        multiSelectStartX=e.clientX;\n        multiSelectStartY=e.clientY;\n    }\n    bgDownButtons = e.buttons;\n}\n\nlet bgDownButtons = 0;\n\n\nfunction onMouseup(e:any)\n{\n    if (appState.value == undefined) return;\n    if (bgDownButtons == 1)\n    {\n        appState.value.selectedUsers = [];\n        appState.value.focusedUser = -1;\n    }\n    if (multiSelecting && Math.abs(mouseX - multiSelectStartX) > 10 && Math.abs(mouseY - multiSelectStartY) > 10)\n    {\n        appState.value.selectedUsers = state.value.users.filter(user=>\n        {\n            if (appState.value == undefined) return;\n            const ux = (user.x + x.value) * s.value;\n            const uy = (user.y + y.value) * s.value;\n            let newSelecteState = e.shiftKey?appState.value.selectedUsers.includes(user.id):false;\n            if (((ux > multiSelectStartX && ux < mouseX) || (ux > mouseX && ux < multiSelectStartX))\n            && ((uy > multiSelectStartY && uy < mouseY) || (uy > mouseY && uy < multiSelectStartY)))\n            {\n                newSelecteState = true;\n            }\n            return newSelecteState;\n        }).map(user=>user.id);\n    }\n    multiSelecting = false;\n}\n\nfunction changeScale(mx:number, my:number, delta:number)\n{\n\n    let s1 = s.value;\n    let mx1 = mx / s1 - x.value;\n    let my1 = my / s1 - y.value;\n    s.value *= delta;\n    let s2 = s.value;\n    let mx2 = mx / s2 - x.value;\n    let my2 = my / s2 - y.value;\n    x.value += mx2 - mx1;\n    y.value += my2 - my1;\n}\n\nfunction onWheel(e:any)\n{\n    let delta = e.wheelDelta * 0.01;\n    if (delta < 0)\n    {\n        delta += 2.0;\n    }\n    if (delta < 0 || delta > 2.0) return;\n    changeScale(e.clientX, e.clientY, delta);\n}\n\nlet linesCanvas:any;\nlet linesCtx:any;\n\nconst d = delta * stepLength;\n\nfunction getForce(ax:number, ay:number, bx:number, by:number, repulsion:boolean, idealDistScale:number, strengthScale:number) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ls = dx * dx + dy * dy;\n    const l = Math.sqrt(ls);\n    const tl = idealDist * idealDistScale;\n    const s = 15 * strengthScale;\n    let f = s * (l - tl) / ls * d;\n    if (repulsion && l >= tl)\n    {\n        f = 0;\n    }\n    return {\n        x: dx * f,\n        y: dy * f\n    }\n}\n\nonMounted(()=>{\n    linesCanvas = document.getElementById('lines');\n    linesCtx = linesCanvas.getContext(\"2d\");\n    setInterval(physicsProcess,delta*1000);\n    subscribe(\"createdUser\", (id:number)=>{\n        state.value.users.push({\n            id: id,\n            x: (id % 2) * 100,\n            y: Math.floor(id / 2) * 100,\n            vx: 0,\n            vy: 0\n        });\n    });\n    subscribe(\"removedUser\", ()=>{\n        state.value.users.pop();\n    });\n    subscribe(\"tryGetBroadcastCollectedMessageTargets\", ()=>{\n        if (appState.value == undefined) return;\n        emit('getBroadcastCollectedMessageTargets',appState.value.selectedUsers);\n        appState.value.selectedUsers = [];\n        appState.value.focusedUser = -1;\n    })\n});\n\nfunction physicsProcess()\n{\n    const users = state.value.users;\n    for (let i = 0; i < progress.userCount-1; i++) {\n        const a = users[i];\n        for (let j = i + 1; j < progress.userCount; j++) {\n            const b = users[j];\n            const repulsion = getRepulsion(i,j);\n            let f = getForce(a.x, a.y, b.x, b.y, repulsion, repulsion?1:0.5, repulsion?0.5:0.5);\n            a.vx += f.x;\n            a.vy += f.y;\n            b.vx -= f.x;\n            b.vy -= f.y;\n        }\n    }\n    Object.values(state.value.users).forEach(user=>\n        {\n            user.vx *= 1 - (0.2 * d);\n            user.vy *= 1 - (0.2 * d);\n            user.vx -= user.x * 0.01 * d;\n            user.vy -= user.y * 0.01 * d;\n            user.x += user.vx * d;\n            user.y += user.vy * d;\n        }\n    )\n    redraw();\n}\n\nfunction redraw()\n{\n    if (appState.value==undefined) return;\n    linesCanvas.width = window.innerWidth;\n    linesCanvas.height = window.innerHeight;\n    for (let fromId=0;fromId<progress.userCount;fromId++)\n    {\n        const from = state.value.users[fromId];\n        if (from==undefined) continue;\n        for (let toId=fromId+1;toId<progress.userCount;toId++){\n            const to = state.value.users[toId];\n            const rFT = rGet(fromId, toId);\n            const rTF = rGet(fromId, toId);\n            let aFT = Math.abs(rFT);\n            if (aFT > 1) aFT = 1;\n            if (aFT < 0) aFT = 0;\n            // if (aFT > 0.2) {aFT = 1} else {aFT=0}\n            const styleFT = `#${(rFT<0)?'ff':'00'}00${(rFT>=0)?'ff':'00'}${Math.floor(aFT*255).toString(16).padStart(2,'0')}`;\n            let aTF = Math.abs(rTF);\n            if (aTF > 1) aTF = 1;\n            if (aTF < 0) aTF = 0;\n            // if (aTF > 0.2) {aTF = 1} else {aTF=0}\n            const styleTF = `#${(rTF<0)?'ff':'00'}00${(rTF>=0)?'ff':'00'}${Math.floor(aTF*255).toString(16).padStart(2,'0')}`;\n            const x1 = (from.x+x.value)*s.value;\n            const y1 = (from.y+y.value)*s.value;\n            const x2 = (to.x+x.value)*s.value;\n            const y2 = (to.y+y.value)*s.value;\n            const grd=linesCtx.createLinearGradient(x1, y1, x2, y2);\n            grd.addColorStop(0,styleFT);\n            grd.addColorStop(1,styleTF);\n            linesCtx.strokeStyle = grd;\n            linesCtx.beginPath();\n            linesCtx.moveTo(x1, y1);\n            linesCtx.lineTo(x2, y2);\n            linesCtx.stroke();\n        }\n    }\n    // for(let i=0;i<progress.userCount;i++)\n    // {\n    //     for(let j=i+1;j<progress.userCount;j++)\n    //     {\n    //         const from = state.value.users[i];\n    //         const to = state.value.users[j];\n    //         const repulsion = getRepulsion(i,j);\n    //         const style = `#00ff00${(!repulsion)?'ff':'00'}`;\n    //         linesCtx.strokeStyle = style;\n    //         linesCtx.beginPath();\n    //         linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n    //         linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n    //         linesCtx.stroke();\n    //     }\n    // }\n    const w = mouseX-multiSelectStartX;\n    const h = mouseY-multiSelectStartY;\n    if (multiSelecting && Math.abs(w) > 10 && Math.abs(h) > 10)\n    {\n        linesCtx.rect(multiSelectStartX, multiSelectStartY, w, h);\n        linesCtx.fillStyle = '#00000033';\n        linesCtx.fill();\n    }\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"canvas\",\n    style: _normalizeStyle({'background-size': 20*s.value+'px '+20*s.value+'px', 'background-position': x.value*s.value+'px '+y.value*s.value+'px'})\n  }, [\n    _createElementVNode(\"div\", {\n      class: \"mouse-input-handler\",\n      onMousedown: onMousedown,\n      onMouseup: onMouseup,\n      onMousemove: onMousemove,\n      onTouchstart: onTouchStart,\n      onTouchend: onTouchEnd,\n      onTouchmove: onTouchMove,\n      onWheel: onWheel\n    }, null, 32),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.value.users, (user) => {\n      return (_openBlock(), _createBlock(CanvasUser, {\n        key: user.id,\n        id: user.id,\n        x: user.x,\n        y: user.y,\n        px: x.value,\n        py: y.value,\n        ps: s.value,\n        selected: appState.value?.selectedUsers.includes(user.id)??false,\n        focused: appState.value?.focusedUser==user.id\n      }, null, 8, [\"id\", \"x\", \"y\", \"px\", \"py\", \"ps\", \"selected\", \"focused\"]))\n    }), 128)),\n    _cache[0] || (_cache[0] = _createElementVNode(\"canvas\", { id: \"lines\" }, null, -1))\n  ], 4))\n}\n}\n\n})","import script from \"./GameCanvas.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameCanvas.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameCanvas.vue?vue&type=style&index=0&id=7d267ad4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7d267ad4\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderSlot as _renderSlot, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"author\" }\nconst _hoisted_2 = { key: 1 }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = { class: \"time\" }\n\nimport { Message } from '@/game';\nimport { onMounted, ref, watch } from 'vue';\nimport { NCard, NSkeleton, NEllipsis } from 'naive-ui';\nimport { getUserName, text } from '@/text';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MessageCard',\n  props: {\n    msg: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\nlet content = ref(\"\");\nlet timestr = ref(\"\");\nconst intervalId = setInterval(()=>{\n    const messageText = text.messageTexts[props.msg.id];\n    if (typeof(messageText)!=\"undefined\" && messageText.content != '')\n    {\n        content.value = messageText.content;\n        // clearInterval(intervalId);\n    }\n}, 1);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NCard), {\n    class: \"message-card\",\n    \"content-class\": 'message-content',\n    \"header-style\": 'padding: 5px',\n    \"footer-style\": 'padding-bottom: 5px',\n    hoverable: \"\"\n  }, {\n    header: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, \"@\" + _toDisplayString(_unref(getUserName)(__props.msg.a)), 1)\n    ]),\n    \"header-extra\": _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"header-extra\")\n    ]),\n    footer: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"action\")\n    ]),\n    default: _withCtx(() => [\n      (_unref(content)=='')\n        ? (_openBlock(), _createBlock(_unref(NSkeleton), {\n            key: 0,\n            text: \"\",\n            repeat: 2\n          }))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n            _createElementVNode(\"p\", _hoisted_3, [\n              _createVNode(_unref(NEllipsis), { \"line-clamp\": 2 }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_unref(content)), 1)\n                ]),\n                _: 1\n              })\n            ])\n          ])),\n      _renderSlot(_ctx.$slots, \"suffix\"),\n      _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_unref(timestr)), 1)\n    ]),\n    _: 3\n  }))\n}\n}\n\n})","<template>\n<n-card class=\"message-card\" :content-class=\"'message-content'\" :header-style=\"'padding: 5px'\" :footer-style=\"'padding-bottom: 5px'\" hoverable>\n    <template #header>\n        <div class=\"author\">@{{ getUserName(msg.a) }}</div>\n    </template>\n    <template #header-extra>\n        <slot name=\"header-extra\"></slot>\n    </template>\n    <n-skeleton v-if=\"content==''\" text :repeat=\"2\"/>\n    <div v-else>\n        <p class=\"content\"><n-ellipsis :line-clamp=\"2\">{{ content }}</n-ellipsis></p>\n    </div>\n    <slot name=\"suffix\"></slot>\n     <div class=\"time\">{{ timestr }}</div>\n    <template #footer>\n        <slot name=\"action\"></slot>\n    </template>\n</n-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { Message } from '@/game';\nimport { defineProps, onMounted, ref, watch } from 'vue';\nimport { NCard, NSkeleton, NEllipsis } from 'naive-ui';\nimport { getUserName, text } from '@/text';\n\nconst props = defineProps<{msg:Message}>();\nlet content = ref(\"\");\nlet timestr = ref(\"\");\nconst intervalId = setInterval(()=>{\n    const messageText = text.messageTexts[props.msg.id];\n    if (typeof(messageText)!=\"undefined\" && messageText.content != '')\n    {\n        content.value = messageText.content;\n        // clearInterval(intervalId);\n    }\n}, 1);\n</script>\n\n<style scoped>\n.message-card\n{\n    margin-left: auto;\n    margin-right: auto;\n    margin-top: 0;\n    margin-bottom: 20px;\n    padding: 10px;\n    border-radius: 20px;\n    border: 1px dashed lightgray;\n}\n.author\n{\n    font-weight: bold;\n    font-size: 16px;\n}\n.content\n{\n    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;\n}\n.time\n{\n    color: gray;\n    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;\n}\n.message-content\n{\n    padding: 0;\n}\n@media screen and (max-width:600px) {\n    .message-card\n    {\n        width: 200px;\n        margin-top: auto;\n        margin-bottom: 20px;\n        margin-left: 0;\n        margin-right: 20px;\n    }\n}\n</style>","import script from \"./MessageCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageCard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MessageCard.vue?vue&type=style&index=0&id=a3e6515a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a3e6515a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent } from \"vue\"\n\nconst _hoisted_1 = { class: \"app\" }\nconst _hoisted_2 = { style: {\"position\":\"fixed\",\"right\":\"16px\",\"top\":\"16px\",\"display\":\"flex\",\"flex-direction\":\"column\",\"gap\":\"8px\"} }\nconst _hoisted_3 = {\n  class: \"pagebottom\",\n  style: {\"position\":\"absolute\",\"bottom\":\"0\",\"left\":\"0\",\"right\":\"0\"}\n}\nconst _hoisted_4 = {\n  class: \"score\",\n  style: {\"font-weight\":\"bold\",\"margin-top\":\"auto\"}\n}\nconst _hoisted_5 = {\n  class: \"buttons\",\n  style: {\"margin-top\":\"auto\"}\n}\n\nimport { nextTick, onMounted, Ref, ref, watch } from 'vue';\nimport GameCanvas from './components/GameCanvas.vue';\nimport MessageCard from './components/MessageCard.vue';\nimport { createUser, Message, progress, rSet, updateUsers, resetProgress, loadProgress, pushMsgToUser, rGet, createMessage } from './game';\nimport { emit, subscribe } from './event';\nimport { NPageHeader, NTag, NSpace, NDrawer, NDrawerContent, NButton, AutoCompleteInst, NDynamicTags, NModal, NIcon, NRow, NCol, NNumberAnimation, NStatistic, useMessage, NFlex } from 'naive-ui';\nimport { getUserName, loadText, processGenerateQueue, resetText, text } from './text';\nimport { startGenerateMessage } from './text';\nimport { View, ThumbsUp, AnalyticsReference, AiResultsHigh, Time, Network1 } from '@vicons/carbon'\nimport StatusBar from './components/StatusBar.vue';\n\nconst searchCost = 10;\n\nexport interface AppState {\n    mode: \"select-relationship\" | \"broadcast\";\n    editingRelationship: {i:number,j:number};\n    paused: boolean;\n    selectedUsers: Array<number>\n    focusedUser: number\n}\n\ninterface MessageStatistic {views:number,likes:number,score:number,responses:Record<number,string>}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\nconst naiveMessage = useMessage();\n\nfunction load()\n{\n    loadProgress();\n    loadText();\n    const appstateSource = localStorage.getItem('appstate');\n    if (appstateSource != null)\n    {\n        appState.value = JSON.parse(appstateSource);\n        gameScore.value = progress.score;\n        gameTime.value = progress.time;\n    }\n    naiveMessage.success(\"Â∑≤ËØªÂèñ\");\n}\n\nfunction save()\n{\n    localStorage.setItem('appstate', JSON.stringify(appState.value))\n    localStorage.setItem('progress', JSON.stringify(progress));\n    localStorage.setItem('text', JSON.stringify(text));\n    naiveMessage.success(\"Â∑≤‰øùÂ≠ò\");\n}\n\nonMounted(()=>{\n    window.addEventListener('beforeunload', ()=>{\n        save();\n    });\n    window.addEventListener('keydown', (e)=>{\n        if(e.key==' ')\n        {\n            appState.value.paused = !appState.value.paused;\n            naiveMessage.info(appState.value.paused?\"Â∑≤ÊöÇÂÅú\":\"Â∑≤ÊÅ¢Â§ç\");\n        }\n    })\n    gameInit();\n    const delta = 100;\n    setInterval(()=>{\n        if (appState.value.paused||showStatistic.value) return;\n        gameProcess(delta/1000);\n    },delta);\n});\n\nconst appState:Ref<AppState> = ref({\n    mode:'select-relationship',\n    editingRelationship:{i:-1,j:-1},\n    paused:true,\n    selectedUsers: [],\n    focusedUser: -1\n});\n\nconst collectedMessage: Ref<Message|undefined> = ref(undefined);\n\nconst showEditorDrawer = ref(false);\nconst showStatistic = ref(false);\n\nfunction createDefaultMessageStatistic()\n{\n    return {views:0,likes:0,score:0,responses:{}};\n}\nlet collectedMessageStatistic:Ref<MessageStatistic> = ref(createDefaultMessageStatistic());\nsubscribe('relationSelected', (i,j)=>\n{\n    if (appState.value.mode==\"select-relationship\")\n    {\n        showEditorDrawer.value = true;\n        collectedMessage.value = undefined;\n        appState.value.editingRelationship = {i,j};\n    }\n});\nfunction collectMessage(i:number,j:number)\n{\n    let r = -rGet(i,j);\n    if (Math.abs(r) < 0.1)\n    {\n        r = Math.random()?1:-1;\n    }\n    collectedMessage.value=createMessage(i,i,j,r)\n    progress.score -= searchCost;\n    gameScore.value = progress.score;\n    if (gameScore.value <= searchCost)\n    {\n        gameEnded.value = true;\n    }\n}\nfunction gameProcess(delta:number)\n{\n    updateUsers(delta);\n}\n// function startBroadcastCollectedMessage()\n// {\n//     appState.value.mode = 'broadcast';\n//     appState.value.paused = true;\n//     showEditorDrawer.value = false;\n// }\n// function endBroadcastCollectedMessage()\n// {\n//     emit('tryGetBroadcastCollectedMessageTargets');\n// }\n// function exitBroadcastCollectedMessage()\n// {\n//     appState.value.mode = 'select-relationship';\n// }\n// subscribe('getBroadcastCollectedMessageTargets', (targets:Array<number>)=>\n// {\n\n// })\nfunction broadcastCollectedMessage()\n{\n    showEditorDrawer.value = false;\n    if (collectedMessage.value == undefined) return;\n    collectedMessageStatistic.value={views:0,likes:0,score:0,responses:{}};\n    gameTime.value = progress.time;\n    for (let user=0;user<progress.userCount;user++)\n    {\n        if (progress.userType[user]!=0) continue;\n        pushMsgToUser(collectedMessage.value,user);\n    }\n    rSet(collectedMessage.value.i,collectedMessage.value.j,collectedMessage.value.v);\n    showStatistic.value = true;\n    appState.value.paused = true;\n    appState.value.mode = 'select-relationship';\n}\nsubscribe('addedMessage', (msg:Message)=>startGenerateMessage(msg));\nsetInterval(() => {\n    processGenerateQueue();\n}, 1000);\nsetInterval(() => {\n    windowWidth.value = window.innerWidth;\n}, 1);\nconst windowWidth = ref(0);\nsubscribe('viewedMessage',(view)=>{\n    collectedMessageStatistic.value.views += view;\n});\nsubscribe('likedMessage',(like)=>{\n    collectedMessageStatistic.value.likes += like;\n});\nsubscribe('messageGainedScore',(score)=>{\n    collectedMessageStatistic.value.score += score;\n    progress.score += score;\n    gameScore.value = progress.score;\n});\nsubscribe('messageResponsed',(author,response)=>{\n    collectedMessageStatistic.value.responses[author]=response;\n});\nconst gameScore = ref(progress.score);\nconst gameTime = ref(0);\nconst gameEnded = ref(false);\nsubscribe('resetProgress', ()=>{\n    appState.value={\n        mode:'select-relationship',\n        editingRelationship:{i:0,j:0},\n        paused:true,\n        selectedUsers: [],\n        focusedUser: -1\n    };\n    collectedMessageStatistic.value=createDefaultMessageStatistic();\n    gameTime.value = 0;\n    gameScore.value = progress.score;\n    resetText();\n});\nfunction gameInit()\n{\n    // const size = 10;\n    // for (let g=0;g<1;g++)\n    // {\n    //     for(let i=0;i<size;i++)\n    //     {\n    //         createUser(0);\n    //     }\n    //     for(let i=0;i<size;i++)\n    //     {\n    //         for(let j=0;j<size;j++)\n    //         {\n    //             rSet(g*size+i,g*size+j,Math.random()>0.5?1:-1);\n    //             // rSet(g*size+i,g*size+j,Math.floor(Math.random()*3)-1);\n    //         }\n    //     }\n        // for(let p=3;p<size;p++)\n        // {\n        //     for(let o=0;o<3;o++)\n        //     {\n        //         rSet(g*size+p,g*size+p-1-o,Math.random()>0.5?1:-1);\n        //     }\n        //     for(let o=0;o<3;o++)\n        //     {\n        //         rSet(g*size+p,g*size+o,1);\n        //     }\n        // }\n        // for(let p=0;p<size;p++)\n        // {\n        //     rSet(g*size+p,g*size+p,1);\n        // }\n        // if (g>0)\n        // {\n        //     rSet((g-1)*size, g*size, 1);\n        // }\n    // }\n    createUser(0);\n    createUser(0);\n    createUser(0);\n    createUser(0);\n    rSet(0,1,-1);\n    rSet(0,2,-1);\n    rSet(1,2,-1);\n    rSet(0,3,1);\n    rSet(1,3,2);\n    rSet(2,3,3);\n\n    rSet(0,0,0);\n    rSet(1,1,0);\n    rSet(2,2,0);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_center = _resolveComponent(\"center\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(GameCanvas, {\n      modelValue: appState.value,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((appState).value = $event)),\n      ref: \"canvas\"\n    }, null, 8, [\"modelValue\"]),\n    _createVNode(_unref(NModal), {\n      show: showStatistic.value,\n      \"onUpdate:show\": _cache[1] || (_cache[1] = ($event: any) => ((showStatistic).value = $event)),\n      preset: \"card\",\n      style: {\"margin\":\"60px\"},\n      title: `Êï∞ÊçÆÁªüËÆ°`,\n      size: \"huge\",\n      bordered: false,\n      onUpdateShow: _cache[2] || (_cache[2] = (show)=>{if(!show){}})\n    }, {\n      default: _withCtx(() => [\n        (collectedMessage.value!=undefined)\n          ? (_openBlock(), _createBlock(MessageCard, {\n              key: 0,\n              msg: collectedMessage.value\n            }, {\n              suffix: _withCtx(() => [\n                _createVNode(_unref(NSpace), null, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(collectedMessageStatistic).responses, (response, author) => {\n                      return (_openBlock(), _createBlock(_unref(NTag), {\n                        key: author,\n                        round: \"\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createTextVNode(_toDisplayString(_unref(getUserName)(author)) + \" \" + _toDisplayString(response), 1)\n                        ]),\n                        _: 2\n                      }, 1024))\n                    }), 128))\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_unref(NRow), null, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(NCol), { span: 12 }, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(NStatistic), {\n                          label: \"ÊµèËßà\",\n                          value: (_unref(collectedMessageStatistic).views*1000).toFixed()\n                        }, {\n                          prefix: _withCtx(() => [\n                            _createVNode(_unref(NIcon), null, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(View))\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        }, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_unref(NCol), { span: 12 }, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(NStatistic), {\n                          label: \"ÁÇπËµû\",\n                          value: (_unref(collectedMessageStatistic).likes*Math.max(Math.random(),0.5)*1000).toFixed()\n                        }, {\n                          prefix: _withCtx(() => [\n                            _createVNode(_unref(NIcon), null, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(ThumbsUp))\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        }, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_unref(NCol), { span: 12 }, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(NStatistic), {\n                          label: \"ÁÇπÊï∞Ëé∑Âèñ\",\n                          value: _unref(collectedMessageStatistic).score.toFixed()\n                        }, {\n                          prefix: _withCtx(() => [\n                            _createVNode(_unref(NIcon), null, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(Network1))\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        }, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"msg\"]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    }, 8, [\"show\"]),\n    _createVNode(_unref(NDrawer), {\n      show: showEditorDrawer.value,\n      \"onUpdate:show\": _cache[5] || (_cache[5] = ($event: any) => ((showEditorDrawer).value = $event)),\n      width: windowWidth.value>500?500:windowWidth.value\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NDrawerContent), { \"native-scrollbar\": false }, {\n          header: _withCtx(() => [\n            _createVNode(_unref(NPageHeader), {\n              subtitle: \"Áî®Êà∑ÈáçÂêàÂ∫¶\",\n              onBack: _cache[3] || (_cache[3] = ($event: any) => (showEditorDrawer.value=false))\n            }),\n            _createElementVNode(\"h1\", null, _toDisplayString(_unref(getUserName)(appState.value.editingRelationship.i)) + \"‚Üî\" + _toDisplayString(_unref(getUserName)(appState.value.editingRelationship.j)) + \"=\" + _toDisplayString(_unref(rGet)(appState.value.editingRelationship.i,appState.value.editingRelationship.j).toFixed(2)), 1)\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", null, [\n              _createVNode(_unref(NFlex), { vertical: \"\" }, {\n                default: _withCtx(() => [\n                  (collectedMessage.value==undefined)\n                    ? (_openBlock(), _createBlock(_unref(NButton), {\n                        key: 0,\n                        onClick: _cache[4] || (_cache[4] = ($event: any) => (collectMessage(appState.value.editingRelationship.i,appState.value.editingRelationship.j)))\n                      }, {\n                        default: _withCtx(() => [\n                          _createTextVNode(\"ÊêúÁ¥¢Âèç‰æã(-\" + _toDisplayString(searchCost)),\n                          _createVNode(_unref(NIcon), null, {\n                            default: _withCtx(() => [\n                              _createVNode(_unref(Network1)),\n                              _cache[9] || (_cache[9] = _createTextVNode(\")\", -1))\n                            ]),\n                            _: 1\n                          })\n                        ]),\n                        _: 1\n                      }))\n                    : (_openBlock(), _createBlock(_unref(NButton), {\n                        key: 1,\n                        onClick: broadcastCollectedMessage,\n                        type: 'primary'\n                      }, {\n                        default: _withCtx(() => [...(_cache[10] || (_cache[10] = [\n                          _createTextVNode(\"Êé®ÈÄÅ\", -1)\n                        ]))]),\n                        _: 1\n                      })),\n                  (collectedMessage.value!=undefined)\n                    ? (_openBlock(), _createBlock(MessageCard, {\n                        key: 2,\n                        msg: collectedMessage.value\n                      }, {\n                        action: _withCtx(() => [...(_cache[11] || (_cache[11] = []))]),\n                        _: 1\n                      }, 8, [\"msg\"]))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                _: 1\n              })\n            ])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"show\", \"width\"]),\n    _createVNode(_unref(NModal), {\n      show: gameEnded.value,\n      \"onUpdate:show\": _cache[7] || (_cache[7] = ($event: any) => ((gameEnded).value = $event)),\n      preset: \"card\",\n      style: {\"margin\":\"60px\"},\n      title: `Ê∏∏ÊàèÁªìÊùü`,\n      size: \"huge\",\n      bordered: false,\n      \"mask-closable\": false\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"p\", null, [\n          _cache[12] || (_cache[12] = _createTextVNode(\"‰Ω†ËÄóÂ∞Ω‰∫Ü\", -1)),\n          _createVNode(_unref(Network1)),\n          _cache[13] || (_cache[13] = _createTextVNode(\"ÊêúÁ¥¢ÁÇπÊï∞„ÄÇ\", -1))\n        ]),\n        _createVNode(_component_center, null, {\n          default: _withCtx(() => [\n            _createVNode(_unref(NButton), {\n              onClick: _cache[6] || (_cache[6] = ($event: any) => {gameEnded.value=false;_unref(resetProgress)();gameInit();})\n            }, {\n              default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n                _createTextVNode(\"ÈáçÊñ∞ÂºÄÂßã\", -1)\n              ]))]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"show\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_unref(NButton), {\n        onClick: save,\n        type: 'primary'\n      }, {\n        default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n          _createTextVNode(\"‰øùÂ≠ò\", -1)\n        ]))]),\n        _: 1\n      }),\n      _createVNode(_unref(NButton), {\n        onClick: load,\n        type: 'primary'\n      }, {\n        default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n          _createTextVNode(\"ËØªÂèñ\", -1)\n        ]))]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_unref(NIcon), null, {\n          default: _withCtx(() => [\n            _createVNode(_unref(Time))\n          ]),\n          _: 1\n        }),\n        _createTextVNode(\" \" + _toDisplayString(gameTime.value) + \" \", 1),\n        _createVNode(_unref(NIcon), null, {\n          default: _withCtx(() => [\n            _createVNode(_unref(Network1))\n          ]),\n          _: 1\n        }),\n        _cache[17] || (_cache[17] = _createTextVNode()),\n        _createVNode(_unref(NNumberAnimation), { to: gameScore.value }, null, 8, [\"to\"])\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createVNode(_unref(NButton), {\n          class: \"score\",\n          round: \"\",\n          size: \"large\",\n          onClick: _cache[8] || (_cache[8] = ($event: any) => (appState.value.paused=!appState.value.paused))\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(appState.value.paused?'ÁªßÁª≠':'ÊöÇÂÅú') + \" space\", 1)\n          ]),\n          _: 1\n        })\n      ])\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { nextTick, onMounted, Ref, ref, watch } from 'vue';\nimport GameCanvas from './components/GameCanvas.vue';\nimport MessageCard from './components/MessageCard.vue';\nimport { createUser, Message, progress, rSet, updateUsers, resetProgress, loadProgress, pushMsgToUser, rGet, createMessage } from './game';\nimport { emit, subscribe } from './event';\nimport { NPageHeader, NTag, NSpace, NDrawer, NDrawerContent, NButton, AutoCompleteInst, NDynamicTags, NModal, NIcon, NRow, NCol, NNumberAnimation, NStatistic, useMessage, NFlex } from 'naive-ui';\nimport { getUserName, loadText, processGenerateQueue, resetText, text } from './text';\nimport { startGenerateMessage } from './text';\nimport { View, ThumbsUp, AnalyticsReference, AiResultsHigh, Time, Network1 } from '@vicons/carbon'\nimport StatusBar from './components/StatusBar.vue';\n\nconst naiveMessage = useMessage();\n\nconst searchCost = 10;\n\nfunction load()\n{\n    loadProgress();\n    loadText();\n    const appstateSource = localStorage.getItem('appstate');\n    if (appstateSource != null)\n    {\n        appState.value = JSON.parse(appstateSource);\n        gameScore.value = progress.score;\n        gameTime.value = progress.time;\n    }\n    naiveMessage.success(\"Â∑≤ËØªÂèñ\");\n}\n\nfunction save()\n{\n    localStorage.setItem('appstate', JSON.stringify(appState.value))\n    localStorage.setItem('progress', JSON.stringify(progress));\n    localStorage.setItem('text', JSON.stringify(text));\n    naiveMessage.success(\"Â∑≤‰øùÂ≠ò\");\n}\n\nonMounted(()=>{\n    window.addEventListener('beforeunload', ()=>{\n        save();\n    });\n    window.addEventListener('keydown', (e)=>{\n        if(e.key==' ')\n        {\n            appState.value.paused = !appState.value.paused;\n            naiveMessage.info(appState.value.paused?\"Â∑≤ÊöÇÂÅú\":\"Â∑≤ÊÅ¢Â§ç\");\n        }\n    })\n    gameInit();\n    const delta = 100;\n    setInterval(()=>{\n        if (appState.value.paused||showStatistic.value) return;\n        gameProcess(delta/1000);\n    },delta);\n});\n\nexport interface AppState {\n    mode: \"select-relationship\" | \"broadcast\";\n    editingRelationship: {i:number,j:number};\n    paused: boolean;\n    selectedUsers: Array<number>\n    focusedUser: number\n}\n\nconst appState:Ref<AppState> = ref({\n    mode:'select-relationship',\n    editingRelationship:{i:-1,j:-1},\n    paused:true,\n    selectedUsers: [],\n    focusedUser: -1\n});\n\nconst collectedMessage: Ref<Message|undefined> = ref(undefined);\n\nconst showEditorDrawer = ref(false);\nconst showStatistic = ref(false);\n\ninterface MessageStatistic {views:number,likes:number,score:number,responses:Record<number,string>}\n\nfunction createDefaultMessageStatistic()\n{\n    return {views:0,likes:0,score:0,responses:{}};\n}\nlet collectedMessageStatistic:Ref<MessageStatistic> = ref(createDefaultMessageStatistic());\nsubscribe('relationSelected', (i,j)=>\n{\n    if (appState.value.mode==\"select-relationship\")\n    {\n        showEditorDrawer.value = true;\n        collectedMessage.value = undefined;\n        appState.value.editingRelationship = {i,j};\n    }\n});\nfunction collectMessage(i:number,j:number)\n{\n    let r = -rGet(i,j);\n    if (Math.abs(r) < 0.1)\n    {\n        r = Math.random()?1:-1;\n    }\n    collectedMessage.value=createMessage(i,i,j,r)\n    progress.score -= searchCost;\n    gameScore.value = progress.score;\n    if (gameScore.value <= searchCost)\n    {\n        gameEnded.value = true;\n    }\n}\nfunction gameProcess(delta:number)\n{\n    updateUsers(delta);\n}\n// function startBroadcastCollectedMessage()\n// {\n//     appState.value.mode = 'broadcast';\n//     appState.value.paused = true;\n//     showEditorDrawer.value = false;\n// }\n// function endBroadcastCollectedMessage()\n// {\n//     emit('tryGetBroadcastCollectedMessageTargets');\n// }\n// function exitBroadcastCollectedMessage()\n// {\n//     appState.value.mode = 'select-relationship';\n// }\n// subscribe('getBroadcastCollectedMessageTargets', (targets:Array<number>)=>\n// {\n\n// })\nfunction broadcastCollectedMessage()\n{\n    showEditorDrawer.value = false;\n    if (collectedMessage.value == undefined) return;\n    collectedMessageStatistic.value={views:0,likes:0,score:0,responses:{}};\n    gameTime.value = progress.time;\n    for (let user=0;user<progress.userCount;user++)\n    {\n        if (progress.userType[user]!=0) continue;\n        pushMsgToUser(collectedMessage.value,user);\n    }\n    rSet(collectedMessage.value.i,collectedMessage.value.j,collectedMessage.value.v);\n    showStatistic.value = true;\n    appState.value.paused = true;\n    appState.value.mode = 'select-relationship';\n}\nsubscribe('addedMessage', (msg:Message)=>startGenerateMessage(msg));\nsetInterval(() => {\n    processGenerateQueue();\n}, 1000);\nsetInterval(() => {\n    windowWidth.value = window.innerWidth;\n}, 1);\nconst windowWidth = ref(0);\nsubscribe('viewedMessage',(view)=>{\n    collectedMessageStatistic.value.views += view;\n});\nsubscribe('likedMessage',(like)=>{\n    collectedMessageStatistic.value.likes += like;\n});\nsubscribe('messageGainedScore',(score)=>{\n    collectedMessageStatistic.value.score += score;\n    progress.score += score;\n    gameScore.value = progress.score;\n});\nsubscribe('messageResponsed',(author,response)=>{\n    collectedMessageStatistic.value.responses[author]=response;\n});\nconst gameScore = ref(progress.score);\nconst gameTime = ref(0);\nconst gameEnded = ref(false);\nsubscribe('resetProgress', ()=>{\n    appState.value={\n        mode:'select-relationship',\n        editingRelationship:{i:0,j:0},\n        paused:true,\n        selectedUsers: [],\n        focusedUser: -1\n    };\n    collectedMessageStatistic.value=createDefaultMessageStatistic();\n    gameTime.value = 0;\n    gameScore.value = progress.score;\n    resetText();\n});\nfunction gameInit()\n{\n    // const size = 10;\n    // for (let g=0;g<1;g++)\n    // {\n    //     for(let i=0;i<size;i++)\n    //     {\n    //         createUser(0);\n    //     }\n    //     for(let i=0;i<size;i++)\n    //     {\n    //         for(let j=0;j<size;j++)\n    //         {\n    //             rSet(g*size+i,g*size+j,Math.random()>0.5?1:-1);\n    //             // rSet(g*size+i,g*size+j,Math.floor(Math.random()*3)-1);\n    //         }\n    //     }\n        // for(let p=3;p<size;p++)\n        // {\n        //     for(let o=0;o<3;o++)\n        //     {\n        //         rSet(g*size+p,g*size+p-1-o,Math.random()>0.5?1:-1);\n        //     }\n        //     for(let o=0;o<3;o++)\n        //     {\n        //         rSet(g*size+p,g*size+o,1);\n        //     }\n        // }\n        // for(let p=0;p<size;p++)\n        // {\n        //     rSet(g*size+p,g*size+p,1);\n        // }\n        // if (g>0)\n        // {\n        //     rSet((g-1)*size, g*size, 1);\n        // }\n    // }\n    createUser(0);\n    createUser(0);\n    createUser(0);\n    createUser(0);\n    rSet(0,1,-1);\n    rSet(0,2,-1);\n    rSet(1,2,-1);\n    rSet(0,3,1);\n    rSet(1,3,2);\n    rSet(2,3,3);\n\n    rSet(0,0,0);\n    rSet(1,1,0);\n    rSet(2,2,0);\n}\n</script>\n\n<template>\n<div class=\"app\">\n    <GameCanvas v-model=\"appState\" ref=\"canvas\"/>\n    <n-modal v-model:show=\"showStatistic\" preset=\"card\" style=\"margin: 60px;\" :title=\"`Êï∞ÊçÆÁªüËÆ°`\" size=\"huge\" :bordered=\"false\"\n        @update-show=\"(show)=>{if(!show){}}\"\n    >\n        <MessageCard v-if=\"collectedMessage!=undefined\" :msg=\"collectedMessage\">\n            <template #suffix>\n                <n-space>\n                    <n-tag v-for=\"response,author in collectedMessageStatistic.responses\" :key=\"author\" round>\n                            {{getUserName(author)}} {{ response }}\n                    </n-tag>\n                </n-space>\n                <n-row>\n                    <n-col :span=\"12\">\n                        <n-statistic label=\"ÊµèËßà\" :value=\"(collectedMessageStatistic.views*1000).toFixed()\">\n                            <template #prefix><n-icon><View/></n-icon></template>\n                        </n-statistic>\n                    </n-col>\n                    <n-col :span=\"12\">\n                        <n-statistic label=\"ÁÇπËµû\" :value=\"(collectedMessageStatistic.likes*Math.max(Math.random(),0.5)*1000).toFixed()\">\n                            <template #prefix><n-icon><ThumbsUp/></n-icon></template>\n                        </n-statistic>\n                    </n-col>\n                    <n-col :span=\"12\">\n                        <n-statistic label=\"ÁÇπÊï∞Ëé∑Âèñ\" :value=\"collectedMessageStatistic.score.toFixed()\">\n                            <template #prefix><n-icon><Network1/></n-icon></template>\n                        </n-statistic>\n                    </n-col>\n                </n-row>\n            </template>\n        </MessageCard>\n    </n-modal>\n    <!-- <MessageList class=\"mainFlow\" v-model:label=\"text.flowLabel[0]\" :source=\"\" :flow=\"0\">\n        <template #prefix>\n            <StatusBar/>\n        </template>\n        <template #suffix>\n        </template>\n    </MessageList>-->\n        <n-drawer v-model:show=\"showEditorDrawer\" :width=\"windowWidth>500?500:windowWidth\">\n            <n-drawer-content :native-scrollbar=\"false\">\n                <template #header>\n                    <n-page-header subtitle=\"Áî®Êà∑ÈáçÂêàÂ∫¶\" @back=\"showEditorDrawer=false\"></n-page-header>\n                    <h1>{{ getUserName(appState.editingRelationship.i) }}‚Üî{{ getUserName(appState.editingRelationship.j) }}={{ rGet(appState.editingRelationship.i,appState.editingRelationship.j).toFixed(2) }}</h1>\n                </template>\n                <div>\n                    <n-flex vertical>\n                        <n-button v-if=\"collectedMessage==undefined\" @click=\"collectMessage(appState.editingRelationship.i,appState.editingRelationship.j)\">ÊêúÁ¥¢Âèç‰æã(-{{ searchCost }}<n-icon><Network1/>)</n-icon></n-button>\n                        <n-button v-else @click=\"broadcastCollectedMessage\" :type=\"'primary'\">Êé®ÈÄÅ</n-button>\n                        <MessageCard v-if=\"collectedMessage!=undefined\" :msg=\"collectedMessage\">\n                            <template #action>\n                            </template>\n                        </MessageCard>\n                    </n-flex>\n                </div>\n            </n-drawer-content>\n        </n-drawer>\n        <n-modal v-model:show=\"gameEnded\" preset=\"card\" style=\"margin: 60px;\" :title=\"`Ê∏∏ÊàèÁªìÊùü`\" size=\"huge\" :bordered=\"false\" :mask-closable=false>\n            <p>‰Ω†ËÄóÂ∞Ω‰∫Ü<Network1/>ÊêúÁ¥¢ÁÇπÊï∞„ÄÇ</p>\n            <center><n-button @click=\"gameEnded=false;resetProgress();gameInit();\">ÈáçÊñ∞ÂºÄÂßã</n-button></center>\n        </n-modal>\n        <div style=\"position: fixed;right: 16px;top:16px; display: flex;flex-direction: column;gap:8px\">\n            <n-button @click=\"save\" :type=\"'primary'\">‰øùÂ≠ò</n-button>\n            <n-button @click=\"load\" :type=\"'primary'\">ËØªÂèñ</n-button>\n        </div>\n        <div class=\"pagebottom\" style=\"position: absolute;bottom: 0;left: 0;right: 0;\">\n            <div class=\"score\" style=\"font-weight: bold;margin-top:auto\">\n                <n-icon><Time/></n-icon> {{ gameTime }} <n-icon><Network1/></n-icon> <n-number-animation :to=\"gameScore\"/>\n            </div>\n            <!-- <n-flex vertical v-if=\"appState.mode=='broadcast'&&collectedMessage!=undefined\">\n                <MessageCard :msg=\"collectedMessage\"/>\n                <n-space :justify=\"'center'\">\n                    <n-button class=\"score\" round size=\"large\" @click=\"endBroadcastCollectedMessage\" :disabled=\"appState.selectedUsers.length==0\">ÂÆåÊàê</n-button>\n                    <n-button class=\"score\" round size=\"large\" @click=\"exitBroadcastCollectedMessage\">ÂèñÊ∂à</n-button>\n                </n-space>\n            </n-flex> -->\n            <div class=\"buttons\" style=\"margin-top:auto\">\n                <n-button class=\"score\" round size=\"large\" @click=\"appState.paused=!appState.paused\">{{appState.paused?'ÁªßÁª≠':'ÊöÇÂÅú'}} space</n-button>\n            </div>\n        </div>\n</div>\n</template>\n\n<style>\nbody\n{\n    margin: 0;\n    overflow: hidden;\n    user-select: none;\n}\n\n.app\n{\n    display: flex;\n    width: 100vw;\n    height: 100vh;\n}\n.buttons\n{\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n.flows\n{\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n.noscroll::-webkit-scrollbar {\n    display: none;\n}\n.flow\n{\n    width: 300px;\n    margin: 8px;\n    box-shadow: 0 0 5px 0px rgba(0,0,0,0.5);\n}\n.flow::-webkit-scrollbar {\n    display: none;\n}\n.flowControl\n{\n    width: 300px;\n    margin: 8px;\n    height: min-content;\n    display: flex;\n    flex-direction: column;\n}\n.pagebottom\n{\n    flex: 0;\n    display:flex;\n    justify-content:space-between;\n    margin: 8px;\n}\n.score\n{\n    top:auto;\n    bottom:0;\n    background: white;\n    /* box-shadow: 0 0 5px rgba(0,0,0,0.5); */\n    border-radius: 20px;\n    color:black;\n    padding: 8px;\n    text-wrap-mode: nowrap;\n    text-align: center;\n}\n.mainFlow\n{\n    z-index:999;\n    position:fixed;\n    left:8px;\n    top:8px;\n    bottom: 8px;\n    z-index:999;\n}\n@media screen and (max-width:600px) {\n    .mainFlow\n    {\n        width: auto;\n        top:auto;\n        right: 8px;\n        height: 30%;\n    }\n    .user-editor-message-list\n    {\n        display: flex;\n        flex-direction: row;\n        height: 100%;\n        flex-wrap: wrap;\n    }\n}\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=737adc3e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n    <n-message-provider>\n        <App/>\n    </n-message-provider>\n</template>\n\n<script setup>\nimport App from './App.vue';\nimport { NMessageProvider } from 'naive-ui';\n</script>","import script from \"./AppContainer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppContainer.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\nimport AppContainer from './AppContainer.vue'\n\ncreateApp(AppContainer).mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_project\"] = self[\"webpackChunkvue_project\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(3953); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["events","subscribe","event","action","key","Object","keys","length","emit","args","values","forEach","OpenAI","apiKey","baseURL","dangerouslyAllowBrowser","delay","ms","Promise","resolve","setTimeout","async","chat","msg","text","userTexts","messageTexts","generateQueue","flowLabel","loadText","textSource","localStorage","getItem","JSON","parse","resetText","getUserName","id","toString","name","getMessageMinimumVersionPrompt","content","generating","processGenerateQueue","undefined","console","log","push","minimumVersion","time","msgObj","progress","messages","describe","v","i","a","j","getTimeText","t","shift","startGenerateMessage","weekdays","day","year","toFixed","month","weekday","Math","random","getResponse","user","dInstability","d","userGraphChange","userMemory","userGraph","userType","userAttention","userCount","userFlowTags","score","resetProgress","loadProgress","progressSource","setProgress","newProgress","rGet","b","rGetIn","G","k","rSet","rSetIn","createMessage","changeAttitude","value","updateUser","delta","oxPairs","maxIPD_o","maxIPD_x","maxIPD","o","x","includes","IPD","instabilityPartialD","abs","dAttitude","applyChange","instability","p","s","Gpp","Gpx","Gpo","Gox","min","pushMsgToUser","oldGij","oldInstability","newInstability","views","likes","floor","updateUsers","getRepulsion","rij","repulsion","innerRepulsion","outterRepulsion","createUser","type","learnRate","_hoisted_1","class","_defineComponent","__name","props","y","selected","Boolean","focused","px","py","ps","setup","__props","onClick","userInstability","ref","radius","onMounted","setInterval","_ctx","_cache","_openBlock","_createElementBlock","style","_normalizeStyle","left","top","outline","_unref","width","height","_createElementVNode","_toDisplayString","__exports__","idealDist","stepLength","emits","state","users","appState","_useModel","selectedUsers","mode","focusedUser","filter","multiSelecting","multiSelectStartX","multiSelectStartY","mouseX","mouseY","touchStartX","touchStartY","touchStartCanvasX","touchStartCanvasY","touchesDistance","onTouchStart","e","preventDefault","touches","touch","clientX","clientY","onTouchEnd","onTouchMove","x1","y1","x2","y2","sqrt","changeScale","onMousemove","buttons","movementX","movementY","onMousedown","bgDownButtons","linesCanvas","linesCtx","onMouseup","ux","uy","newSelecteState","shiftKey","map","mx","my","s1","mx1","my1","s2","mx2","my2","onWheel","wheelDelta","getForce","ax","ay","bx","by","idealDistScale","strengthScale","dx","dy","ls","l","tl","f","physicsProcess","vx","vy","redraw","window","innerWidth","innerHeight","fromId","from","toId","to","rFT","rTF","aFT","styleFT","padStart","aTF","styleTF","grd","createLinearGradient","addColorStop","strokeStyle","beginPath","moveTo","lineTo","stroke","w","h","rect","fillStyle","fill","document","getElementById","getContext","pop","onTouchstart","onTouchend","onTouchmove","_Fragment","_renderList","_createBlock","CanvasUser","_hoisted_2","_hoisted_3","_hoisted_4","timestr","messageText","NCard","hoverable","header","_withCtx","_renderSlot","$slots","footer","default","NSkeleton","repeat","_createVNode","NEllipsis","_createTextVNode","_","_hoisted_5","searchCost","naiveMessage","useMessage","load","appstateSource","gameScore","gameTime","success","save","setItem","stringify","addEventListener","paused","info","gameInit","showStatistic","gameProcess","editingRelationship","collectedMessage","showEditorDrawer","createDefaultMessageStatistic","responses","collectedMessageStatistic","collectMessage","r","gameEnded","broadcastCollectedMessage","windowWidth","view","like","author","response","_component_center","_resolveComponent","GameCanvas","modelValue","$event","NModal","show","preset","title","size","bordered","onUpdateShow","MessageCard","suffix","NSpace","NTag","round","NRow","NCol","span","NStatistic","label","prefix","NIcon","View","max","ThumbsUp","Network1","_createCommentVNode","NDrawer","NDrawerContent","NPageHeader","subtitle","onBack","NFlex","vertical","NButton","Time","NNumberAnimation","NMessageProvider","App","createApp","AppContainer","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","splice","n","getter","__esModule","definition","defineProperty","enumerable","get","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}