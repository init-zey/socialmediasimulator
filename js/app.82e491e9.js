(function(){"use strict";var e={9688:function(e,t,s){var l=s(5130),a=(s(4114),s(8111),s(2489),s(1701),s(3110),s(6768)),u=s(144),n=s(4232);s(7588);const o={};function r(e,t){e in o||(o[e]={});const s=Object.keys(o[e]).length-1;return o[e][s]=t,s}function i(e,...t){e in o&&Object.values(o[e]).forEach(e=>{e(...t)})}let c=!1,d={userMemory:{},subjectiveUserGraph:{},messages:[],userType:[],userLearnRate:[],userCount:0,userFlowTags:[],time:0,score:0};function v(){d={userMemory:{},subjectiveUserGraph:{},messages:[],userType:[],userLearnRate:[],userCount:0,userFlowTags:[],time:0,score:0},i("resetProgress")}function f(e){return e in d.subjectiveUserGraph||(d.subjectiveUserGraph[e]={}),d.subjectiveUserGraph[e]}function p(e,t,s){if(e>t)return p(t,e,s);const l=e.toString(32)+"_"+t.toString(32);return l in s?s[l]:0}function g(e,t,s,l){if(e>t)return void g(t,e,s,l);const a=e.toString(32)+"_"+t.toString(32);l[a]=s}function b(e,t){for(let s=0;s<d.userCount;s++){if(0!=d.userType[s])continue;const l=d.userFlowTags[s];if(0==t||void 0!=l&&l.includes(t))for(let t=0;t<e.length;t++)w(d.messages[e[t]],s,e.length-t)}}function m(e,t,s,l){const a={id:d.messages.length,a:e,i:t,j:s,v:l,t:d.time};d.messages.push(a),i("addedMessage",a)}function h(e,t,s,l){const a=f(e),u=p(t,s,a)+l;return g(t,s,u,a),Math.abs(l)>.2&&m(e,t,s,u),l}function k(e){console.log(`update ${e}`);let t=0,s=-1,l=-1;const a=f(e);for(let u=0;u<d.userCount;u++)for(let n=0;n<d.userCount;n++){let o=R(u,n,a);u!=e&&(o*=1-d.userLearnRate[e]),Math.abs(o)>Math.abs(t)&&(t=o,s=u,l=n)}if(s>=0){const a=-Math.atan(t)/3.14;console.log(`Dmax|dG(${s},${l})=${t},dAttitude=${a}`),h(e,s,l,a)}}function y(e){const t=f(e);let s=0;for(let l=0;l<d.userCount;l++){const a=p(e,l,t);for(let u=l;u<d.userCount;u++){const n=p(e,u,t),o=p(u,l,t),r=n*o-a;s+=r*r}}return s}function R(e,t,s){let l=0;const a=p(e,t,s);for(let n=0;n<d.userCount;n++){const u=p(t,n,s),o=p(e,n,s);l+=u*(a*u-o),l-=o*u-a}const u=p(t,t,s)-1;return l-=a*u*u,l}function w(e,t,s){t in d.userMemory||(d.userMemory[t]=[]),d.userMemory[t].push(e.id);const l=f(t),a=y(t),u=p(e.i,e.j,l),n=d.userLearnRate[t];g(e.i,e.j,u+n*p(t,e.a,l)*(e.v-u),l);const o=y(t),r=a-o,c=Math.abs(r),v=r>0?r:Math.random()*Math.abs(r)*.5;i("viewedMessage",e.id,c),i("likedMessage",e.id,v),i("messageKnownExposure",e.id,s),i("messageGainedScore",e.id,Math.floor((c+v)*s))}function x(){for(let e=0;e<d.userCount;e++)0==d.userType[e]&&k(e)}function _(e,t){const s=(e,t)=>Math.abs(p(e,t,f(e)))<.5;let l=s(e,t);if(!l){let a=!1;for(let l=1;l<t-e&&!a;l++)a=!s(e,e+l)&&!s(e+l,t);let u=!1;for(let l=1;l<e-t+d.userCount&&!u;l++){let a=t+l;a>=d.userCount&&(a-=d.userCount),u=!s(a,e)&&!s(t,a)}l=a&&u}return l}function F(e,t=.5){const s=d.userCount;d.userCount+=1,d.userType.push(e),d.userLearnRate.push(t),i("createdUser",s)}var M=s(2388),A=(s(8335),s(6051));new A.Ay({apiKey:"sk-uFDUPAriuBg6l84rhrFxcRect2V0gpH59KVXj8dxG6wblr5p",baseURL:"http://localhost:8080/llmapi",dangerouslyAllowBrowser:!0});function U(e){return new Promise(t=>{setTimeout(t,e)})}async function S(e){return await U(100),e}let C={userTexts:[],messageTexts:[],generateQueue:[],flowLabel:["主推送流"]};function T(){C={userTexts:[],messageTexts:[],generateQueue:[],flowLabel:["主推送流"]}}function L(e){return e<0||e>=C.userTexts.length?e.toString():C.userTexts[e].name}function W(e){return`[${e}]一句话总结这篇社媒博文。`}let j=!1;async function K(){if(j||void 0==C.generateQueue||0==C.generateQueue.length)return;const e=C.generateQueue[0];if(void 0==e)return;console.log("生成新消息"),j=!0,C.messageTexts.length-1<e&&C.messageTexts.push({title:"",content:"",minimumVersion:""});const t=d.messages[e];if(void 0!=t){let s="不感兴趣";t.v>.5&&(s="认同"),t.v<-.5&&(s="反对");const l=`${L(t.i)}对${L(t.j)}${s}。`,a="消息"+e.toString(),u=await S(W(l));C.messageTexts[e]={title:a,content:l,minimumVersion:u},localStorage.setItem("text",JSON.stringify(C)),i("generatedMessage",e,a,l),C.generateQueue.shift()}j=!1,console.log("消息生成完毕")}async function X(e){void 0!=C.generateQueue&&(e.id>=C.messageTexts.length||""==C.messageTexts[e.id].title)&&C.generateQueue.push(e.id)}const O={class:"username"};var I=(0,a.pM)({__name:"CanvasUser",props:{id:{},x:{},y:{},selected:{type:Boolean},focused:{type:Boolean},px:{},py:{},ps:{},badgeDefault:{},badgeInfo:{}},setup(e){const t=e;function s(){i("userPressed",t.id)}const l=d.userType[t.id];return(t,o)=>((0,a.uX)(),(0,a.CE)("div",{class:"canvas-user",style:(0,n.Tr)({left:(e.px+e.x)*e.ps-20+"px",top:(e.py+e.y)*e.ps-20+"px",outline:(e.selected?"2px":"1px")+" solid "+(e.focused?"#ff0":"#000"),"border-radius":(0==(0,u.R1)(l)?50:0)+"%"}),onClick:s},[(0,a.bF)((0,u.R1)(M.A),{value:e.badgeDefault,offset:[10,-5]},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(M.A),{value:e.badgeInfo,type:"info",offset:[10,30]},{default:(0,a.k6)(()=>[(0,a.Lk)("div",O,(0,n.v_)((0,u.R1)(L)(e.id)),1)]),_:1},8,["value"])]),_:1},8,["value"])],4))}}),$=s(1241);const E=(0,$.A)(I,[["__scopeId","data-v-3ecaf952"]]);var V=E;const G=150,P=1/60,B=100;var z=(0,a.pM)({__name:"GameCanvas",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=(0,u.KR)({users:[],selectedUsers:[],focusedUser:-1});r("resetProgress",()=>{t.value={users:[],selectedUsers:[],focusedUser:-1}});const s=(0,a.fn)(e,"modelValue"),l=(0,u.KR)(0),o=(0,u.KR)(0),i=(0,u.KR)(1);r("userPressed",e=>{if("user-edit"==s.value?.mode)return;let l=t.value.selectedUsers;l.includes(e)?t.value.focusedUser!=e?t.value.focusedUser=e:(t.value.selectedUsers=l.filter(t=>t!=e),t.value.focusedUser=-1):(t.value.focusedUser=e,l.push(e))});let v=!1,g=0,b=0,m=0,h=0,k=0,y=0,R=0,w=0,x=-1;function F(e){if(e.preventDefault(),1==e.touches.length){const t=e.touches[0];k=t.clientX,y=t.clientY,R=l.value,w=o.value}}function M(e){e.preventDefault(),0==e.touches.length&&(x=-1)}function A(e){if(e.preventDefault(),1==e.touches.length&&-1==x){const t=e.touches[0];m=t.clientX,h=t.clientY,l.value=m-k+R,o.value=h-y+w}else if(2==e.touches.length){const t=e.touches[0].clientX,s=e.touches[0].clientY,l=e.touches[1].clientX,a=e.touches[1].clientY,u=Math.sqrt((t-l)*(t-l)+(s-a)*(s-a));if(x>0){let e=.01*(u-x);e<-1&&(e=-1),e>1&&(e=1),e+=1,j((t+l)/2,(s+a)/2,e)}x=u}}function U(e){4==e.buttons&&(l.value+=e.movementX/i.value,o.value+=e.movementY/i.value),m=e.clientX,h=e.clientY,v=1==e.buttons}function S(e){1==e.buttons&&(v=!0,g=e.clientX,b=e.clientY),L=e.buttons}let C,T,L=0;function W(e){1==L&&(t.value.selectedUsers=[],t.value.focusedUser=-1),v&&Math.abs(m-g)>10&&Math.abs(h-b)>10&&(t.value.selectedUsers=t.value.users.filter(s=>{const a=(s.x+l.value)*i.value,u=(s.y+o.value)*i.value;let n=!!e.shiftKey&&t.value.selectedUsers.includes(s.id);return(a>g&&a<m||a>m&&a<g)&&(u>b&&u<h||u>h&&u<b)&&(n=!0),n}).map(e=>e.id)),v=!1}function j(e,t,s){let a=i.value,u=e/a-l.value,n=t/a-o.value;i.value*=s;let r=i.value,c=e/r-l.value,d=t/r-o.value;l.value+=c-u,o.value+=d-n}function K(e){let t=.01*e.wheelDelta;t<0&&(t+=2),t<0||t>2||j(e.clientX,e.clientY,t)}const X=P*B;function O(e,t,s,l,a,u,n){const o=s-e,r=l-t,i=o*o+r*r,c=Math.sqrt(i),d=G*u,v=15*n;let f=v*(c-d)/i*X;return a&&c>=d&&(f=0),{x:o*f,y:r*f}}function I(){const e=t.value.users;for(let t=0;t<d.userCount-1;t++){const s=e[t];for(let l=t+1;l<d.userCount;l++){const a=e[l],u=_(t,l);let n=O(s.x,s.y,a.x,a.y,u,u?1:.5,.5);s.vx+=n.x,s.vy+=n.y,a.vx-=n.x,a.vy-=n.y}}Object.values(t.value.users).forEach(e=>{e.vx*=1-.2*X,e.vy*=1-.2*X,e.vx-=.01*e.x*X,e.vy-=.01*e.y*X,e.x+=e.vx*X,e.y+=e.vy*X}),$()}function $(){if(void 0==s.value)return;if(C.width=window.innerWidth,C.height=window.innerHeight,s.value.editingUser>=0){const e=f(s.value.editingUser);Object.entries(e).forEach(([e,s])=>{const a=e.split("_"),u=parseInt(a[0],32),n=parseInt(a[1],32),r=t.value.users[u],d=t.value.users[n];let v=Math.abs(s);if(v>1&&(v=1),v<0)return;const f=(r.x+l.value)*i.value,p=(r.y+o.value)*i.value,g=(d.x+l.value)*i.value,b=(d.y+o.value)*i.value;c&&(T.strokeStyle="#000",T.font="16px Arial",T.fillText(s.toFixed(2).toString(),.5*(f+g),.5*(p+b)));const m=`#${s<0?"ff":"00"}00${s>=0?"ff":"00"}${Math.floor(255*v).toString(16).padStart(2,"0")}`;T.strokeStyle=m,T.beginPath(),T.moveTo(f,p),T.lineTo(g,b),T.stroke()})}else for(const s in d.subjectiveUserGraph){const e=parseInt(s),a=t.value.users[e];void 0!=a&&Object.entries(d.subjectiveUserGraph[e]).forEach(([s,u])=>{const n=s.split("_"),r=n[0];if(r!=e.toString())return;const c=parseInt(n[1],32),d=t.value.users[c];let v=Math.abs(u);v>1&&(v=1);const g=`#${u<0?"ff":"00"}00${u>=0?"ff":"00"}${Math.floor(255*v).toString(16).padStart(2,"0")}`,b=p(e,c,f(c));let m=Math.abs(b);m>1&&(m=1);const h=`#${b<0?"ff":"00"}00${b>=0?"ff":"00"}${Math.floor(255*m).toString(16).padStart(2,"0")}`,k=(a.x+l.value)*i.value,y=(a.y+o.value)*i.value,R=(d.x+l.value)*i.value,w=(d.y+o.value)*i.value,x=T.createLinearGradient(k,y,R,w);x.addColorStop(0,g),x.addColorStop(1,h),T.strokeStyle=x,T.beginPath(),T.moveTo(k,y),T.lineTo(R,w),T.stroke()})}const e=m-g,a=h-b;v&&Math.abs(e)>10&&Math.abs(a)>10&&(T.rect(g,b,e,a),T.fillStyle="#00000033",T.fill())}return(0,a.sV)(()=>{C=document.getElementById("lines"),T=C.getContext("2d"),setInterval(I,1e3*P),r("createdUser",e=>{t.value.users.push({id:e,x:e%2*100,y:100*Math.floor(e/2),vx:0,vy:0})}),r("removedUser",()=>{t.value.users.pop()})}),(e,u)=>((0,a.uX)(),(0,a.CE)("div",{class:"canvas",style:(0,n.Tr)({"background-size":20*i.value+"px "+20*i.value+"px","background-position":l.value*i.value+"px "+o.value*i.value+"px"})},[(0,a.Lk)("div",{class:"mouse-input-handler",onMousedown:S,onMouseup:W,onMousemove:U,onTouchstart:F,onTouchend:M,onTouchmove:A,onWheel:K},null,32),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value.users,e=>((0,a.uX)(),(0,a.Wv)(V,{key:e.id,id:e.id,x:e.x,y:e.y,px:l.value,py:o.value,ps:i.value,selected:t.value.selectedUsers.includes(e.id),focused:t.value.focusedUser==e.id,"badge-default":(e.id in(s.value?.uncollectedMessages??{})?s.value?.uncollectedMessages[e.id].length:0)??0,"badge-info":0},null,8,["id","x","y","px","py","ps","selected","focused","badge-default"]))),128)),u[0]||(u[0]=(0,a.Lk)("canvas",{id:"lines"},null,-1))],4))}});const D=(0,$.A)(z,[["__scopeId","data-v-08cb9044"]]);var Y=D,Q=s(2517),J=s(2151),N=s(123);const q={key:1},H={class:"author"},Z={key:1};var ee=(0,a.pM)({__name:"MessageCard",props:{msg:{}},setup(e){const t=e;let s=(0,u.KR)(""),l=(0,u.KR)("");setInterval(()=>{const e=C.messageTexts[t.msg.id];"undefined"!=typeof e&&""!=e.title&&(s.value=e.title,l.value=e.content)},1);return(t,o)=>((0,a.uX)(),(0,a.Wv)((0,u.R1)(Q.Ay),{class:"message-card",hoverable:""},{header:(0,a.k6)(()=>[""==(0,u.R1)(s)?((0,a.uX)(),(0,a.Wv)((0,u.R1)(J.A),{key:0,width:100,round:""})):((0,a.uX)(),(0,a.CE)("div",q,[(0,a.Lk)("h3",null,[(0,a.bF)((0,u.R1)(N.Ay),{"line-clamp":2},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)((0,u.R1)(s)),1)]),_:1})])]))]),"header-extra":(0,a.k6)(()=>[(0,a.RG)(t.$slots,"header-extra")]),action:(0,a.k6)(()=>[(0,a.RG)(t.$slots,"action")]),default:(0,a.k6)(()=>[(0,a.Lk)("div",H,(0,n.v_)((0,u.R1)(L)(e.msg.a))+" 发布于 "+(0,n.v_)(e.msg.t),1),""==(0,u.R1)(l)?((0,a.uX)(),(0,a.Wv)((0,u.R1)(J.A),{key:0,text:"",repeat:2})):((0,a.uX)(),(0,a.CE)("div",Z,[(0,a.Lk)("p",null,[(0,a.bF)((0,u.R1)(N.Ay),{"line-clamp":2},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)((0,u.R1)(l)),1)]),_:1})])])),(0,a.RG)(t.$slots,"suffix")]),_:3}))}});const te=(0,$.A)(ee,[["__scopeId","data-v-a1734486"]]);var se=te,le=s(5770),ae=(0,a.pM)({__name:"MessageList",props:(0,a.zz)({source:{},filter:{type:Function},select:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,s=(0,a.fn)(e,"modelValue");function l(){return[{title:"创作群体",key:"i"},{title:"时间",key:"t"},{title:"涉及群体",key:"j"},{title:"态度",key:"v"}]}let n=l();return t.select&&(n=[{type:"selection",multiple:!0,disabled:e=>!t.filter(d.messages[e.id])},...n]),(t,l)=>((0,a.uX)(),(0,a.Wv)((0,u.R1)(le.A),{"checked-row-keys":s.value,"onUpdate:checkedRowKeys":l[0]||(l[0]=e=>s.value=e),columns:(0,u.R1)(n),data:e.source,pagination:!1,bordered:!1,"row-key":e=>e.id,striped:""},null,8,["checked-row-keys","columns","data","row-key"]))}});const ue=ae;var ne=ue,oe=s(8140),re=s(7006),ie=s(8819),ce=s(3981),de=s(6815),ve=s(7966),fe=s(6693),pe=s(9310),ge=s(8122),be=s(7732),me=s(4526),he=s(6688),ke=s(4275),ye=s(9189),Re=s(496),we=s(1527),xe=s.n(we),_e=s(9387),Fe=s(3913),Me=(0,a.pM)({__name:"MessageFlow",props:(0,a.zz)({flow:{}},{source:{},sourceModifiers:{},label:{},labelModifiers:{}}),emits:["update:source","update:label"],setup(e){const t=(0,a.fn)(e,"source"),s=(0,a.fn)(e,"label");return(l,o)=>{const r=(0,a.g2)("center");return(0,a.uX)(),(0,a.Wv)((0,u.R1)(Q.Ay),{class:"flow noscroll"},{default:(0,a.k6)(()=>[(0,a.bF)(r,null,{default:(0,a.k6)(()=>[0==e.flow?((0,a.uX)(),(0,a.Wv)((0,u.R1)(_e.Ay),{key:0},{default:(0,a.k6)(()=>[...o[2]||(o[2]=[(0,a.eW)("主推送流",-1)])]),_:1})):((0,a.uX)(),(0,a.Wv)((0,u.R1)(Fe.A),{key:1,value:s.value,"onUpdate:value":o[0]||(o[0]=e=>s.value=e),size:"small",type:"text",placeholder:"自定义推送流"},null,8,["value"]))]),_:1}),(0,a.bF)((0,u.R1)(xe()),{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=e=>t.value=e),animation:"200","item-key":"element",group:"flow",style:{height:"100%"}},{item:(0,a.k6)(e=>[(0,a.Lk)("div",null,[(0,a.bF)(se,{msg:(0,u.R1)(d).messages[e.element]},{"header-extra":(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,n.v_)((t.value?.length??0)-e.index)+"x",1)]),_:2},1032,["msg"])])]),_:1},8,["modelValue"])]),_:1})}}});const Ae=Me;var Ue=Ae,Se=s(8802),Ce=s(8051),Te=s(3998),Le=s(1055),We=s(3994),je=s(7838);const Ke={class:"app"},Xe={class:"flows"},Oe={class:"pagebottom"},Ie={class:"buttons"},$e={class:"score"},Ee={class:"buttons"};var Ve=(0,a.pM)({__name:"App",setup(e){(0,a.sV)(()=>{window.addEventListener("beforeunload",()=>{localStorage.setItem("appstate",JSON.stringify(t.value)),localStorage.setItem("progress",JSON.stringify(d))}),O()});const t=(0,u.KR)({mode:"user-edit",editingUser:-1,uncollectedMessages:{},flows:[[]],messageStatistic:[]}),s=(0,u.KR)(!1),l=(0,u.KR)(!1),o=(0,u.KR)(d.messages);function i(e){return o.value.filter(t=>t.i==e)}const c=(0,u.KR)([]);function p(e){if(c.value.includes(e))return"";const t=C.flowLabel.indexOf(e);return void 0==t||t<=0?"":e}const m=(0,u.KR)(null);(0,a.wB)(m,e=>{e&&(0,a.dY)(()=>e.focus())});const h=(0,u.KR)(""),k=(0,a.EW)(()=>null===h.value?[]:C.flowLabel.filter(e=>!c.value.includes(e)&&e.includes(h.value)).map(e=>({label:e,value:e})));function y(e){t.value.uncollectedMessages[e.a]=t.value.uncollectedMessages[e.a].filter(t=>t!=e.id)}function R(e){y(e),t.value.flows[0].push(e.id)}function w(){d.time+=1,W.value=d.time,t.value.uncollectedMessages={};for(let e=0;e<t.value.flows.length;e++)b(t.value.flows[e],e),t.value.flows[e]=[];x(),0==Object.keys(t.value.uncollectedMessages).length?j.value=!0:t.value.messageStatistic.length>0&&(t.value.messageStatistic=t.value.messageStatistic.sort((e,t)=>t.exposure-e.exposure),A.value=!0)}r("userPressed",e=>{if(0==d.userType[e]&&"user-edit"==t.value.mode){s.value=!0,t.value.editingUser=e;while(d.userFlowTags.length<=e)d.userFlowTags.push([]);c.value=d.userFlowTags[e].map(e=>C.flowLabel[e])}}),r("addedMessage",e=>{e.a in t.value.uncollectedMessages||(t.value.uncollectedMessages[e.a]=[]),t.value.uncollectedMessages[e.a].push(e.id)}),r("addedMessage",e=>X(e)),setInterval(()=>{K()},1e3),setInterval(()=>{_.value=window.innerWidth},1);const _=(0,u.KR)(0);function M(e){for(let s=0;s<t.value.messageStatistic.length;s++)if(t.value.messageStatistic[s].msg==e)return s;return t.value.messageStatistic.push({msg:e,views:0,likes:0,exposure:0,score:0}),t.value.messageStatistic.length-1}r("viewedMessage",(e,s)=>{t.value.messageStatistic[M(e)].views=s}),r("likedMessage",(e,s)=>{t.value.messageStatistic[M(e)].likes=s}),r("messageKnownExposure",(e,s)=>{t.value.messageStatistic[M(e)].exposure=s}),r("messageGainedScore",(e,s)=>{t.value.messageStatistic[M(e)].score=s,d.score+=s,S.value=d.score,U+=s});const A=(0,u.KR)(!1);let U=0;const S=(0,u.KR)(0),W=(0,u.KR)(0),j=(0,u.KR)(!1);function O(){F(0),F(0),F(0),F(0);for(let e=0;e<d.userCount;e++){const t=f(e);for(let s=0;s<4;s++)g(e,s,2*(2*Math.random()-1),t)}C.userTexts.push({name:"A",prompt:""},{name:"B",prompt:""},{name:"C",prompt:""},{name:"D",prompt:""}),w()}return r("resetProgress",()=>{t.value={mode:"user-edit",editingUser:-1,uncollectedMessages:{},flows:[[]],messageStatistic:[]},W.value=0,S.value=0,T(),O()}),(e,o)=>{const r=(0,a.g2)("center");return(0,a.uX)(),(0,a.CE)("div",Ke,[(0,a.bF)(Y,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e),ref:"canvas"},null,8,["modelValue"]),(0,a.bF)((0,u.R1)(oe.A),{show:A.value,"onUpdate:show":o[1]||(o[1]=e=>A.value=e),preset:"card",style:{width:"600px"},title:`第${(0,u.R1)(d).time}回合统计`,size:"huge",bordered:!1,onUpdateShow:o[2]||(o[2]=e=>{e||(t.value.messageStatistic=[],(0,u.i9)(U)?U.value=0:U=0)})},{default:(0,a.k6)(()=>[(0,a.bF)(r,null,{default:(0,a.k6)(()=>[o[15]||(o[15]=(0,a.Lk)("h3",null,"总得分",-1)),(0,a.Lk)("h1",null,[(0,a.bF)((0,u.R1)(re.A),{to:Math.floor((0,u.R1)(U))},null,8,["to"])])]),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value.messageStatistic,e=>((0,a.uX)(),(0,a.Wv)(se,{key:e.msg,msg:(0,u.R1)(d).messages[e.msg]},{suffix:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(ie.Ay),null,{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(ce.Ay),{span:12},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(de.A),{label:"浏览",value:e.views.toFixed(3)},{prefix:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(ve._),null,{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(Se.A))]),_:1})]),suffix:(0,a.k6)(()=>[...o[16]||(o[16]=[(0,a.eW)("K",-1)])]),_:1},8,["value"])]),_:2},1024),(0,a.bF)((0,u.R1)(ce.Ay),{span:12},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(de.A),{label:"点赞",value:(e.likes*(Math.abs(Math.random()-.8)+.8)).toFixed(3)},{prefix:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(ve._),null,{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(Ce.A))]),_:1})]),suffix:(0,a.k6)(()=>[...o[17]||(o[17]=[(0,a.eW)("K",-1)])]),_:1},8,["value"])]),_:2},1024),(0,a.bF)((0,u.R1)(ce.Ay),{span:12},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(de.A),{label:"曝光倍率",value:e.exposure},{prefix:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(ve._),null,{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(Te.A))]),_:1})]),suffix:(0,a.k6)(()=>[...o[18]||(o[18]=[(0,a.eW)("x",-1)])]),_:1},8,["value"])]),_:2},1024),(0,a.bF)((0,u.R1)(ce.Ay),{span:12},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(de.A),{label:"得分",value:e.score.toFixed()},{prefix:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(ve._),null,{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(Le.A))]),_:1})]),_:1},8,["value"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["msg"]))),128))]),_:1},8,["show","title"]),(0,a.bF)((0,u.R1)(fe.A),{show:l.value,"onUpdate:show":o[6]||(o[6]=e=>l.value=e),width:_.value,placement:"left"},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(pe.A),null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",Xe,[(0,a.bF)((0,u.R1)(ge.A),{class:"noscroll",style:{"flex-grow":"1","overflow-y":"scroll"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value.flows.length,(e,s)=>((0,a.uX)(),(0,a.Wv)(Ue,{key:s,label:(0,u.R1)(C).flowLabel[s],"onUpdate:label":e=>(0,u.R1)(C).flowLabel[s]=e,source:t.value.flows[s],"onUpdate:source":e=>t.value.flows[s]=e,flow:s},null,8,["label","onUpdate:label","source","onUpdate:source","flow"]))),128)),(0,a.bF)((0,u.R1)(Q.Ay),{class:"flowControl"},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(ge.A),{vertical:""},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(be.Ay),{onClick:o[3]||(o[3]=e=>t.value.flows.push([]))},{default:(0,a.k6)(()=>[...o[19]||(o[19]=[(0,a.eW)("添加",-1)])]),_:1}),(0,a.bF)((0,u.R1)(be.Ay),{onClick:o[4]||(o[4]=e=>t.value.flows.pop()),disabled:t.value.flows.length<=1},{default:(0,a.k6)(()=>[...o[20]||(o[20]=[(0,a.eW)("移除",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),o[21]||(o[21]=(0,a.Lk)("div",{style:{"border-top":"1px solid gainsboro",height:"8px"}},null,-1)),(0,a.bF)((0,u.R1)(me.A),{subtitle:"推送流",onBack:o[5]||(o[5]=e=>l.value=!1)})])]),_:1})]),_:1},8,["show","width"]),(0,a.bF)((0,u.R1)(fe.A),{class:"user-editor-container",show:s.value,"onUpdate:show":o[10]||(o[10]=e=>s.value=e),width:_.value>500?500:_.value,onUpdateShow:o[11]||(o[11]=e=>{e||((0,u.R1)(d).userFlowTags[t.value.editingUser]=c.value.map(e=>(0,u.R1)(C).flowLabel.indexOf(e)).filter(e=>e>0),console.log((0,u.R1)(d).userFlowTags[t.value.editingUser]),t.value.editingUser=-1)})},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(pe.A),{"native-scrollbar":!1},{header:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(me.A),{subtitle:"用户分析",onBack:o[7]||(o[7]=e=>s.value=!1)}),(0,a.Lk)("h1",null,"#"+(0,n.v_)((0,u.R1)(L)(t.value.editingUser)),1)]),default:(0,a.k6)(()=>[(0,a.Lk)("p",null,[(0,a.bF)((0,u.R1)(he.A),{value:c.value,"onUpdate:value":o[9]||(o[9]=e=>c.value=e),onCreate:p},{input:(0,a.k6)(({submit:e,deactivate:t})=>[(0,a.bF)((0,u.R1)(ke.A),{ref_key:"autoCompleteInstRef",ref:m,value:h.value,"onUpdate:value":o[8]||(o[8]=e=>h.value=e),size:"small",options:k.value,placeholder:"添加订阅","clear-after-select":!0,onSelect:t=>e(t),onBlur:t},null,8,["value","options","onSelect","onBlur"])]),_:1},8,["value"])]),(0,a.bF)((0,u.R1)(ye.A),{class:"user-editor",type:"segment",animated:""},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(Re.A),{name:"new",tab:"最新发言"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value.uncollectedMessages[t.value.editingUser],e=>((0,a.uX)(),(0,a.Wv)(se,{msg:(0,u.R1)(d).messages[e],key:e},{action:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(ge.A),{justify:"space-between"},{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(be.Ay),{onClick:t=>R((0,u.R1)(d).messages[e])},{default:(0,a.k6)(()=>[...o[22]||(o[22]=[(0,a.eW)("收集",-1)])]),_:1},8,["onClick"]),(0,a.bF)((0,u.R1)(be.Ay),{onClick:t=>y((0,u.R1)(d).messages[e])},{default:(0,a.k6)(()=>[...o[23]||(o[23]=[(0,a.eW)("忽略",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["msg"]))),128))]),_:1}),(0,a.bF)((0,u.R1)(Re.A),{name:"history",tab:"历史发言"},{default:(0,a.k6)(()=>[(0,a.bF)(ne,{source:i(t.value.editingUser),filter:e=>!0,select:!1},null,8,["source"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show","width"]),(0,a.Lk)("div",Oe,[(0,a.Lk)("div",Ie,[(0,a.bF)((0,u.R1)(be.Ay),{round:"",type:"primary",size:"large",onClick:o[12]||(o[12]=e=>l.value=!0)},{default:(0,a.k6)(()=>[...o[24]||(o[24]=[(0,a.eW)("编辑推送流",-1)])]),_:1})]),(0,a.Lk)("div",$e,[(0,a.bF)((0,u.R1)(ve._),null,{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(We.A))]),_:1}),(0,a.eW)(" "+(0,n.v_)(W.value)+" ",1),(0,a.bF)((0,u.R1)(ve._),null,{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(je.A))]),_:1}),o[25]||(o[25]=(0,a.eW)()),(0,a.bF)((0,u.R1)(re.A),{to:S.value},null,8,["to"])]),(0,a.Lk)("div",Ee,[(0,a.bF)((0,u.R1)(be.Ay),{round:"",type:"primary",size:"large",onClick:w},{default:(0,a.k6)(()=>[...o[26]||(o[26]=[(0,a.eW)("结束回合",-1)])]),_:1})])]),(0,a.bF)((0,u.R1)(oe.A),{show:j.value,"onUpdate:show":o[14]||(o[14]=e=>j.value=e),preset:"card",style:{width:"600px"},title:"游戏结束",size:"huge",bordered:!1,"mask-closable":!1},{default:(0,a.k6)(()=>[(0,a.Lk)("p",null,[o[27]||(o[27]=(0,a.eW)("你的网络在第",-1)),(0,a.Lk)("b",null,(0,n.v_)(W.value),1),o[28]||(o[28]=(0,a.eW)("回合安静下来了，你的得分是",-1)),(0,a.Lk)("b",null,(0,n.v_)(S.value),1),o[29]||(o[29]=(0,a.eW)("。",-1))]),(0,a.bF)(r,null,{default:(0,a.k6)(()=>[(0,a.bF)((0,u.R1)(be.Ay),{onClick:o[13]||(o[13]=e=>{j.value=!1,(0,u.R1)(v)()})},{default:(0,a.k6)(()=>[...o[30]||(o[30]=[(0,a.eW)("重新开始",-1)])]),_:1})]),_:1})]),_:1},8,["show"])])}}});const Ge=Ve;var Pe=Ge;(0,l.Ef)(Pe).mount("#app")}},t={};function s(l){var a=t[l];if(void 0!==a)return a.exports;var u=t[l]={exports:{}};return e[l].call(u.exports,u,u.exports,s),u.exports}s.m=e,function(){var e=[];s.O=function(t,l,a,u){if(!l){var n=1/0;for(c=0;c<e.length;c++){l=e[c][0],a=e[c][1],u=e[c][2];for(var o=!0,r=0;r<l.length;r++)(!1&u||n>=u)&&Object.keys(s.O).every(function(e){return s.O[e](l[r])})?l.splice(r--,1):(o=!1,u<n&&(n=u));if(o){e.splice(c--,1);var i=a();void 0!==i&&(t=i)}}return t}u=u||0;for(var c=e.length;c>0&&e[c-1][2]>u;c--)e[c]=e[c-1];e[c]=[l,a,u]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var l in t)s.o(t,l)&&!s.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,u,n=l[0],o=l[1],r=l[2],i=0;if(n.some(function(t){return 0!==e[t]})){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(r)var c=r(s)}for(t&&t(l);i<n.length;i++)u=n[i],s.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return s.O(c)},l=self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=s.O(void 0,[504],function(){return s(9688)});l=s.O(l)})();
//# sourceMappingURL=app.82e491e9.js.map