{"version":3,"file":"js/app.8f057a8b.js","mappings":"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","sources":["webpack://vue-project/./src/event.ts","webpack://vue-project/./src/game.ts","webpack://vue-project/./src/llm.ts","webpack://vue-project/./src/text.ts","webpack://vue-project/./src/components/CanvasUser.vue?4afb","webpack://vue-project/./src/components/CanvasUser.vue","webpack://vue-project/./src/components/CanvasUser.vue?7b96","webpack://vue-project/./src/components/GameCanvas.vue","webpack://vue-project/./src/components/GameCanvas.vue?d007","webpack://vue-project/./src/components/GameCanvas.vue?cf9f","webpack://vue-project/./src/components/MessageCard.vue?0f40","webpack://vue-project/./src/components/MessageCard.vue","webpack://vue-project/./src/components/MessageCard.vue?3d29","webpack://vue-project/./src/components/MessageList.vue?13dd","webpack://vue-project/./src/components/MessageList.vue","webpack://vue-project/./src/components/MessageList.vue?2e85","webpack://vue-project/./src/components/MessageFlow.vue?6cd4","webpack://vue-project/./src/components/MessageFlow.vue","webpack://vue-project/./src/components/MessageFlow.vue?8110","webpack://vue-project/./src/App.vue?2a5e","webpack://vue-project/./src/App.vue","webpack://vue-project/./src/App.vue?7ccd","webpack://vue-project/./src/main.ts","webpack://vue-project/webpack/bootstrap","webpack://vue-project/webpack/runtime/chunk loaded","webpack://vue-project/webpack/runtime/compat get default export","webpack://vue-project/webpack/runtime/define property getters","webpack://vue-project/webpack/runtime/global","webpack://vue-project/webpack/runtime/hasOwnProperty shorthand","webpack://vue-project/webpack/runtime/make namespace object","webpack://vue-project/webpack/runtime/jsonp chunk loading","webpack://vue-project/webpack/startup"],"sourcesContent":["const events:Record<string, Record<string, (...params:any[])=>void>> = {}\nexport function subscribe(event:string, action:(...params:any[])=>void):number\n{\n    if (!(event in events))\n    {\n        events[event] = {}\n    }\n    const key = Object.keys(events[event]).length-1;\n    events[event][key] = action;\n    return key;\n}\nexport function desubscribe(event:string, key:number):void\n{\n    if (event in events)\n    {\n        delete events[event][key];\n    }\n}\nexport function emit(event:string, ...args:any[]):void\n{\n    if (event in events)\n    {\n        Object.values(events[event]).forEach(action => {\n            action(...args);\n        });\n    }\n}","import { emit } from \"./event\";\n\nexport interface Message {id:number, i:number, j:number, v:number, t:number}\n\nexport interface Progress{\n  userMemory: Record<number, Array<number>>;\n  subjectiveUserGraph: Record<number, Record<string, number>>;\n  messages: Array<Message>;\n  userCount: number;\n  userType: Array<number>;\n  userFlowTags: Array<Array<number>>;\n  time: number;\n}\n\nexport let debugMode = false;\n\nexport let progress:Progress = {\n  userMemory: {},\n  subjectiveUserGraph: {},\n  messages: [],\n  userType: [],\n  userCount: 0,\n  userFlowTags: [],\n  time: 0\n}\n\nexport function setProgress(newProgress:Progress)\n{\n  emit(\"resetProgress\");\n  progress = newProgress;\n  for(let i=0;i<progress.userCount;i++)\n  {\n    emit(\"createdUser\",i);\n  }\n  progress.messages.forEach(msg => {\n    emit('addedMessage', msg);\n  });\n}\n\nexport function getSubjectUserGraph(user:number):Record<string,number>\n{\n  if (!(user in progress.subjectiveUserGraph))\n  {\n    progress.subjectiveUserGraph[user] = {};\n  }\n  return progress.subjectiveUserGraph[user];\n}\n\nexport function rGetIn(a:number,b:number,graph:Record<string,number>):number\n{\n  if(a>b){\n    return rGetIn(b,a,graph);\n  }\n  const k = a.toString(32)+'_'+b.toString(32);\n  if (!(k in graph)) {\n    return 0;\n  }\n  return graph[k];\n}\n\nexport function rSetIn(a:number,b:number,v:number,graph:Record<string,number>)\n{\n  if(a>b) {\n    rSetIn(b,a,v,graph);\n    return;\n  }\n  const k = a.toString(32)+'_'+b.toString(32);\n  graph[k] = v;\n}\n\nexport function processPushTask(tasks:Array<number>,flow:number)\n{\n  for(let user=0;user<progress.userCount;user++)\n  {\n    if (progress.userType[user]!=0) continue;\n    const flowTags = progress.userFlowTags[user];\n    if (flow!=0&&(flowTags==undefined||!flowTags.includes(flow))) continue;\n    for(const msgId of tasks){\n      pushMsgToUser(progress.messages[msgId], user);\n    }\n  }\n}\n\nexport function createMessage(i:number, j:number, v:number)\n{\n  const msg = {id:progress.messages.length,i,j,v,t:progress.time};\n  progress.messages.push(msg);\n  emit('addedMessage', msg);\n}\n\nfunction changeAttitude(user:number, target:number, d:number):number\n{\n  const graph = getSubjectUserGraph(user);\n  const value=rGetIn(user,target,graph)+d;\n  rSetIn(user,target,value,graph);\n  if (Math.abs(d)>0.5) createMessage(user,target,value);\n  return d;\n}\n\nfunction updateUser(user:number)\n{\n  console.log(`update ${user}`);\n  let maxIPD = 0;\n  let maxIPD_o = -1;\n  for(let o=0;o<progress.userCount;o++)\n  {\n    const IPD = instabilityPartialD(user, o);\n    console.log(`IPD(${user},${o})=${IPD}`);\n    if (Math.abs(IPD) > Math.abs(maxIPD))\n    {\n      maxIPD = IPD;\n      maxIPD_o = o;\n    }\n  }\n  if(maxIPD_o>=0)\n    {\n      maxIPD = Math.atan(maxIPD);\n      console.log(`maxIPD=${maxIPD},maxIPD_o=${maxIPD_o}`);\n      changeAttitude(user, maxIPD_o, -1/maxIPD);\n  }\n}\n\nfunction instability(p:number)\n{\n  const G = getSubjectUserGraph(p);\n  let s = 0;\n  for(let x=0;x<progress.userCount;x++)\n  {\n    const Gpx = rGetIn(p,x,G);\n    for(let o=0;o<progress.userCount;o++)\n    {\n      const Gpo = rGetIn(p,o,G);\n      const Gox = rGetIn(o,x,G);\n      const i = Gpo*Gox-Gpx;\n      s+=i*i;\n    }\n  }\n  return s;\n}\n\n// function instabilityPartialD(p:number,o:number)\n// {\n//   const dGpo = 0.01;\n//   const pdir = instabilitydGpo(p,o,dGpo);\n//   const ndir = instabilitydGpo(p,o,-dGpo);\n//   return (pdir + ndir) * 0.5;\n// }\n\nfunction instabilityPartialD(p:number,o:number)\n{\n  const G = getSubjectUserGraph(p);\n  let d = 0;\n  const Gpo = rGetIn(p,o,G);\n  for(let x=0;x<progress.userCount;x++)\n  {\n    const Gox = rGetIn(o,x,G);\n    const Gpx = rGetIn(p,x,G);\n    d+=Gox*(Gpo*Gox-Gpx);\n    d-=Gpx*Gox-Gpo;\n  }\n  const GooSub = rGetIn(o,o,G)-1;\n  d-=Gpo*GooSub*GooSub;\n  return d;\n}\n\nexport function pushMsgToUser(msg:Message, user:number)\n{\n  if(!(user in progress.userMemory))\n  {\n    progress.userMemory[user] = [];\n  }\n  progress.userMemory[user].push(msg.id);\n  const graph = getSubjectUserGraph(user);\n  const oldInstability = instability(user);\n  rSetIn(msg.i,msg.j,msg.v,graph);\n  const newInstability = instability(user);\n  const d = oldInstability - newInstability;\n  console.log('d:',d);\n  emit('viewedMessage', msg.id, Math.abs(d));\n  emit('likedMessage', msg.id, d>0?d:(Math.random()*Math.abs(d)*0.5));\n}\n\nexport function updateUsers()\n{\n  for(let i=0;i<progress.userCount;i++)\n  {\n    if(progress.userType[i]!=0) continue;\n    updateUser(i);\n  }\n}\n\nexport function getRepulsion(i:number, j:number):boolean\n{\n    const rij=(a:number,b:number)=>Math.abs(rGetIn(a,b,getSubjectUserGraph(a)))<0.5;\n    let repulsion = rij(i,j);\n    if (!repulsion)\n    {\n        let innerRepulsion = false;\n        for(let d=1;d<j-i&&!innerRepulsion;d++)\n        {\n            innerRepulsion = !rij(i,i+d)&&!rij(i+d,j);\n        }\n        let outterRepulsion = false;\n        for(let d=1;d<i-j+progress.userCount&&!outterRepulsion;d++)\n        {\n            let o = j+d;\n            if (o >= progress.userCount)\n            {\n                o -= progress.userCount;\n            }\n            outterRepulsion = !rij(o,i)&&!rij(j,o);\n        }\n        repulsion = innerRepulsion && outterRepulsion;\n    }\n    return repulsion;\n}\n\nexport function createUser(type:number)\n{\n    const id = progress.userCount;\n    progress.userCount += 1;\n    progress.userType.push(type);\n    emit(\"createdUser\",id);\n}\n\nexport function removeUser()\n{\n  progress.userCount -= 1;\n  progress.userType.pop();\n  emit(\"removedUser\");\n}\n\nexport default {}\n\nexport function executeCommand(cmd:string[])\n{\n  if (cmd[0]=='debug')\n  {\n    debugMode = !debugMode;\n  }\n}","import OpenAI from \"openai\"\n\nconst client = new OpenAI({\n    apiKey: \"sk-uFDUPAriuBg6l84rhrFxcRect2V0gpH59KVXj8dxG6wblr5p\",\n    baseURL: \"http://localhost:8080/llmapi\",\n    dangerouslyAllowBrowser: true\n})\n\nfunction delay(ms:number) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport async function chat(msg:string)\n{\n    await delay(100);\n    return msg;\n    for (let attempt = 1; attempt <= 2; attempt++) {\n        try {\n            const completion = await client.chat.completions.create({\n                model: \"kimi-k2-turbo-preview\",\n                messages: [\n                    {\"role\": \"system\", \"content\": msg},\n                ],\n                temperature: 0.6,\n            })\n            return completion.choices[0].message.content??\"\";\n        }\n        catch (e)\n        {\n            await delay(5000);\n            console.error(e);\n        }\n    }\n    return \"\";\n}","import { emit } from \"./event\"\nimport { Message, progress } from \"./game\"\nimport { chat } from \"./llm\"\n\nexport interface UserText {\n    name:string,\n    prompt:string\n}\nexport interface MessageText {\n    title: string,\n    content: string,\n    minimumVersion: string\n}\n\nexport const text:{\n    userTexts:Array<UserText>,\n    messageTexts:Array<MessageText>,\n    generateQueue:Array<number>,\n    flowLabel:Array<string>\n}={\n    userTexts: [],\n    messageTexts: [],\n    generateQueue: [],\n    flowLabel: ['主推送流']\n}\n\nconst textSource = localStorage.getItem('text');\nif (textSource != null)\n{\n    // text = JSON.parse(textSource);\n}\n\nfunction getUserText(id:number):UserText\n{\n    if (id >= 0 && id < text.userTexts.length) return text.userTexts[id];\n    return {\n        name: '',\n        prompt: ''\n    }\n}\n\nexport function getUserName(id:number):string\n{\n    if (id<0 || id>=text.userTexts.length) return id.toString();\n    return text.userTexts[id].name\n}\n\nfunction getFullUserPrompt(id:number)\n{\n    // const basicPrompt = getUserText(id).prompt;\n    let historyContainer = \"\";\n    if (id in progress.userMemory && progress.userMemory[id].length>0)\n    {\n        historyContainer = `你需要参考的信息：[${progress.userMemory[id].filter(m=>m<text.messageTexts.length).map(m=>text.messageTexts[m].minimumVersion).join()}]。`;\n    }\n    return `${historyContainer}`;\n}\n\nconst traits:Array<string> = [\"神经质\",\"幽默\",\"严肃\"];\n\nfunction randomPick(arr:Array<string>):string\n{\n    return arr[Math.floor(Math.random()*traits.length)];\n}\n\nfunction getRelationshipDiffDescribe(relationship:number,other:string):string\n{\n    if (relationship > 0.5) return `对${other}的认同`;\n    if (relationship < 0.5) return `反对${other}`;\n    return `对社交媒体平台推送机制的反感`;\n}\nfunction getRelationshipDescribe(relationship:number):string\n{\n    if (relationship > 0.5) return \"认同\";\n    if (relationship < 0.5) return \"排斥\";\n    return \"不感兴趣\";\n}\n\nfunction getMessageContentPrompt(msg:Message):string\n{\n    return `扮演一名社交媒体用户虚构贴文。你的个性：${randomPick(traits)}。${getFullUserPrompt(msg.i)}要求1：长度1句话。要求2：站在${getUserText(msg.i).prompt}的视角表达你${getRelationshipDiffDescribe(msg.v,getUserText(msg.j).prompt)}。`;\n}\n\nfunction getMessageTitlePrompt(content:string):string\n{\n    return `[${content}]扮演作者，选择1个短语作为标题，不要出现任何标点符号。`;\n}\nfunction getMessageMinimumVersionPrompt(content:string):string\n{\n    return `[${content}]一句话总结这篇社媒博文。`;\n}\n\nlet generating = false;\n\nexport async function processGenerateQueue()\n{\n    if (generating || text.generateQueue == undefined || text.generateQueue.length==0) return;\n    const msg = text.generateQueue[0];\n    if (msg==undefined) return;\n    console.log(\"生成新消息\");\n    generating = true;\n    if (text.messageTexts.length - 1 < msg)\n    {\n        text.messageTexts.push({\n            title: \"\",\n            content: \"\",\n            minimumVersion: \"\"\n        });\n    }\n    // const content = await chat(getMessageContentPrompt(progress.messages[msg]));\n    // const title = await chat(getMessageTitlePrompt(content));\n    const msgObj = progress.messages[msg];\n    let describe = '不感兴趣'\n    if (msgObj.v>0.5) describe='认同';\n    if (msgObj.v<-0.5) describe='反对';\n    const content = `我对${getUserName(msgObj.j)}${describe}。`;\n    const title = \"消息\"+msg.toString();\n    const minimumVersion = await chat(getMessageMinimumVersionPrompt(content));\n    text.messageTexts[msg] = {title, content, minimumVersion}\n    localStorage.setItem('text', JSON.stringify(text));\n    emit(\"generatedMessage\", msg, title, content);\n    text.generateQueue.shift();\n    generating = false;\n    console.log(\"消息生成完毕\");\n}\n\nexport async function startGenerateMessage(msg:Message)\n{\n    if (text.generateQueue != undefined && (msg.id>=text.messageTexts.length || text.messageTexts[msg.id].title == ''))\n    {\n        text.generateQueue.push(msg.id);\n    }\n}\n\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"username\" }\n\nimport { emit } from '@/event';\n\nimport { NBadge } from 'naive-ui';\nimport { getUserName } from '@/text';\nimport { progress } from '@/game';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CanvasUser',\n  props: {\n    id: {},\n    x: {},\n    y: {},\n    selected: { type: Boolean },\n    focused: { type: Boolean },\n    px: {},\n    py: {},\n    ps: {},\n    badgeDefault: {},\n    badgeInfo: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\nfunction onClick()\n{\n  emit('userPressed', props.id);\n}\nconst type=progress.userType[props.id];\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"canvas-user\",\n    style: _normalizeStyle({left: (__props.px + __props.x) * __props.ps - 20 + 'px', top: (__props.py + __props.y) * __props.ps - 20 + 'px', outline: (__props.selected?'2px':'1px') + ' solid '+ (__props.focused?'#ff0':'#000'), 'border-radius': ((_unref(type)==0)?50:0)+'%'}),\n    onClick: onClick\n  }, [\n    _createVNode(_unref(NBadge), {\n      value: __props.badgeDefault,\n      offset: [10,-5]\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NBadge), {\n          value: __props.badgeInfo,\n          type: 'info',\n          offset: [10,30]\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_1, _toDisplayString(_unref(getUserName)(__props.id)), 1)\n          ]),\n          _: 1\n        }, 8, [\"value\"])\n      ]),\n      _: 1\n    }, 8, [\"value\"])\n  ], 4))\n}\n}\n\n})","<template>\n  <div class=\"canvas-user\" :style=\"{left: (px + x) * ps - 20 + 'px', top: (py + y) * ps - 20 + 'px', outline: (selected?'2px':'1px') + ' solid '+ (focused?'#ff0':'#000'), 'border-radius': ((type==0)?50:0)+'%'}\"\n  @click=\"onClick\"\n  >\n    <n-badge :value=\"badgeDefault\" :offset=\"[10,-5]\">\n    <n-badge :value=\"badgeInfo\" :type=\"'info'\" :offset=\"[10,30]\">\n    <div class=\"username\">{{ getUserName(id) }}</div>\n    </n-badge>\n    </n-badge>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { emit } from '@/event';\nimport { defineProps } from 'vue'\nimport { NBadge } from 'naive-ui';\nimport { getUserName } from '@/text';\nimport { progress } from '@/game';\nconst props = defineProps<{\n  id: number,\n  x: number,\n  y: number,\n  selected: boolean,\n  focused: boolean,\n  px: number,\n  py: number,\n  ps: number,\n  badgeDefault: number,\n  badgeInfo: number\n}>();\nfunction onClick()\n{\n  emit('userPressed', props.id);\n}\nconst type=progress.userType[props.id];\n</script>\n\n<style scoped>\n.canvas-user\n{\n  position: absolute;\n  outline: 1px solid #000;\n  background: #fff;\n  color: #000;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  -webkit-user-drag: none;\n  cursor: pointer;\n}\n.username\n{\n  margin: auto;\n  font-weight: bold;\n  text-wrap-mode: nowrap;\n}\n</style>","import script from \"./CanvasUser.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CanvasUser.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CanvasUser.vue?vue&type=style&index=0&id=3ecaf952&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3ecaf952\"]])\n\nexport default __exports__","<template>\n<div class=\"canvas\"\n:style=\"{'background-size': 20*s+'px '+20*s+'px', 'background-position': x*s+'px '+y*s+'px'}\">\n    <div class=\"mouse-input-handler\" @mousedown=\"onMousedown\" @mouseup=\"onMouseup\" @mousemove=\"onMousemove\" @touchstart=\"onTouchStart\" @touchend=\"onTouchEnd\" @touchmove=\"onTouchMove\" @wheel=\"onWheel\"></div>\n    <CanvasUser v-for=\"user in state.users\" :key=\"user.id\"\n    :id=\"user.id\" :x=\"user.x\" :y=\"user.y\" :px=\"x\" :py=\"y\" :ps=\"s\" :selected=\"state.selectedUsers.includes(user.id)\" :focused=\"state.focusedUser==user.id\"\n    :badge-default=\"(user.id in appState.uncollectedMessages)?appState.uncollectedMessages[user.id].length:0\"\n    :badge-info=\"0\"\n    />\n    <canvas id=\"lines\"/>\n</div>\n</template>\n\n<script setup lang=\"ts\">\nimport { debugMode, getRepulsion, getSubjectUserGraph, progress, rGetIn } from '../game'\nimport { defineProps, onMounted, Ref, ref } from 'vue'\nimport CanvasUser from './CanvasUser.vue'\nimport { subscribe } from '../event'\nimport { AppState } from '@/App.vue';\ntype User = {\n    id: number;\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n};\nconst state:Ref<{\n    users: Array<User>,\n    selectedUsers: Array<number>\n    focusedUser: number\n}> = ref({\n  users: [],\n  selectedUsers: [],\n  focusedUser: -1\n})\n\nconst props = defineProps<{appState:AppState}>();\n\nconst x = ref(0);\nconst y = ref(0);\nconst s = ref(1);\nsubscribe('userPressed', (id)=>\n{\n    if (props.appState.mode == 'user-edit') return;\n    let selectedUsers = state.value.selectedUsers;\n    if (selectedUsers.includes(id))\n    {\n        if (state.value.focusedUser != id)\n        {\n            state.value.focusedUser = id;\n        }\n        else\n        {\n            state.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n            state.value.focusedUser = -1;\n        }\n    }\n    else{\n        state.value.focusedUser = id;\n        selectedUsers.push(id);\n    }\n})\n\nlet multiSelecting = false;\nlet multiSelectStartX = 0;\nlet multiSelectStartY = 0;\nlet mouseX = 0;\nlet mouseY = 0;\nlet touchStartX = 0;\nlet touchStartY = 0;\nlet touchStartCanvasX = 0;\nlet touchStartCanvasY = 0;\nlet touchesDistance = -1;\n\nfunction onTouchStart(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1)\n    {\n        const touch = e.touches[0];\n        touchStartX = touch.clientX;\n        touchStartY = touch.clientY;\n        touchStartCanvasX = x.value;\n        touchStartCanvasY = y.value;\n    }\n}\n\nfunction onTouchEnd(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 0)\n    {\n        touchesDistance = -1;\n    }\n}\n\nfunction onTouchMove(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1 && touchesDistance == -1)\n    {\n        const touch = e.touches[0];\n        mouseX = touch.clientX;\n        mouseY = touch.clientY;\n        x.value = mouseX - touchStartX + touchStartCanvasX;\n        y.value = mouseY - touchStartY + touchStartCanvasY;\n    }\n    else if (e.touches.length == 2)\n    {\n        const x1 = e.touches[0].clientX;\n        const y1 = e.touches[0].clientY;\n        const x2 = e.touches[1].clientX;\n        const y2 = e.touches[1].clientY;\n        const d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        if (touchesDistance>0)\n        {\n            let delta = (d - touchesDistance) * 0.01;\n            if (delta < -1)\n            {\n                delta = -1;\n            }\n            if (delta > 1)\n            {\n                delta = 1;\n            }\n            delta += 1;\n            // if (delta < 0)\n            // {\n            //     delta += 1;\n            // }\n            changeScale((x1+x2)/2, (y1+y2)/2, delta);\n        }\n        touchesDistance = d;\n    }\n}\n\nfunction onMousemove(e:any)\n{\n    if (e.buttons==4) {\n        x.value += e.movementX / s.value;\n        y.value += e.movementY / s.value;\n    }\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n    multiSelecting = e.buttons==1;\n}\n\nfunction onMousedown(e:any)\n{\n    if (e.buttons==1)\n    {\n        multiSelecting = true;\n        multiSelectStartX=e.clientX;\n        multiSelectStartY=e.clientY;\n    }\n    bgDownButtons = e.buttons;\n}\n\nlet bgDownButtons = 0;\n\n\nfunction onMouseup(e:any)\n{\n    if (bgDownButtons == 1)\n    {\n        state.value.selectedUsers = [];\n        state.value.focusedUser = -1;\n    }\n    if (multiSelecting && Math.abs(mouseX - multiSelectStartX) > 10 && Math.abs(mouseY - multiSelectStartY) > 10)\n    {\n        state.value.selectedUsers = state.value.users.filter(user=>\n        {\n            const ux = (user.x + x.value) * s.value;\n            const uy = (user.y + y.value) * s.value;\n            let newSelecteState = e.shiftKey?state.value.selectedUsers.includes(user.id):false;\n            if (((ux > multiSelectStartX && ux < mouseX) || (ux > mouseX && ux < multiSelectStartX))\n            && ((uy > multiSelectStartY && uy < mouseY) || (uy > mouseY && uy < multiSelectStartY)))\n            {\n                newSelecteState = true;\n            }\n            return newSelecteState;\n        }).map(user=>user.id);\n    }\n    multiSelecting = false;\n}\n\nfunction changeScale(mx:number, my:number, delta:number)\n{\n\n    let s1 = s.value;\n    let mx1 = mx / s1 - x.value;\n    let my1 = my / s1 - y.value;\n    s.value *= delta;\n    let s2 = s.value;\n    let mx2 = mx / s2 - x.value;\n    let my2 = my / s2 - y.value;\n    x.value += mx2 - mx1;\n    y.value += my2 - my1;\n}\n\nfunction onWheel(e:any)\n{\n    let delta = e.wheelDelta * 0.01;\n    if (delta < 0)\n    {\n        delta += 2.0;\n    }\n    if (delta < 0 || delta > 2.0) return;\n    changeScale(e.clientX, e.clientY, delta);\n}\n\nlet linesCanvas:any;\nlet linesCtx:any;\n\nconst idealDist = 150;\nconst delta = 1/60;\nconst stepLength = 100;\nconst d = delta * stepLength;\n\nfunction getForce(ax:number, ay:number, bx:number, by:number, repulsion:boolean, idealDistScale:number, strengthScale:number) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ls = dx * dx + dy * dy;\n    const l = Math.sqrt(ls);\n    const tl = idealDist * idealDistScale;\n    const s = 15 * strengthScale;\n    let f = s * (l - tl) / ls * d;\n    if (repulsion && l >= tl)\n    {\n        f = 0;\n    }\n    return {\n        x: dx * f,\n        y: dy * f\n    }\n}\n\nonMounted(()=>{\n    linesCanvas = document.getElementById('lines');\n    linesCtx = linesCanvas.getContext(\"2d\");\n    setInterval(physicsProcess,delta*1000);\n    subscribe(\"createdUser\", (id:number)=>{\n        state.value.users.push({\n            id: id,\n            x: (id % 2) * 100,\n            y: Math.floor(id / 2) * 100,\n            vx: 0,\n            vy: 0\n        });\n    });\n    subscribe(\"removedUser\", ()=>{\n        state.value.users.pop();\n    });\n});\n\nfunction physicsProcess()\n{\n    const users = state.value.users;\n    for (let i = 0; i < progress.userCount-1; i++) {\n        const a = users[i];\n        for (let j = i + 1; j < progress.userCount; j++) {\n            const b = users[j];\n            const repulsion = getRepulsion(i,j);\n            let f = getForce(a.x, a.y, b.x, b.y, repulsion, repulsion?1:0.5, repulsion?0.5:0.5);\n            a.vx += f.x;\n            a.vy += f.y;\n            b.vx -= f.x;\n            b.vy -= f.y;\n        }\n    }\n    Object.values(state.value.users).forEach(user=>\n        {\n            user.vx *= 1 - (0.2 * d);\n            user.vy *= 1 - (0.2 * d);\n            user.vx -= user.x * 0.01 * d;\n            user.vy -= user.y * 0.01 * d;\n            user.x += user.vx * d;\n            user.y += user.vy * d;\n        }\n    )\n    redraw();\n}\n\nfunction redraw()\n{\n    linesCanvas.width = window.innerWidth;\n    linesCanvas.height = window.innerHeight;\n    if (props.appState.editingUser >= 0)\n    {\n        const graph = getSubjectUserGraph(props.appState.editingUser);\n        Object.entries(graph).forEach(([k,r])=>{\n            const splited = k.split('_');\n            const fromId = parseInt(splited[0],32);\n            const toId = parseInt(splited[1],32);\n            const from = state.value.users[fromId];\n            const to = state.value.users[toId];\n            let a = Math.abs(r);\n            if (a > 1) a = 1;\n            if (a < 0) return;\n            const x1 = (from.x+x.value)*s.value;\n            const y1 = (from.y+y.value)*s.value;\n            const x2 = (to.x+x.value)*s.value;\n            const y2 = (to.y+y.value)*s.value;\n            if (debugMode)\n            {\n                linesCtx.strokeStyle = '#000';\n                linesCtx.font = \"16px Arial\";\n                linesCtx.fillText(r.toFixed(2).toString(), (x1+x2)*0.5, (y1+y2)*0.5);\n            }\n            const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n            // const style = `#000`;\n            linesCtx.strokeStyle = style;\n            linesCtx.beginPath();\n            linesCtx.moveTo(x1, y1);\n            linesCtx.lineTo(x2, y2);\n            linesCtx.stroke();\n        });\n    }\n    else\n    {\n        for (const fromId in progress.subjectiveUserGraph)\n        {\n            const from = state.value.users[fromId];\n            Object.entries(progress.subjectiveUserGraph[fromId]).forEach(([k,r])=>{\n                const splited = k.split('_');\n                const keyFrom = splited[0];\n                if (keyFrom != (fromId.toString())) return;\n                const toId = parseInt(splited[1],32);\n                const to = state.value.users[toId];\n                let a = Math.abs(r);\n                if (a > 1) a = 1;\n                if (a < 0) return;\n                const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n                // const style = `#000`;\n                linesCtx.strokeStyle = style;\n                linesCtx.beginPath();\n                linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n                linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n                linesCtx.stroke();\n            })\n        }\n    }\n    // for(let i=0;i<progress.userCount;i++)\n    // {\n    //     for(let j=i+1;j<progress.userCount;j++)\n    //     {\n    //         const from = state.value.users[i];\n    //         const to = state.value.users[j];\n    //         const repulsion = getRepulsion(i,j);\n    //         const style = `#00ff00${(!repulsion)?'ff':'00'}`;\n    //         linesCtx.strokeStyle = style;\n    //         linesCtx.beginPath();\n    //         linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n    //         linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n    //         linesCtx.stroke();\n    //     }\n    // }\n    const w = mouseX-multiSelectStartX;\n    const h = mouseY-multiSelectStartY;\n    if (multiSelecting && Math.abs(w) > 10 && Math.abs(h) > 10)\n    {\n        linesCtx.rect(multiSelectStartX, multiSelectStartY, w, h);\n        linesCtx.fillStyle = '#00000033';\n        linesCtx.fill();\n    }\n}\n\n</script>\n\n<style scoped>\n.canvas\n{\n    position: absolute;\n    width: 100vw;\n    height: 100vh;\n    scroll-behavior:unset;\n    background-image:\n    linear-gradient(to right, gainsboro 1px, transparent 1px),\n    linear-gradient(to bottom, gainsboro 1px, transparent 1px);\n}\n.bg\n{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n}\n.mouse-input-handler\n{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n</style>","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, normalizeStyle as _normalizeStyle } from \"vue\"\n\nimport { debugMode, getRepulsion, getSubjectUserGraph, progress, rGetIn } from '../game'\nimport { onMounted, Ref, ref } from 'vue'\nimport CanvasUser from './CanvasUser.vue'\nimport { subscribe } from '../event'\nimport { AppState } from '@/App.vue';\ntype User = {\n    id: number;\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n};\nconst idealDist = 150;\nconst delta = 1/60;\nconst stepLength = 100;\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'GameCanvas',\n  props: {\n    appState: {}\n  },\n  setup(__props: any) {\n\nconst state:Ref<{\n    users: Array<User>,\n    selectedUsers: Array<number>\n    focusedUser: number\n}> = ref({\n  users: [],\n  selectedUsers: [],\n  focusedUser: -1\n})\n\nconst props = __props;\n\nconst x = ref(0);\nconst y = ref(0);\nconst s = ref(1);\nsubscribe('userPressed', (id)=>\n{\n    if (props.appState.mode == 'user-edit') return;\n    let selectedUsers = state.value.selectedUsers;\n    if (selectedUsers.includes(id))\n    {\n        if (state.value.focusedUser != id)\n        {\n            state.value.focusedUser = id;\n        }\n        else\n        {\n            state.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n            state.value.focusedUser = -1;\n        }\n    }\n    else{\n        state.value.focusedUser = id;\n        selectedUsers.push(id);\n    }\n})\n\nlet multiSelecting = false;\nlet multiSelectStartX = 0;\nlet multiSelectStartY = 0;\nlet mouseX = 0;\nlet mouseY = 0;\nlet touchStartX = 0;\nlet touchStartY = 0;\nlet touchStartCanvasX = 0;\nlet touchStartCanvasY = 0;\nlet touchesDistance = -1;\n\nfunction onTouchStart(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1)\n    {\n        const touch = e.touches[0];\n        touchStartX = touch.clientX;\n        touchStartY = touch.clientY;\n        touchStartCanvasX = x.value;\n        touchStartCanvasY = y.value;\n    }\n}\n\nfunction onTouchEnd(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 0)\n    {\n        touchesDistance = -1;\n    }\n}\n\nfunction onTouchMove(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1 && touchesDistance == -1)\n    {\n        const touch = e.touches[0];\n        mouseX = touch.clientX;\n        mouseY = touch.clientY;\n        x.value = mouseX - touchStartX + touchStartCanvasX;\n        y.value = mouseY - touchStartY + touchStartCanvasY;\n    }\n    else if (e.touches.length == 2)\n    {\n        const x1 = e.touches[0].clientX;\n        const y1 = e.touches[0].clientY;\n        const x2 = e.touches[1].clientX;\n        const y2 = e.touches[1].clientY;\n        const d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        if (touchesDistance>0)\n        {\n            let delta = (d - touchesDistance) * 0.01;\n            if (delta < -1)\n            {\n                delta = -1;\n            }\n            if (delta > 1)\n            {\n                delta = 1;\n            }\n            delta += 1;\n            // if (delta < 0)\n            // {\n            //     delta += 1;\n            // }\n            changeScale((x1+x2)/2, (y1+y2)/2, delta);\n        }\n        touchesDistance = d;\n    }\n}\n\nfunction onMousemove(e:any)\n{\n    if (e.buttons==4) {\n        x.value += e.movementX / s.value;\n        y.value += e.movementY / s.value;\n    }\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n    multiSelecting = e.buttons==1;\n}\n\nfunction onMousedown(e:any)\n{\n    if (e.buttons==1)\n    {\n        multiSelecting = true;\n        multiSelectStartX=e.clientX;\n        multiSelectStartY=e.clientY;\n    }\n    bgDownButtons = e.buttons;\n}\n\nlet bgDownButtons = 0;\n\n\nfunction onMouseup(e:any)\n{\n    if (bgDownButtons == 1)\n    {\n        state.value.selectedUsers = [];\n        state.value.focusedUser = -1;\n    }\n    if (multiSelecting && Math.abs(mouseX - multiSelectStartX) > 10 && Math.abs(mouseY - multiSelectStartY) > 10)\n    {\n        state.value.selectedUsers = state.value.users.filter(user=>\n        {\n            const ux = (user.x + x.value) * s.value;\n            const uy = (user.y + y.value) * s.value;\n            let newSelecteState = e.shiftKey?state.value.selectedUsers.includes(user.id):false;\n            if (((ux > multiSelectStartX && ux < mouseX) || (ux > mouseX && ux < multiSelectStartX))\n            && ((uy > multiSelectStartY && uy < mouseY) || (uy > mouseY && uy < multiSelectStartY)))\n            {\n                newSelecteState = true;\n            }\n            return newSelecteState;\n        }).map(user=>user.id);\n    }\n    multiSelecting = false;\n}\n\nfunction changeScale(mx:number, my:number, delta:number)\n{\n\n    let s1 = s.value;\n    let mx1 = mx / s1 - x.value;\n    let my1 = my / s1 - y.value;\n    s.value *= delta;\n    let s2 = s.value;\n    let mx2 = mx / s2 - x.value;\n    let my2 = my / s2 - y.value;\n    x.value += mx2 - mx1;\n    y.value += my2 - my1;\n}\n\nfunction onWheel(e:any)\n{\n    let delta = e.wheelDelta * 0.01;\n    if (delta < 0)\n    {\n        delta += 2.0;\n    }\n    if (delta < 0 || delta > 2.0) return;\n    changeScale(e.clientX, e.clientY, delta);\n}\n\nlet linesCanvas:any;\nlet linesCtx:any;\n\nconst d = delta * stepLength;\n\nfunction getForce(ax:number, ay:number, bx:number, by:number, repulsion:boolean, idealDistScale:number, strengthScale:number) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ls = dx * dx + dy * dy;\n    const l = Math.sqrt(ls);\n    const tl = idealDist * idealDistScale;\n    const s = 15 * strengthScale;\n    let f = s * (l - tl) / ls * d;\n    if (repulsion && l >= tl)\n    {\n        f = 0;\n    }\n    return {\n        x: dx * f,\n        y: dy * f\n    }\n}\n\nonMounted(()=>{\n    linesCanvas = document.getElementById('lines');\n    linesCtx = linesCanvas.getContext(\"2d\");\n    setInterval(physicsProcess,delta*1000);\n    subscribe(\"createdUser\", (id:number)=>{\n        state.value.users.push({\n            id: id,\n            x: (id % 2) * 100,\n            y: Math.floor(id / 2) * 100,\n            vx: 0,\n            vy: 0\n        });\n    });\n    subscribe(\"removedUser\", ()=>{\n        state.value.users.pop();\n    });\n});\n\nfunction physicsProcess()\n{\n    const users = state.value.users;\n    for (let i = 0; i < progress.userCount-1; i++) {\n        const a = users[i];\n        for (let j = i + 1; j < progress.userCount; j++) {\n            const b = users[j];\n            const repulsion = getRepulsion(i,j);\n            let f = getForce(a.x, a.y, b.x, b.y, repulsion, repulsion?1:0.5, repulsion?0.5:0.5);\n            a.vx += f.x;\n            a.vy += f.y;\n            b.vx -= f.x;\n            b.vy -= f.y;\n        }\n    }\n    Object.values(state.value.users).forEach(user=>\n        {\n            user.vx *= 1 - (0.2 * d);\n            user.vy *= 1 - (0.2 * d);\n            user.vx -= user.x * 0.01 * d;\n            user.vy -= user.y * 0.01 * d;\n            user.x += user.vx * d;\n            user.y += user.vy * d;\n        }\n    )\n    redraw();\n}\n\nfunction redraw()\n{\n    linesCanvas.width = window.innerWidth;\n    linesCanvas.height = window.innerHeight;\n    if (props.appState.editingUser >= 0)\n    {\n        const graph = getSubjectUserGraph(props.appState.editingUser);\n        Object.entries(graph).forEach(([k,r])=>{\n            const splited = k.split('_');\n            const fromId = parseInt(splited[0],32);\n            const toId = parseInt(splited[1],32);\n            const from = state.value.users[fromId];\n            const to = state.value.users[toId];\n            let a = Math.abs(r);\n            if (a > 1) a = 1;\n            if (a < 0) return;\n            const x1 = (from.x+x.value)*s.value;\n            const y1 = (from.y+y.value)*s.value;\n            const x2 = (to.x+x.value)*s.value;\n            const y2 = (to.y+y.value)*s.value;\n            if (debugMode)\n            {\n                linesCtx.strokeStyle = '#000';\n                linesCtx.font = \"16px Arial\";\n                linesCtx.fillText(r.toFixed(2).toString(), (x1+x2)*0.5, (y1+y2)*0.5);\n            }\n            const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n            // const style = `#000`;\n            linesCtx.strokeStyle = style;\n            linesCtx.beginPath();\n            linesCtx.moveTo(x1, y1);\n            linesCtx.lineTo(x2, y2);\n            linesCtx.stroke();\n        });\n    }\n    else\n    {\n        for (const fromId in progress.subjectiveUserGraph)\n        {\n            const from = state.value.users[fromId];\n            Object.entries(progress.subjectiveUserGraph[fromId]).forEach(([k,r])=>{\n                const splited = k.split('_');\n                const keyFrom = splited[0];\n                if (keyFrom != (fromId.toString())) return;\n                const toId = parseInt(splited[1],32);\n                const to = state.value.users[toId];\n                let a = Math.abs(r);\n                if (a > 1) a = 1;\n                if (a < 0) return;\n                const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n                // const style = `#000`;\n                linesCtx.strokeStyle = style;\n                linesCtx.beginPath();\n                linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n                linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n                linesCtx.stroke();\n            })\n        }\n    }\n    // for(let i=0;i<progress.userCount;i++)\n    // {\n    //     for(let j=i+1;j<progress.userCount;j++)\n    //     {\n    //         const from = state.value.users[i];\n    //         const to = state.value.users[j];\n    //         const repulsion = getRepulsion(i,j);\n    //         const style = `#00ff00${(!repulsion)?'ff':'00'}`;\n    //         linesCtx.strokeStyle = style;\n    //         linesCtx.beginPath();\n    //         linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n    //         linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n    //         linesCtx.stroke();\n    //     }\n    // }\n    const w = mouseX-multiSelectStartX;\n    const h = mouseY-multiSelectStartY;\n    if (multiSelecting && Math.abs(w) > 10 && Math.abs(h) > 10)\n    {\n        linesCtx.rect(multiSelectStartX, multiSelectStartY, w, h);\n        linesCtx.fillStyle = '#00000033';\n        linesCtx.fill();\n    }\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"canvas\",\n    style: _normalizeStyle({'background-size': 20*s.value+'px '+20*s.value+'px', 'background-position': x.value*s.value+'px '+y.value*s.value+'px'})\n  }, [\n    _createElementVNode(\"div\", {\n      class: \"mouse-input-handler\",\n      onMousedown: onMousedown,\n      onMouseup: onMouseup,\n      onMousemove: onMousemove,\n      onTouchstart: onTouchStart,\n      onTouchend: onTouchEnd,\n      onTouchmove: onTouchMove,\n      onWheel: onWheel\n    }, null, 32),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.value.users, (user) => {\n      return (_openBlock(), _createBlock(CanvasUser, {\n        key: user.id,\n        id: user.id,\n        x: user.x,\n        y: user.y,\n        px: x.value,\n        py: y.value,\n        ps: s.value,\n        selected: state.value.selectedUsers.includes(user.id),\n        focused: state.value.focusedUser==user.id,\n        \"badge-default\": (user.id in __props.appState.uncollectedMessages)?__props.appState.uncollectedMessages[user.id].length:0,\n        \"badge-info\": 0\n      }, null, 8, [\"id\", \"x\", \"y\", \"px\", \"py\", \"ps\", \"selected\", \"focused\", \"badge-default\"]))\n    }), 128)),\n    _cache[0] || (_cache[0] = _createElementVNode(\"canvas\", { id: \"lines\" }, null, -1))\n  ], 4))\n}\n}\n\n})","import script from \"./GameCanvas.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameCanvas.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameCanvas.vue?vue&type=style&index=0&id=435757c7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-435757c7\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, renderSlot as _renderSlot } from \"vue\"\n\nconst _hoisted_1 = { key: 1 }\nconst _hoisted_2 = { key: 1 }\n\nimport { Message } from '@/game';\nimport { ref } from 'vue';\nimport { NCard, NSkeleton, NEllipsis } from 'naive-ui';\nimport { getUserName, text } from '@/text';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MessageCard',\n  props: {\n    msg: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\nlet title = ref(\"\");\nlet content = ref(\"\");\nconst intervalId = setInterval(()=>{\n    const messageText = text.messageTexts[props.msg.id];\n    if (typeof(messageText)!=\"undefined\" && messageText.title != '')\n    {\n        title.value = messageText.title;\n        content.value = messageText.content;\n        // clearInterval(intervalId);\n    }\n}, 1);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NCard), {\n    class: \"message-card\",\n    hoverable: \"\"\n  }, {\n    header: _withCtx(() => [\n      (_unref(title)=='')\n        ? (_openBlock(), _createBlock(_unref(NSkeleton), {\n            key: 0,\n            width: 100,\n            round: \"\"\n          }))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n            _createElementVNode(\"h3\", null, [\n              _createVNode(_unref(NEllipsis), { \"line-clamp\": 2 }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_unref(title)), 1)\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"p\", null, _toDisplayString(_unref(getUserName)(__props.msg.i)) + \" 发布于 \" + _toDisplayString(__props.msg.t), 1)\n          ]))\n    ]),\n    action: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"action\")\n    ]),\n    default: _withCtx(() => [\n      (_unref(content)=='')\n        ? (_openBlock(), _createBlock(_unref(NSkeleton), {\n            key: 0,\n            text: \"\",\n            repeat: 2\n          }))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n            _createElementVNode(\"p\", null, [\n              _createVNode(_unref(NEllipsis), { \"line-clamp\": 2 }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_unref(content)), 1)\n                ]),\n                _: 1\n              })\n            ])\n          ])),\n      _renderSlot(_ctx.$slots, \"suffix\")\n    ]),\n    _: 3\n  }))\n}\n}\n\n})","<template>\n<n-card class=\"message-card\" hoverable>\n    <template #header>\n        <n-skeleton v-if=\"title==''\" :width=\"100\" round />\n        <div v-else>\n            <h3><n-ellipsis :line-clamp=\"2\">{{ title }}</n-ellipsis></h3>\n            <p>{{ getUserName(msg.i) }} 发布于 {{msg.t}}</p>\n        </div>\n    </template>\n    <n-skeleton v-if=\"content==''\" text :repeat=\"2\"/>\n    <div v-else>\n        <p><n-ellipsis :line-clamp=\"2\">{{ content }}</n-ellipsis></p>\n    </div>\n    <slot name=\"suffix\"></slot>\n    <template #action>\n        <slot name=\"action\"></slot>\n    </template>\n</n-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { Message } from '@/game';\nimport { defineProps, ref } from 'vue';\nimport { NCard, NSkeleton, NEllipsis } from 'naive-ui';\nimport { getUserName, text } from '@/text';\n\nconst props = defineProps<{msg:Message}>();\nlet title = ref(\"\");\nlet content = ref(\"\");\nconst intervalId = setInterval(()=>{\n    const messageText = text.messageTexts[props.msg.id];\n    if (typeof(messageText)!=\"undefined\" && messageText.title != '')\n    {\n        title.value = messageText.title;\n        content.value = messageText.content;\n        // clearInterval(intervalId);\n    }\n}, 1);\n</script>\n\n<style scoped>\n.message-card\n{\n    margin-left: auto;\n    margin-right: auto;\n    margin-top: 20px;\n    padding: 10px;\n    box-shadow:0px 0px 3px 0px rgba(0,0,0,0.5);\n}\n</style>","import script from \"./MessageCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageCard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MessageCard.vue?vue&type=style&index=0&id=717a874c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-717a874c\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { Message, progress } from '@/game';\nimport { DataTableColumns } from 'naive-ui';\n\nimport { NDataTable } from 'naive-ui';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MessageList',\n  props: /*@__PURE__*/_mergeModels({\n    source: {},\n    filter: { type: Function },\n    select: { type: Boolean }\n  }, {\n    \"modelValue\": {},\n    \"modelModifiers\": {},\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props: any) {\n\nconst props = __props;\n\nconst checkedRowKeys=_useModel<Array<number>>(__props, \"modelValue\");\n\nfunction createColumns(): DataTableColumns<Message> {\n  return [\n    {\n      title: '创作群体',\n      key: 'i'\n    },\n    {\n      title: '时间',\n      key: 't'\n    },\n    {\n      title: '涉及群体',\n      key: 'j'\n    },\n    {\n      title: '态度',\n      key: 'v'\n    }\n  ]\n}\n\nlet columns=createColumns();\n\nif (props.select)\n{\n  columns = [{\n    type: 'selection',\n    multiple: true,\n    disabled: (row)=>!props.filter(progress.messages[row.id])\n  }, ...columns]\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NDataTable), {\n    \"checked-row-keys\": checkedRowKeys.value,\n    \"onUpdate:checkedRowKeys\": _cache[0] || (_cache[0] = ($event: any) => ((checkedRowKeys).value = $event)),\n    columns: _unref(columns),\n    data: __props.source,\n    pagination: false,\n    bordered: false,\n    \"row-key\": (msg)=>msg.id,\n    striped: \"\"\n  }, null, 8, [\"checked-row-keys\", \"columns\", \"data\", \"row-key\"]))\n}\n}\n\n})","<template>\n<n-data-table\n    v-model:checked-row-keys=\"checkedRowKeys\"\n    :columns=\"columns\"\n    :data=\"source\"\n    :pagination=\"false\"\n    :bordered=\"false\"\n    :row-key=\"(msg:Message)=>msg.id\"\nstriped />\n</template>\n\n<script setup lang=\"ts\">\nimport { Message, progress } from '@/game';\nimport { DataTableColumns } from 'naive-ui';\nimport { defineProps, defineModel } from 'vue';\nimport { NDataTable } from 'naive-ui';\nconst props = defineProps<{source:Array<Message>,filter:(msg:Message)=>boolean,select:boolean}>();\n\nconst checkedRowKeys=defineModel<Array<number>>();\n\nfunction createColumns(): DataTableColumns<Message> {\n  return [\n    {\n      title: '创作群体',\n      key: 'i'\n    },\n    {\n      title: '时间',\n      key: 't'\n    },\n    {\n      title: '涉及群体',\n      key: 'j'\n    },\n    {\n      title: '态度',\n      key: 'v'\n    }\n  ]\n}\n\nlet columns=createColumns();\n\nif (props.select)\n{\n  columns = [{\n    type: 'selection',\n    multiple: true,\n    disabled: (row)=>!props.filter(progress.messages[row.id])\n  }, ...columns]\n}\n\n</script>\n\n<style scoped>\n\n</style>","import script from \"./MessageList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageList.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode } from \"vue\"\n\nimport { progress } from '@/game';\nimport MessageCard from './MessageCard.vue';\nimport draggable from 'vuedraggable';\n\nimport { NButton, NInput, NTag, NCard } from 'naive-ui';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MessageFlow',\n  props: /*@__PURE__*/_mergeModels({\n    flow: {}\n  }, {\n    \"source\": {},\n    \"sourceModifiers\": {},\n    \"label\": {},\n    \"labelModifiers\": {},\n  }),\n  emits: [\"update:source\", \"update:label\"],\n  setup(__props: any) {\n\n\nconst source = _useModel<Array<number>>(__props, \"source\");\nconst label = _useModel<string>(__props, \"label\");\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_center = _resolveComponent(\"center\")!\n\n  return (_openBlock(), _createBlock(_unref(NCard), { class: \"flow\" }, {\n    default: _withCtx(() => [\n      _createVNode(_component_center, null, {\n        default: _withCtx(() => [\n          (__props.flow==0)\n            ? (_openBlock(), _createBlock(_unref(NTag), { key: 0 }, {\n                default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n                  _createTextVNode(\"主推送流\", -1)\n                ]))]),\n                _: 1\n              }))\n            : (_openBlock(), _createBlock(_unref(NInput), {\n                key: 1,\n                value: label.value,\n                \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((label).value = $event)),\n                size: \"small\",\n                type: \"text\",\n                placeholder: \"自定义推送流\"\n              }, null, 8, [\"value\"]))\n        ]),\n        _: 1\n      }),\n      _createVNode(_unref(draggable), {\n        modelValue: source.value,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((source).value = $event)),\n        animation: \"200\",\n        \"item-key\": \"element\",\n        group: \"flow\",\n        style: {\"height\":\"100%\"}\n      }, {\n        item: _withCtx((element) => [\n          _createElementVNode(\"div\", null, [\n            _createVNode(MessageCard, {\n              msg: _unref(progress).messages[element.element]\n            }, {\n              action: _withCtx(() => [\n                _createVNode(_unref(NButton), {\n                  onClick: ($event: any) => (source.value=source.value?.filter(m=>m!=element.element))\n                }, {\n                  default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n                    _createTextVNode(\"移除\", -1)\n                  ]))]),\n                  _: 1\n                }, 8, [\"onClick\"])\n              ]),\n              _: 2\n            }, 1032, [\"msg\"])\n          ])\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n    <n-card class=\"flow\">\n        <center>\n            <n-tag v-if=\"flow==0\">主推送流</n-tag>\n            <n-input v-else v-model:value=\"label\" size=\"small\" type=\"text\" placeholder=\"自定义推送流\"/>\n        </center>\n        <draggable\n            v-model=\"source\"\n            animation=\"200\"\n            item-key=\"element\"\n            group=\"flow\"\n            style=\"height: 100%;\"\n        >\n        <template #item=\"element\">\n            <div>\n                <MessageCard :msg=\"progress.messages[element.element]\">\n                    <template #action>\n                        <n-button @click=\"source=source?.filter(m=>m!=element.element)\">移除</n-button>\n                    </template>\n                </MessageCard>\n            </div>\n        </template>\n        <!-- <p>{{ element }}</p> -->\n        </draggable>\n    </n-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { progress } from '@/game';\nimport MessageCard from './MessageCard.vue';\nimport draggable from 'vuedraggable';\nimport { defineProps, defineModel } from 'vue';\nimport { NButton, NInput, NTag, NCard } from 'naive-ui';\n\ndefineProps<{flow:number}>();\nconst source = defineModel<Array<number>>(\"source\");\nconst label = defineModel<string>(\"label\");\n</script>","import script from \"./MessageFlow.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageFlow.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, withCtx as _withCtx, createBlock as _createBlock, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"app\" }\nconst _hoisted_2 = { class: \"flows\" }\nconst _hoisted_3 = { class: \"corner-buttons corner-buttons-rb\" }\nconst _hoisted_4 = { class: \"corner-buttons corner-buttons-lb\" }\n\nimport { computed, nextTick, onMounted, Ref, ref, watch } from 'vue';\nimport GameCanvas from './components/GameCanvas.vue';\nimport MessageCard from './components/MessageCard.vue';\nimport MessageList from './components/MessageList.vue';\nimport { createUser, Message, progress, processPushTask, getSubjectUserGraph, rSetIn, updateUsers } from './game';\nimport { subscribe } from './event';\nimport { NPageHeader, NTabs, NTabPane, NDrawer, NDrawerContent, NButton, NFlex, NDynamicTags, AutoCompleteInst, NAutoComplete, NCard, NModal, NIcon, NRow, NCol, NNumberAnimation } from 'naive-ui';\nimport { getUserName, processGenerateQueue, text } from './text';\nimport { startGenerateMessage } from './text';\nimport MessageFlow from './components/MessageFlow.vue';\nimport { View, ThumbsUp } from '@vicons/carbon'\n\nexport interface AppState {\n    mode: \"user-edit\" | \"connect\" | \"disconnect\";\n    editingUser: number;\n    uncollectedMessages: Record<number,Array<number>>;\n    flows: Array<Array<number>>;\n    messageStatistic: Record<number, {views:number,likes:number}>\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\nonMounted(()=>{\n    // const progressSource = localStorage.getItem('progress');\n    // if (progressSource != null)\n    // {\n    //     setProgress(JSON.parse(progressSource));\n    // }\n    // else\n    // {\n        \n    // }\n    // const appstateSource = localStorage.getItem('appstate');\n    // if (appstateSource != null)\n    // {\n    //     appState.value = JSON.parse(appstateSource);\n    // }\n    // window.addEventListener('beforeunload', ()=>{\n    //     localStorage.setItem('appstate', JSON.stringify(appState.value))\n    //     localStorage.setItem('progress', JSON.stringify(progress));\n    // });\n    createUser(0);\n    createUser(0);\n    createUser(1);\n    createUser(1);\n    for(let p=0;p<progress.userCount;p++)\n    {\n        const G = getSubjectUserGraph(p);\n        for(let x=0;x<progress.userCount;x++)\n        {\n            for(let o=x;o<progress.userCount;o++)\n            {\n                if (x==p)\n                {\n                    rSetIn(x,o,1,G);\n                }\n                else\n                {\n                    rSetIn(x,o,-1,G);\n                }\n            }\n        }\n    }\n    text.userTexts.push(\n        {\n            name: \"学生\",\n            prompt: \"\"\n        },\n        {\n            name: \"丘\",\n            prompt: \"\"\n        },\n        {\n            name: \"人品\",\n            prompt: \"\"\n        },\n        {\n            name: \"数学\",\n            prompt: \"\"\n        }\n    );\n});\n\nconst appState:Ref<AppState> = ref({\n    mode:'user-edit',\n    editingUser:-1,\n    uncollectedMessages:{},\n    collectedMessages:[],\n    flows:[[]],\n    messageStatistic:{}\n});\n\nconst showUserEditor = ref(false);\nconst showFlowsEditor = ref(false);\n\nconst messages = ref(progress.messages);\nfunction getUserMessages(author:number)\n{\n    return messages.value.filter(m=>m.i==author);\n}\n\nconst editingFlowTags:Ref<Array<string>> = ref([]);\nfunction onCreateFlowTag(tag:string):string\n{\n    if (editingFlowTags.value.includes(tag))return \"\";\n    const flow = text.flowLabel.indexOf(tag);\n    if (flow==undefined) return \"\";\n    if (flow<=0) return \"\";\n    return tag;\n}\nconst autoCompleteInstRef = ref<AutoCompleteInst | null>(null)\nwatch(autoCompleteInstRef, (value) => {\n  if (value)\n    nextTick(() => value.focus())\n})\nconst flowTagInputValue = ref('');\nconst flowTagOptions = computed(() => {\n  if (flowTagInputValue.value === null) {\n    return []\n  }\n  return text.flowLabel.filter(label=>!editingFlowTags.value.includes(label)&&label.includes(flowTagInputValue.value)).map((completion) => {\n    return {\n      label: completion,\n      value: completion\n    }\n  })\n})\nsubscribe('userPressed', (id)=>\n{\n    if (progress.userType[id]==0)\n    {\n        if (appState.value.mode==\"user-edit\")\n        {\n            showUserEditor.value = true;\n            appState.value.editingUser = id;\n            while (progress.userFlowTags.length <= id)\n            {\n                progress.userFlowTags.push([]);\n            }\n            editingFlowTags.value = progress.userFlowTags[id].map(flow=>text.flowLabel[flow]);\n        }\n    }\n})\n\nsubscribe('addedMessage', (msg:Message)=>{\n    if (!(msg.i in appState.value.uncollectedMessages))\n    {\n        appState.value.uncollectedMessages[msg.i] = [];\n    }\n    appState.value.uncollectedMessages[msg.i].push(msg.id);\n});\n\nfunction forgetMsg(msg:Message)\n{\n    appState.value.uncollectedMessages[msg.i] = appState.value.uncollectedMessages[msg.i].filter(m=>m!=msg.id);\n}\nfunction collectMsg(msg:Message)\n{\n    forgetMsg(msg);\n    appState.value.flows[0].push(msg.id);\n}\nfunction finishRound()\n{\n    progress.time += 1;\n    appState.value.uncollectedMessages = {};\n    for(let flow=0;flow<appState.value.flows.length;flow++)\n    {\n        processPushTask(appState.value.flows[flow],flow);\n        appState.value.flows[flow] = [];\n    }\n    updateUsers();\n    showStatistic.value = true;\n}\nsubscribe('addedMessage', (msg:Message)=>startGenerateMessage(msg));\nsetInterval(() => {\n    processGenerateQueue();\n}, 1000);\nsetInterval(() => {\n    windowWidth.value = window.innerWidth;\n}, 1);\nconst windowWidth = ref(0);\n// const flowsPage = ref(1);\n// const flowsPageSize = 3;\n// function getFlowPage()\n// {\n//     let arr = [];\n//     for(let i=0;i<(Math.min(flowsPage.value*flowsPageSize,appState.value.flows.length)-1)%(flowsPageSize)+1;i++)\n//     {\n//         arr.push((flowsPage.value-1) * flowsPageSize + i);\n//     }\n//     return arr;\n// }\n// const flowsPageCount = ref(1);\n// watch(appState.value.flows, (newValue)=>{\n//     flowsPageCount.value = Math.ceil(newValue.length/flowsPageSize);\n//     flowsPage.value = flowsPageCount.value;\n// });\nsubscribe('viewedMessage',(msgId,view)=>{\n    if(!(msgId in appState.value.messageStatistic)) appState.value.messageStatistic[msgId] = {views:0,likes:0};\n    appState.value.messageStatistic[msgId].views += view;\n})\nsubscribe('likedMessage',(msgId,like)=>{\n    if(!(msgId in appState.value.messageStatistic)) appState.value.messageStatistic[msgId] = {views:0,likes:0};\n    appState.value.messageStatistic[msgId].likes += like;\n})\nconst showStatistic = ref(false);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(GameCanvas, {\n      \"app-state\": appState.value,\n      ref: \"canvas\"\n    }, null, 8, [\"app-state\"]),\n    _createVNode(_unref(NModal), {\n      show: showStatistic.value,\n      \"onUpdate:show\": _cache[0] || (_cache[0] = ($event: any) => ((showStatistic).value = $event)),\n      preset: \"card\",\n      style: {\"width\":\"600px\"},\n      title: \"统计数据\",\n      size: \"huge\",\n      bordered: false,\n      onUpdateShow: _cache[1] || (_cache[1] = (show)=>{if(!show)appState.value.messageStatistic={}})\n    }, {\n      default: _withCtx(() => [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(appState.value.messageStatistic, (statistic, msg) => {\n          return (_openBlock(), _createBlock(MessageCard, {\n            key: msg,\n            msg: _unref(progress).messages[msg]\n          }, {\n            suffix: _withCtx(() => [\n              _createVNode(_unref(NRow), null, {\n                default: _withCtx(() => [\n                  _createVNode(_unref(NCol), { span: 12 }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(NIcon), null, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(View))\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_unref(NNumberAnimation), {\n                        from: 0,\n                        to: statistic.views\n                      }, null, 8, [\"to\"])\n                    ]),\n                    _: 2\n                  }, 1024),\n                  _createVNode(_unref(NCol), { span: 12 }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(NIcon), null, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(ThumbsUp))\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_unref(NNumberAnimation), {\n                        from: 0,\n                        to: statistic.likes\n                      }, null, 8, [\"to\"])\n                    ]),\n                    _: 2\n                  }, 1024)\n                ]),\n                _: 2\n              }, 1024)\n            ]),\n            _: 2\n          }, 1032, [\"msg\"]))\n        }), 128))\n      ]),\n      _: 1\n    }, 8, [\"show\"]),\n    _createVNode(_unref(NDrawer), {\n      show: showFlowsEditor.value,\n      \"onUpdate:show\": _cache[4] || (_cache[4] = ($event: any) => ((showFlowsEditor).value = $event)),\n      width: windowWidth.value>800?800:windowWidth.value,\n      placement: 'left'\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NDrawerContent), null, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_2, [\n              _createVNode(_unref(NFlex), { style: {\"flex-grow\":\"1\",\"overflow-y\":\"scroll\",\"overflow-x\":\"hidden\"} }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(appState.value.flows.length, (i, flow) => {\n                    return (_openBlock(), _createBlock(MessageFlow, {\n                      key: flow,\n                      label: _unref(text).flowLabel[flow],\n                      \"onUpdate:label\": ($event: any) => ((_unref(text).flowLabel[flow]) = $event),\n                      source: appState.value.flows[flow],\n                      \"onUpdate:source\": ($event: any) => ((appState.value.flows[flow]) = $event),\n                      flow: flow\n                    }, null, 8, [\"label\", \"onUpdate:label\", \"source\", \"onUpdate:source\", \"flow\"]))\n                  }), 128)),\n                  _createVNode(_unref(NCard), { class: \"flowControl\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(NFlex), { vertical: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(NButton), {\n                            onClick: _cache[2] || (_cache[2] = ($event: any) => (appState.value.flows.push([])))\n                          }, {\n                            default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n                              _createTextVNode(\"添加\", -1)\n                            ]))]),\n                            _: 1\n                          }),\n                          _createVNode(_unref(NButton), {\n                            onClick: _cache[3] || (_cache[3] = ($event: any) => (appState.value.flows.pop())),\n                            disabled: appState.value.flows.length<=1\n                          }, {\n                            default: _withCtx(() => [...(_cache[12] || (_cache[12] = [\n                              _createTextVNode(\"移除\", -1)\n                            ]))]),\n                            _: 1\n                          }, 8, [\"disabled\"])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"show\", \"width\"]),\n    _createVNode(_unref(NDrawer), {\n      class: \"user-editor-container\",\n      show: showUserEditor.value,\n      \"onUpdate:show\": _cache[8] || (_cache[8] = ($event: any) => ((showUserEditor).value = $event)),\n      width: windowWidth.value>500?500:windowWidth.value,\n      onUpdateShow: _cache[9] || (_cache[9] = (show)=>{if(!show){\n            _unref(progress).userFlowTags[appState.value.editingUser]=editingFlowTags.value.map(label=>_unref(text).flowLabel.indexOf(label)).filter(flow=>flow>0);\n            console.log(_unref(progress).userFlowTags[appState.value.editingUser]);\n            appState.value.editingUser=-1;\n        }})\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NDrawerContent), { \"native-scrollbar\": false }, {\n          header: _withCtx(() => [\n            _createVNode(_unref(NPageHeader), {\n              subtitle: \"用户分析\",\n              onBack: _cache[5] || (_cache[5] = ($event: any) => (showUserEditor.value=false))\n            }),\n            _createElementVNode(\"h1\", null, \"#\" + _toDisplayString(_unref(getUserName)(appState.value.editingUser)), 1)\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"p\", null, [\n              _createVNode(_unref(NDynamicTags), {\n                value: editingFlowTags.value,\n                \"onUpdate:value\": _cache[7] || (_cache[7] = ($event: any) => ((editingFlowTags).value = $event)),\n                onCreate: onCreateFlowTag\n              }, {\n                input: _withCtx(({ submit, deactivate }) => [\n                  _createVNode(_unref(NAutoComplete), {\n                    ref_key: \"autoCompleteInstRef\",\n                    ref: autoCompleteInstRef,\n                    value: flowTagInputValue.value,\n                    \"onUpdate:value\": _cache[6] || (_cache[6] = ($event: any) => ((flowTagInputValue).value = $event)),\n                    size: \"small\",\n                    options: flowTagOptions.value,\n                    placeholder: \"添加订阅\",\n                    \"clear-after-select\": true,\n                    onSelect: ($event: any) => (submit($event)),\n                    onBlur: deactivate\n                  }, null, 8, [\"value\", \"options\", \"onSelect\", \"onBlur\"])\n                ]),\n                _: 1\n              }, 8, [\"value\"])\n            ]),\n            _createVNode(_unref(NTabs), {\n              class: \"user-editor\",\n              type: \"segment\",\n              animated: \"\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_unref(NTabPane), {\n                  name: \"new\",\n                  tab: \"最新发言\"\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList((appState.value.uncollectedMessages[appState.value.editingUser]), (msgId) => {\n                      return (_openBlock(), _createBlock(MessageCard, {\n                        msg: _unref(progress).messages[msgId],\n                        key: msgId\n                      }, {\n                        action: _withCtx(() => [\n                          _createVNode(_unref(NFlex), { justify: \"space-between\" }, {\n                            default: _withCtx(() => [\n                              _createVNode(_unref(NButton), {\n                                onClick: ($event: any) => (collectMsg(_unref(progress).messages[msgId]))\n                              }, {\n                                default: _withCtx(() => [...(_cache[13] || (_cache[13] = [\n                                  _createTextVNode(\"收集\", -1)\n                                ]))]),\n                                _: 1\n                              }, 8, [\"onClick\"]),\n                              _createVNode(_unref(NButton), {\n                                onClick: ($event: any) => (forgetMsg(_unref(progress).messages[msgId]))\n                              }, {\n                                default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n                                  _createTextVNode(\"忽略\", -1)\n                                ]))]),\n                                _: 1\n                              }, 8, [\"onClick\"])\n                            ]),\n                            _: 2\n                          }, 1024)\n                        ]),\n                        _: 2\n                      }, 1032, [\"msg\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_unref(NTabPane), {\n                  name: \"history\",\n                  tab: \"历史发言\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(MessageList, {\n                      source: getUserMessages(appState.value.editingUser),\n                      filter: (msg)=>true,\n                      select: false\n                    }, null, 8, [\"source\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"show\", \"width\"]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createVNode(_unref(NButton), {\n        round: \"\",\n        type: \"primary\",\n        size: \"large\",\n        onClick: finishRound\n      }, {\n        default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n          _createTextVNode(\"结束回合\", -1)\n        ]))]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createVNode(_unref(NButton), {\n        round: \"\",\n        type: \"primary\",\n        size: \"large\",\n        onClick: _cache[10] || (_cache[10] = ($event: any) => (showFlowsEditor.value=true))\n      }, {\n        default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n          _createTextVNode(\"编辑推送流\", -1)\n        ]))]),\n        _: 1\n      })\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { computed, nextTick, onMounted, Ref, ref, watch } from 'vue';\nimport GameCanvas from './components/GameCanvas.vue';\nimport MessageCard from './components/MessageCard.vue';\nimport MessageList from './components/MessageList.vue';\nimport { createUser, Message, progress, processPushTask, getSubjectUserGraph, rSetIn, updateUsers } from './game';\nimport { subscribe } from './event';\nimport { NPageHeader, NTabs, NTabPane, NDrawer, NDrawerContent, NButton, NFlex, NDynamicTags, AutoCompleteInst, NAutoComplete, NCard, NModal, NIcon, NRow, NCol, NNumberAnimation } from 'naive-ui';\nimport { getUserName, processGenerateQueue, text } from './text';\nimport { startGenerateMessage } from './text';\nimport MessageFlow from './components/MessageFlow.vue';\nimport { View, ThumbsUp } from '@vicons/carbon'\n\nonMounted(()=>{\n    // const progressSource = localStorage.getItem('progress');\n    // if (progressSource != null)\n    // {\n    //     setProgress(JSON.parse(progressSource));\n    // }\n    // else\n    // {\n        \n    // }\n    // const appstateSource = localStorage.getItem('appstate');\n    // if (appstateSource != null)\n    // {\n    //     appState.value = JSON.parse(appstateSource);\n    // }\n    // window.addEventListener('beforeunload', ()=>{\n    //     localStorage.setItem('appstate', JSON.stringify(appState.value))\n    //     localStorage.setItem('progress', JSON.stringify(progress));\n    // });\n    createUser(0);\n    createUser(0);\n    createUser(1);\n    createUser(1);\n    for(let p=0;p<progress.userCount;p++)\n    {\n        const G = getSubjectUserGraph(p);\n        for(let x=0;x<progress.userCount;x++)\n        {\n            for(let o=x;o<progress.userCount;o++)\n            {\n                if (x==p)\n                {\n                    rSetIn(x,o,1,G);\n                }\n                else\n                {\n                    rSetIn(x,o,-1,G);\n                }\n            }\n        }\n    }\n    text.userTexts.push(\n        {\n            name: \"学生\",\n            prompt: \"\"\n        },\n        {\n            name: \"丘\",\n            prompt: \"\"\n        },\n        {\n            name: \"人品\",\n            prompt: \"\"\n        },\n        {\n            name: \"数学\",\n            prompt: \"\"\n        }\n    );\n});\n\nexport interface AppState {\n    mode: \"user-edit\" | \"connect\" | \"disconnect\";\n    editingUser: number;\n    uncollectedMessages: Record<number,Array<number>>;\n    flows: Array<Array<number>>;\n    messageStatistic: Record<number, {views:number,likes:number}>\n}\n\nconst appState:Ref<AppState> = ref({\n    mode:'user-edit',\n    editingUser:-1,\n    uncollectedMessages:{},\n    collectedMessages:[],\n    flows:[[]],\n    messageStatistic:{}\n});\n\nconst showUserEditor = ref(false);\nconst showFlowsEditor = ref(false);\n\nconst messages = ref(progress.messages);\nfunction getUserMessages(author:number)\n{\n    return messages.value.filter(m=>m.i==author);\n}\n\nconst editingFlowTags:Ref<Array<string>> = ref([]);\nfunction onCreateFlowTag(tag:string):string\n{\n    if (editingFlowTags.value.includes(tag))return \"\";\n    const flow = text.flowLabel.indexOf(tag);\n    if (flow==undefined) return \"\";\n    if (flow<=0) return \"\";\n    return tag;\n}\nconst autoCompleteInstRef = ref<AutoCompleteInst | null>(null)\nwatch(autoCompleteInstRef, (value) => {\n  if (value)\n    nextTick(() => value.focus())\n})\nconst flowTagInputValue = ref('');\nconst flowTagOptions = computed(() => {\n  if (flowTagInputValue.value === null) {\n    return []\n  }\n  return text.flowLabel.filter(label=>!editingFlowTags.value.includes(label)&&label.includes(flowTagInputValue.value)).map((completion) => {\n    return {\n      label: completion,\n      value: completion\n    }\n  })\n})\nsubscribe('userPressed', (id)=>\n{\n    if (progress.userType[id]==0)\n    {\n        if (appState.value.mode==\"user-edit\")\n        {\n            showUserEditor.value = true;\n            appState.value.editingUser = id;\n            while (progress.userFlowTags.length <= id)\n            {\n                progress.userFlowTags.push([]);\n            }\n            editingFlowTags.value = progress.userFlowTags[id].map(flow=>text.flowLabel[flow]);\n        }\n    }\n})\n\nsubscribe('addedMessage', (msg:Message)=>{\n    if (!(msg.i in appState.value.uncollectedMessages))\n    {\n        appState.value.uncollectedMessages[msg.i] = [];\n    }\n    appState.value.uncollectedMessages[msg.i].push(msg.id);\n});\n\nfunction forgetMsg(msg:Message)\n{\n    appState.value.uncollectedMessages[msg.i] = appState.value.uncollectedMessages[msg.i].filter(m=>m!=msg.id);\n}\nfunction collectMsg(msg:Message)\n{\n    forgetMsg(msg);\n    appState.value.flows[0].push(msg.id);\n}\nfunction finishRound()\n{\n    progress.time += 1;\n    appState.value.uncollectedMessages = {};\n    for(let flow=0;flow<appState.value.flows.length;flow++)\n    {\n        processPushTask(appState.value.flows[flow],flow);\n        appState.value.flows[flow] = [];\n    }\n    updateUsers();\n    showStatistic.value = true;\n}\nsubscribe('addedMessage', (msg:Message)=>startGenerateMessage(msg));\nsetInterval(() => {\n    processGenerateQueue();\n}, 1000);\nsetInterval(() => {\n    windowWidth.value = window.innerWidth;\n}, 1);\nconst windowWidth = ref(0);\n// const flowsPage = ref(1);\n// const flowsPageSize = 3;\n// function getFlowPage()\n// {\n//     let arr = [];\n//     for(let i=0;i<(Math.min(flowsPage.value*flowsPageSize,appState.value.flows.length)-1)%(flowsPageSize)+1;i++)\n//     {\n//         arr.push((flowsPage.value-1) * flowsPageSize + i);\n//     }\n//     return arr;\n// }\n// const flowsPageCount = ref(1);\n// watch(appState.value.flows, (newValue)=>{\n//     flowsPageCount.value = Math.ceil(newValue.length/flowsPageSize);\n//     flowsPage.value = flowsPageCount.value;\n// });\nsubscribe('viewedMessage',(msgId,view)=>{\n    if(!(msgId in appState.value.messageStatistic)) appState.value.messageStatistic[msgId] = {views:0,likes:0};\n    appState.value.messageStatistic[msgId].views += view;\n})\nsubscribe('likedMessage',(msgId,like)=>{\n    if(!(msgId in appState.value.messageStatistic)) appState.value.messageStatistic[msgId] = {views:0,likes:0};\n    appState.value.messageStatistic[msgId].likes += like;\n})\nconst showStatistic = ref(false);\n</script>\n\n<template>\n<div class=\"app\">\n    <!-- <p v-for=\"flow,flowId in appState.flows\" :key=\"flowId\">{{ flowId }}</p> -->\n    <GameCanvas :app-state=\"appState\" ref=\"canvas\"/>\n    <n-modal v-model:show=\"showStatistic\" preset=\"card\" style=\"width: 600px;\" title=\"统计数据\" size=\"huge\" :bordered=\"false\"\n        @update-show=\"(show)=>{if(!show)appState.messageStatistic={}}\"\n    >\n        <MessageCard v-for=\"(statistic, msg) in appState.messageStatistic\" :key=msg :msg=\"progress.messages[msg]\">\n            <template #suffix>\n                <n-row>\n                    <n-col :span=\"12\">\n                        <n-icon><View/></n-icon>\n                        <n-number-animation :from=\"0\" :to=\"statistic.views\"/>\n                    </n-col>\n                    <n-col :span=\"12\">\n                        <n-icon><ThumbsUp/></n-icon>\n                        <n-number-animation :from=\"0\" :to=\"statistic.likes\"/>\n                    </n-col>\n                </n-row>\n            </template>\n        </MessageCard>\n    </n-modal>\n    <n-drawer v-model:show=\"showFlowsEditor\" :width=\"windowWidth>800?800:windowWidth\" :placement=\"'left'\">\n        <n-drawer-content>\n            <div class=\"flows\">\n                <n-flex style=\"flex-grow: 1;overflow-y: scroll;overflow-x: hidden;\">\n                    <MessageFlow v-for=\"i,flow in appState.flows.length\" :key=\"flow\" v-model:label=\"text.flowLabel[flow]\" v-model:source=\"appState.flows[flow]\" :flow=\"flow\"/>\n                    <NCard class=\"flowControl\">\n                        <n-flex vertical>\n                            <n-button @click=\"appState.flows.push([])\">添加</n-button>\n                            <n-button @click=\"appState.flows.pop()\" :disabled=\"appState.flows.length<=1\">移除</n-button>\n                        </n-flex>\n                    </NCard>\n                </n-flex>\n                <!-- <n-pagination v-model:page=\"flowsPage\" :page-count=\"flowsPageCount\"/> -->\n            </div>\n        </n-drawer-content>\n    </n-drawer>\n        <n-drawer class=\"user-editor-container\" v-model:show=\"showUserEditor\" :width=\"windowWidth>500?500:windowWidth\" @update-show=\"(show)=>{if(!show){\n            progress.userFlowTags[appState.editingUser]=editingFlowTags.map(label=>text.flowLabel.indexOf(label)).filter(flow=>flow>0);\n            console.log(progress.userFlowTags[appState.editingUser]);\n            appState.editingUser=-1;\n        }}\">\n            <n-drawer-content :native-scrollbar=\"false\">\n                <template #header>\n                    <NPageHeader subtitle=\"用户分析\" @back=\"showUserEditor=false\"></NPageHeader>\n                    <h1>#{{ getUserName(appState.editingUser) }}</h1>\n                </template>\n                <p>\n                <n-dynamic-tags v-model:value=\"editingFlowTags\" @create=onCreateFlowTag>\n                    <template #input=\"{ submit, deactivate }\">\n                    <n-auto-complete\n                        ref=\"autoCompleteInstRef\"\n                        v-model:value=\"flowTagInputValue\"\n                        size=\"small\"\n                        :options=\"flowTagOptions\"\n                        placeholder=\"添加订阅\"\n                        :clear-after-select=\"true\"\n                        @select=\"submit($event)\"\n                        @blur=\"deactivate\"\n                    />\n                    </template>\n                </n-dynamic-tags>\n                </p>\n                <n-tabs class=\"user-editor\" type=\"segment\" animated>\n                    <n-tab-pane name=\"new\" tab=\"最新发言\">\n                        <MessageCard :msg=\"progress.messages[msgId]\" v-for=\"msgId in (appState.uncollectedMessages[appState.editingUser])\" :key=\"msgId\">\n                            <template #action>\n                                <n-flex justify=\"space-between\">\n                                    <n-button @click=\"collectMsg(progress.messages[msgId])\">收集</n-button>\n                                    <n-button @click=\"forgetMsg(progress.messages[msgId])\">忽略</n-button>\n                                </n-flex>\n                            </template>\n                        </MessageCard>\n                    </n-tab-pane>\n                    <n-tab-pane name=\"history\" tab=\"历史发言\">\n                        <MessageList :source=\"getUserMessages(appState.editingUser)\" :filter=\"(msg)=>true\" :select=\"false\"/>\n                    </n-tab-pane>\n                </n-tabs>\n            </n-drawer-content>\n        </n-drawer>\n        <div class=\"corner-buttons corner-buttons-rb\">\n            <n-button round type=\"primary\" size=\"large\" @click=\"finishRound\">结束回合</n-button>\n        </div>\n        <div class=\"corner-buttons corner-buttons-lb\">\n            <n-button round type=\"primary\" size=\"large\" @click=\"showFlowsEditor=true\">编辑推送流</n-button>\n        </div>\n</div>\n</template>\n\n<style>\nbody\n{\n    margin: 0;\n    overflow: hidden;\n}\n\n.app\n{\n    display: flex;\n    width: 100vw;\n    height: 100vh;\n}\n.corner-buttons\n{\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n.corner-buttons-lb\n{\n    left: 20px;\n    bottom: 20px;\n}\n.corner-buttons-rb\n{\n    right: 20px;\n    bottom: 20px;\n}\n@media (max-width: 500px) {\n    .user-editor-container {\n        width: 400px;\n    }\n}\n.flows\n{\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n.flow\n{\n    overflow-y: scroll;\n    width: 300px;\n    height: 100%;\n    margin: 8px;\n    box-shadow: 0 0 5px 0px rgba(0,0,0,0.5);\n}\n.flow::-webkit-scrollbar {\n    display: none;\n}\n.flowControl\n{\n    width: 300px;\n    margin: 8px;\n    height: min-content;\n    display: flex;\n    flex-direction: column;\n}\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=5279b15c&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_project\"] = self[\"webpackChunkvue_project\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(3260); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["events","subscribe","event","action","key","Object","keys","length","emit","args","values","forEach","debugMode","progress","userMemory","subjectiveUserGraph","messages","userType","userCount","userFlowTags","time","getSubjectUserGraph","user","rGetIn","a","b","graph","k","toString","rSetIn","v","processPushTask","tasks","flow","flowTags","undefined","includes","msgId","pushMsgToUser","createMessage","i","j","msg","id","t","push","changeAttitude","target","d","value","Math","abs","updateUser","console","log","maxIPD","maxIPD_o","o","IPD","instabilityPartialD","atan","instability","p","G","s","x","Gpx","Gpo","Gox","GooSub","oldInstability","newInstability","random","updateUsers","getRepulsion","rij","repulsion","innerRepulsion","outterRepulsion","createUser","type","OpenAI","apiKey","baseURL","dangerouslyAllowBrowser","delay","ms","Promise","resolve","setTimeout","async","chat","text","userTexts","messageTexts","generateQueue","flowLabel","localStorage","getItem","getUserName","name","getMessageMinimumVersionPrompt","content","generating","processGenerateQueue","title","minimumVersion","msgObj","describe","setItem","JSON","stringify","shift","startGenerateMessage","_hoisted_1","class","_defineComponent","__name","props","y","selected","Boolean","focused","px","py","ps","badgeDefault","badgeInfo","setup","__props","onClick","_ctx","_cache","_openBlock","_createElementBlock","style","_normalizeStyle","left","top","outline","_unref","_createVNode","NBadge","offset","default","_withCtx","_createElementVNode","_toDisplayString","_","__exports__","idealDist","delta","stepLength","appState","state","ref","users","selectedUsers","focusedUser","mode","filter","multiSelecting","multiSelectStartX","multiSelectStartY","mouseX","mouseY","touchStartX","touchStartY","touchStartCanvasX","touchStartCanvasY","touchesDistance","onTouchStart","e","preventDefault","touches","touch","clientX","clientY","onTouchEnd","onTouchMove","x1","y1","x2","y2","sqrt","changeScale","onMousemove","buttons","movementX","movementY","onMousedown","bgDownButtons","linesCanvas","linesCtx","onMouseup","ux","uy","newSelecteState","shiftKey","map","mx","my","s1","mx1","my1","s2","mx2","my2","onWheel","wheelDelta","getForce","ax","ay","bx","by","idealDistScale","strengthScale","dx","dy","ls","l","tl","f","physicsProcess","vx","vy","redraw","width","window","innerWidth","height","innerHeight","editingUser","entries","r","splited","split","fromId","parseInt","toId","from","to","strokeStyle","font","fillText","toFixed","floor","padStart","beginPath","moveTo","lineTo","stroke","keyFrom","w","h","rect","fillStyle","fill","onMounted","document","getElementById","getContext","setInterval","pop","onTouchstart","onTouchend","onTouchmove","_Fragment","_renderList","_createBlock","CanvasUser","uncollectedMessages","_hoisted_2","messageText","NCard","hoverable","header","NSkeleton","round","NEllipsis","_createTextVNode","_renderSlot","$slots","repeat","_mergeModels","source","Function","select","emits","checkedRowKeys","_useModel","createColumns","columns","multiple","disabled","row","NDataTable","$event","data","pagination","bordered","striped","label","_component_center","_resolveComponent","NTag","NInput","size","placeholder","draggable","modelValue","animation","group","item","element","MessageCard","NButton","m","_hoisted_3","_hoisted_4","prompt","collectedMessages","flows","messageStatistic","showUserEditor","showFlowsEditor","getUserMessages","author","editingFlowTags","onCreateFlowTag","tag","indexOf","autoCompleteInstRef","watch","nextTick","focus","flowTagInputValue","flowTagOptions","computed","completion","forgetMsg","collectMsg","finishRound","showStatistic","windowWidth","view","views","likes","like","GameCanvas","NModal","show","preset","onUpdateShow","statistic","suffix","NRow","NCol","span","NIcon","View","NNumberAnimation","ThumbsUp","NDrawer","placement","NDrawerContent","NFlex","MessageFlow","vertical","NPageHeader","subtitle","onBack","NDynamicTags","onCreate","input","submit","deactivate","NAutoComplete","ref_key","options","onSelect","onBlur","NTabs","animated","NTabPane","tab","justify","MessageList","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","splice","n","getter","__esModule","definition","defineProperty","enumerable","get","g","globalThis","this","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}