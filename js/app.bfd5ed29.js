(function(){"use strict";var e={6167:function(e,t,s){var l=s(5130),n=(s(4114),s(8111),s(2489),s(1701),s(6768)),u=s(144),a=s(4232);s(7588);const o={};function r(e,t){e in o||(o[e]={});const s=Object.keys(o[e]).length-1;return o[e][s]=t,s}function i(e,...t){e in o&&Object.values(o[e]).forEach(e=>{e(...t)})}let c={userMemory:{},subjectiveUserGraph:{},messages:[],userType:[],userCount:0,userFlowTags:[],time:0};function d(e){return e in c.subjectiveUserGraph||(c.subjectiveUserGraph[e]={}),c.subjectiveUserGraph[e]}function v(e,t,s){if(e>t)return v(t,e,s);const l=e.toString(32)+"_"+t.toString(32);return l in s?s[l]:0}function f(e,t,s,l){if(e>t)return void f(t,e,s,l);const n=e.toString(32)+"_"+t.toString(32);l[n]=s}function p(e,t){for(let s=0;s<c.userCount;s++){if(0!=c.userType[s])continue;const l=c.userFlowTags[s];if(0==t||void 0!=l&&l.includes(t))for(const t of e)k(c.messages[t],s)}}function g(e,t,s){const l={id:c.messages.length,i:e,j:t,v:s,t:c.time};c.messages.push(l),i("addedMessage",l)}function m(e,t,s){const l=d(e),n=v(e,t,l)+s;return f(e,t,n,l),Math.abs(s)>.5&&g(e,t,n),s}function h(e){console.log(`update ${e}`);let t=0,s=-1;for(let l=0;l<c.userCount;l++){const n=y(e,l);console.log(`IPD(${e},${l})=${n}`),Math.abs(n)>Math.abs(t)&&(t=n,s=l)}console.log(`maxIPD=${t},maxIPD_o=${s}`),s>=0&&(t<.1&&(t=.1),t>10&&(t=10),m(e,s,-t))}function b(e){const t=d(e);let s=0;for(let l=0;l<c.userCount;l++){const n=v(e,l,t);for(let u=0;u<c.userCount;u++){const a=v(e,u,t),o=v(u,l,t),r=a*o-n;s+=r*r}}return s}function y(e,t){const s=d(e);let l=0;const n=v(e,t,s);for(let a=0;a<c.userCount;a++){const u=v(t,a,s),o=v(e,a,s);l+=u*(n*u-o),l-=o*u-n}const u=v(t,t,s)-1;return l-=n*u*u,l}function k(e,t){t in c.userMemory||(c.userMemory[t]=[]),c.userMemory[t].push(e.id);const s=d(t),l=b(t);f(e.i,e.j,e.v,s);const n=b(t),u=l-n;console.log("d:",u),i("viewedMessage",e.id,Math.abs(u)),i("likedMessage",e.id,u>0?u:0+Math.random()*Math.abs(u)*.5)}function w(){for(let e=0;e<c.userCount;e++)0==c.userType[e]&&h(e)}function R(e,t){const s=(e,t)=>Math.abs(v(e,t,d(e)))<.5;let l=s(e,t);if(!l){let n=!1;for(let l=1;l<t-e&&!n;l++)n=!s(e,e+l)&&!s(e+l,t);let u=!1;for(let l=1;l<e-t+c.userCount&&!u;l++){let n=t+l;n>=c.userCount&&(n-=c.userCount),u=!s(n,e)&&!s(t,n)}l=n&&u}return l}function x(e){const t=c.userCount;c.userCount+=1,c.userType.push(e),i("createdUser",t)}var _=s(2388),M=(s(3110),s(6051));new M.Ay({apiKey:"sk-uFDUPAriuBg6l84rhrFxcRect2V0gpH59KVXj8dxG6wblr5p",baseURL:"http://localhost:8080/llmapi",dangerouslyAllowBrowser:!0});function F(e){return new Promise(t=>{setTimeout(t,e)})}async function U(e){return await F(100),e}const A={userTexts:[],messageTexts:[],generateQueue:[],flowLabel:["主推送流"]};localStorage.getItem("text");function C(e){return e>=0&&e<A.userTexts.length?A.userTexts[e]:{name:"",prompt:""}}function T(e){return e<0||e>=A.userTexts.length?e.toString():A.userTexts[e].name}function S(e){let t="";return e in c.userMemory&&c.userMemory[e].length>0&&(t=`你需要参考的信息：[${c.userMemory[e].filter(e=>e<A.messageTexts.length).map(e=>A.messageTexts[e].minimumVersion).join()}]。`),`${t}`}const X=["神经质","幽默","严肃"];function j(e){return e[Math.floor(Math.random()*X.length)]}function W(e,t){return e>.5?`对${t}的认同`:e<.5?`反对${t}`:"对社交媒体平台推送机制的反感"}function $(e){return`扮演一名社交媒体用户虚构贴文。你的个性：${j(X)}。${S(e.i)}要求1：长度1句话。要求2：站在${C(e.i).prompt}的视角表达你${W(e.v,C(e.j).prompt)}。`}function I(e){return`[${e}]扮演作者，选择1个短语作为标题，不要出现任何标点符号。`}function K(e){return`[${e}]一句话总结这篇社媒博文。`}let L=!1;async function O(){if(L||void 0==A.generateQueue||0==A.generateQueue.length)return;const e=A.generateQueue[0];if(void 0==e)return;console.log("生成新消息"),L=!0,A.messageTexts.length-1<e&&A.messageTexts.push({title:"",content:"",minimumVersion:""});const t=await U($(c.messages[e])),s=await U(I(t)),l=await U(K(t));A.messageTexts[e]={title:s,content:t,minimumVersion:l},localStorage.setItem("text",JSON.stringify(A)),i("generatedMessage",e,s,t),A.generateQueue.shift(),L=!1,console.log("消息生成完毕")}async function E(e){void 0!=A.generateQueue&&(e.id>=A.messageTexts.length||""==A.messageTexts[e.id].title)&&A.generateQueue.push(e.id)}const P={class:"username"};var V=(0,n.pM)({__name:"CanvasUser",props:{id:{},x:{},y:{},selected:{type:Boolean},focused:{type:Boolean},px:{},py:{},ps:{},badgeDefault:{},badgeInfo:{}},setup(e){const t=e;function s(){i("userPressed",t.id)}const l=c.userType[t.id];return(t,o)=>((0,n.uX)(),(0,n.CE)("div",{class:"canvas-user",style:(0,a.Tr)({left:(e.px+e.x)*e.ps-20+"px",top:(e.py+e.y)*e.ps-20+"px",outline:(e.selected?"2px":"1px")+" solid "+(e.focused?"#ff0":"#000"),"border-radius":(0==(0,u.R1)(l)?50:0)+"%"}),onClick:s},[(0,n.bF)((0,u.R1)(_.A),{value:e.badgeDefault,offset:[10,-5]},{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(_.A),{value:e.badgeInfo,type:"info",offset:[10,30]},{default:(0,n.k6)(()=>[(0,n.Lk)("div",P,(0,a.v_)((0,u.R1)(T)(e.id)),1)]),_:1},8,["value"])]),_:1},8,["value"])],4))}}),z=s(1241);const B=(0,z.A)(V,[["__scopeId","data-v-3ecaf952"]]);var D=B;const G=150,Y=1/60,Q=100;var q=(0,n.pM)({__name:"GameCanvas",props:{appState:{}},setup(e){const t=(0,u.KR)({users:[],selectedUsers:[],focusedUser:-1}),s=e,l=(0,u.KR)(0),o=(0,u.KR)(0),i=(0,u.KR)(1);r("userPressed",e=>{if("user-edit"==s.appState.mode)return;let l=t.value.selectedUsers;l.includes(e)?t.value.focusedUser!=e?t.value.focusedUser=e:(t.value.selectedUsers=l.filter(t=>t!=e),t.value.focusedUser=-1):(t.value.focusedUser=e,l.push(e))});let v=!1,f=0,p=0,g=0,m=0,h=0,b=0,y=0,k=0,w=-1;function x(e){if(e.preventDefault(),1==e.touches.length){const t=e.touches[0];h=t.clientX,b=t.clientY,y=l.value,k=o.value}}function _(e){e.preventDefault(),0==e.touches.length&&(w=-1)}function M(e){if(e.preventDefault(),1==e.touches.length&&-1==w){const t=e.touches[0];g=t.clientX,m=t.clientY,l.value=g-h+y,o.value=m-b+k}else if(2==e.touches.length){const t=e.touches[0].clientX,s=e.touches[0].clientY,l=e.touches[1].clientX,n=e.touches[1].clientY,u=Math.sqrt((t-l)*(t-l)+(s-n)*(s-n));if(w>0){let e=.01*(u-w);e<-1&&(e=-1),e>1&&(e=1),e+=1,X((t+l)/2,(s+n)/2,e)}w=u}}function F(e){4==e.buttons&&(l.value+=e.movementX/i.value,o.value+=e.movementY/i.value),g=e.clientX,m=e.clientY,v=1==e.buttons}function U(e){1==e.buttons&&(v=!0,f=e.clientX,p=e.clientY),T=e.buttons}let A,C,T=0;function S(e){1==T&&(t.value.selectedUsers=[],t.value.focusedUser=-1),v&&Math.abs(g-f)>10&&Math.abs(m-p)>10&&(t.value.selectedUsers=t.value.users.filter(s=>{const n=(s.x+l.value)*i.value,u=(s.y+o.value)*i.value;let a=!!e.shiftKey&&t.value.selectedUsers.includes(s.id);return(n>f&&n<g||n>g&&n<f)&&(u>p&&u<m||u>m&&u<p)&&(a=!0),a}).map(e=>e.id)),v=!1}function X(e,t,s){let n=i.value,u=e/n-l.value,a=t/n-o.value;i.value*=s;let r=i.value,c=e/r-l.value,d=t/r-o.value;l.value+=c-u,o.value+=d-a}function j(e){let t=.01*e.wheelDelta;t<0&&(t+=2),t<0||t>2||X(e.clientX,e.clientY,t)}const W=Y*Q;function $(e,t,s,l,n,u,a){const o=s-e,r=l-t,i=o*o+r*r,c=Math.sqrt(i),d=G*u,v=15*a;let f=v*(c-d)/i*W;return n&&c>=d&&(f=0),{x:o*f,y:r*f}}function I(){const e=t.value.users;for(let t=0;t<c.userCount-1;t++){const s=e[t];for(let l=t+1;l<c.userCount;l++){const n=e[l],u=R(t,l);let a=$(s.x,s.y,n.x,n.y,u,u?1:.5,.5);s.vx+=a.x,s.vy+=a.y,n.vx-=a.x,n.vy-=a.y}}Object.values(t.value.users).forEach(e=>{e.vx*=1-.2*W,e.vy*=1-.2*W,e.vx-=.01*e.x*W,e.vy-=.01*e.y*W,e.x+=e.vx*W,e.y+=e.vy*W}),K()}function K(){if(A.width=window.innerWidth,A.height=window.innerHeight,s.appState.editingUser>=0){const e=d(s.appState.editingUser);Object.entries(e).forEach(([e,s])=>{const n=e.split("_"),u=parseInt(n[0],32),a=parseInt(n[1],32),r=t.value.users[u],c=t.value.users[a];let d=Math.abs(s);if(d>1&&(d=1),d<0)return;const v=(r.x+l.value)*i.value,f=(r.y+o.value)*i.value,p=(c.x+l.value)*i.value,g=(c.y+o.value)*i.value;C.strokeStyle="#000",C.font="16px Arial",C.fillText(s.toFixed(2).toString(),.5*(v+p),.5*(f+g));const m=`#${s<0?"ff":"00"}00${s>=0?"ff":"00"}${Math.floor(255*d).toString(16).padStart(2,"0")}`;C.strokeStyle=m,C.beginPath(),C.moveTo(v,f),C.lineTo(p,g),C.stroke()})}else for(const s in c.subjectiveUserGraph){const e=t.value.users[s];Object.entries(c.subjectiveUserGraph[s]).forEach(([n,u])=>{const a=n.split("_"),r=a[0];if(r!=s.toString())return;const c=parseInt(a[1],32),d=t.value.users[c];let v=Math.abs(u);if(v>1&&(v=1),v<0)return;const f=`#${u<0?"ff":"00"}00${u>=0?"ff":"00"}${Math.floor(255*v).toString(16).padStart(2,"0")}`;C.strokeStyle=f,C.beginPath(),C.moveTo((e.x+l.value)*i.value,(e.y+o.value)*i.value),C.lineTo((d.x+l.value)*i.value,(d.y+o.value)*i.value),C.stroke()})}const e=g-f,n=m-p;v&&Math.abs(e)>10&&Math.abs(n)>10&&(C.rect(f,p,e,n),C.fillStyle="#00000033",C.fill())}return(0,n.sV)(()=>{A=document.getElementById("lines"),C=A.getContext("2d"),setInterval(I,1e3*Y),r("createdUser",e=>{t.value.users.push({id:e,x:e%2*100,y:100*Math.floor(e/2),vx:0,vy:0})}),r("removedUser",()=>{t.value.users.pop()})}),(s,u)=>((0,n.uX)(),(0,n.CE)("div",{class:"canvas",style:(0,a.Tr)({"background-size":20*i.value+"px "+20*i.value+"px","background-position":l.value*i.value+"px "+o.value*i.value+"px"})},[(0,n.Lk)("div",{class:"mouse-input-handler",onMousedown:U,onMouseup:S,onMousemove:F,onTouchstart:x,onTouchend:_,onTouchmove:M,onWheel:j},null,32),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.value.users,s=>((0,n.uX)(),(0,n.Wv)(D,{key:s.id,id:s.id,x:s.x,y:s.y,px:l.value,py:o.value,ps:i.value,selected:t.value.selectedUsers.includes(s.id),focused:t.value.focusedUser==s.id,"badge-default":s.id in e.appState.uncollectedMessages?e.appState.uncollectedMessages[s.id].length:0,"badge-info":0},null,8,["id","x","y","px","py","ps","selected","focused","badge-default"]))),128)),u[0]||(u[0]=(0,n.Lk)("canvas",{id:"lines"},null,-1))],4))}});const H=(0,z.A)(q,[["__scopeId","data-v-7fbe4dfb"]]);var J=H,N=s(2517),Z=s(2151),ee=s(123);const te={key:1},se={key:1};var le=(0,n.pM)({__name:"MessageCard",props:{msg:{}},setup(e){const t=e;let s=(0,u.KR)(""),l=(0,u.KR)("");setInterval(()=>{const e=A.messageTexts[t.msg.id];"undefined"!=typeof e&&""!=e.title&&(s.value=e.title,l.value=e.content)},1);return(t,o)=>((0,n.uX)(),(0,n.Wv)((0,u.R1)(N.Ay),{class:"message-card",hoverable:""},{header:(0,n.k6)(()=>[""==(0,u.R1)(s)?((0,n.uX)(),(0,n.Wv)((0,u.R1)(Z.A),{key:0,width:100,round:""})):((0,n.uX)(),(0,n.CE)("div",te,[(0,n.Lk)("h3",null,[(0,n.bF)((0,u.R1)(ee.Ay),{"line-clamp":2},{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)((0,u.R1)(s)),1)]),_:1})])]))]),action:(0,n.k6)(()=>[(0,n.RG)(t.$slots,"action")]),default:(0,n.k6)(()=>[""==(0,u.R1)(l)?((0,n.uX)(),(0,n.Wv)((0,u.R1)(Z.A),{key:0,text:"",repeat:2})):((0,n.uX)(),(0,n.CE)("div",se,[(0,n.Lk)("p",null,(0,a.v_)(e.msg.t),1),(0,n.Lk)("p",null,[(0,n.bF)((0,u.R1)(ee.Ay),{"line-clamp":2},{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)((0,u.R1)(l)),1)]),_:1})])])),(0,n.RG)(t.$slots,"suffix")]),_:3}))}});const ne=(0,z.A)(le,[["__scopeId","data-v-61735a0a"]]);var ue=ne,ae=s(5770),oe=(0,n.pM)({__name:"MessageList",props:(0,n.zz)({source:{},filter:{type:Function},select:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,s=(0,n.fn)(e,"modelValue");function l(){return[{title:"创作群体",key:"i"},{title:"时间",key:"t"},{title:"涉及群体",key:"j"},{title:"态度",key:"v"}]}let a=l();return t.select&&(a=[{type:"selection",multiple:!0,disabled:e=>!t.filter(c.messages[e.id])},...a]),(t,l)=>((0,n.uX)(),(0,n.Wv)((0,u.R1)(ae.A),{"checked-row-keys":s.value,"onUpdate:checkedRowKeys":l[0]||(l[0]=e=>s.value=e),columns:(0,u.R1)(a),data:e.source,pagination:!1,bordered:!1,"row-key":e=>e.id,striped:""},null,8,["checked-row-keys","columns","data","row-key"]))}});const re=oe;var ie=re,ce=s(8140),de=s(8819),ve=s(3981),fe=s(7966),pe=s(7006),ge=s(6693),me=s(9310),he=s(8122),be=s(7732),ye=s(4526),ke=s(6688),we=s(4275),Re=s(9189),xe=s(496),_e=s(1527),Me=s.n(_e),Fe=s(9387),Ue=s(3913),Ae=(0,n.pM)({__name:"MessageFlow",props:(0,n.zz)({flow:{}},{source:{},sourceModifiers:{},label:{},labelModifiers:{}}),emits:["update:source","update:label"],setup(e){const t=(0,n.fn)(e,"source"),s=(0,n.fn)(e,"label");return(l,a)=>{const o=(0,n.g2)("center");return(0,n.uX)(),(0,n.Wv)((0,u.R1)(N.Ay),{class:"flow"},{default:(0,n.k6)(()=>[(0,n.bF)(o,null,{default:(0,n.k6)(()=>[0==e.flow?((0,n.uX)(),(0,n.Wv)((0,u.R1)(Fe.Ay),{key:0},{default:(0,n.k6)(()=>[...a[2]||(a[2]=[(0,n.eW)("主推送流",-1)])]),_:1})):((0,n.uX)(),(0,n.Wv)((0,u.R1)(Ue.A),{key:1,value:s.value,"onUpdate:value":a[0]||(a[0]=e=>s.value=e),size:"small",type:"text",placeholder:"自定义推送流"},null,8,["value"]))]),_:1}),(0,n.bF)((0,u.R1)(Me()),{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e),animation:"200","item-key":"element",group:"flow",style:{height:"100%"}},{item:(0,n.k6)(e=>[(0,n.Lk)("div",null,[(0,n.bF)(ue,{msg:(0,u.R1)(c).messages[e.element]},{action:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(be.Ay),{onClick:s=>t.value=t.value?.filter(t=>t!=e.element)},{default:(0,n.k6)(()=>[...a[3]||(a[3]=[(0,n.eW)("移除",-1)])]),_:1},8,["onClick"])]),_:2},1032,["msg"])])]),_:1},8,["modelValue"])]),_:1})}}});const Ce=Ae;var Te=Ce,Se=s(8802),Xe=s(8051);const je={class:"app"},We={class:"flows"},$e={class:"corner-buttons corner-buttons-rb"},Ie={class:"corner-buttons corner-buttons-lb"};var Ke=(0,n.pM)({__name:"App",setup(e){(0,n.sV)(()=>{x(0),x(0),x(1),x(1);for(let e=0;e<c.userCount;e++){const t=d(e);for(let s=0;s<c.userCount;s++)for(let l=s;l<c.userCount;l++)f(s,l,s==e?1:-1,t)}A.userTexts.push({name:"学生",prompt:""},{name:"丘",prompt:""},{name:"人品",prompt:""},{name:"数学",prompt:""})});const t=(0,u.KR)({mode:"user-edit",editingUser:-1,uncollectedMessages:{},collectedMessages:[],flows:[[]],messageStatistic:{}}),s=(0,u.KR)(!1),l=(0,u.KR)(!1),o=(0,u.KR)(c.messages);function i(e){return o.value.filter(t=>t.i==e)}const v=(0,u.KR)([]);function g(e){if(v.value.includes(e))return"";const t=A.flowLabel.indexOf(e);return void 0==t||t<=0?"":e}const m=(0,u.KR)(null);(0,n.wB)(m,e=>{e&&(0,n.dY)(()=>e.focus())});const h=(0,u.KR)(""),b=(0,n.EW)(()=>null===h.value?[]:A.flowLabel.filter(e=>!v.value.includes(e)&&e.includes(h.value)).map(e=>({label:e,value:e})));function y(e){t.value.uncollectedMessages[e.i]=t.value.uncollectedMessages[e.i].filter(t=>t!=e.id)}function k(e){y(e),t.value.flows[0].push(e.id)}function R(){c.time+=1,t.value.uncollectedMessages={};for(let e=0;e<t.value.flows.length;e++)p(t.value.flows[e],e),t.value.flows[e]=[];w(),M.value=!0}r("userPressed",e=>{if(0==c.userType[e]&&"user-edit"==t.value.mode){s.value=!0,t.value.editingUser=e;while(c.userFlowTags.length<=e)c.userFlowTags.push([]);v.value=c.userFlowTags[e].map(e=>A.flowLabel[e])}}),r("addedMessage",e=>{e.i in t.value.uncollectedMessages||(t.value.uncollectedMessages[e.i]=[]),t.value.uncollectedMessages[e.i].push(e.id)}),r("addedMessage",e=>E(e)),setInterval(()=>{O()},1e3),setInterval(()=>{_.value=window.innerWidth},1);const _=(0,u.KR)(0);r("viewedMessage",(e,s)=>{e in t.value.messageStatistic||(t.value.messageStatistic[e]={views:0,likes:0}),t.value.messageStatistic[e].views+=s}),r("likedMessage",(e,s)=>{e in t.value.messageStatistic||(t.value.messageStatistic[e]={views:0,likes:0}),t.value.messageStatistic[e].likes+=s});const M=(0,u.KR)(!1);return(e,o)=>((0,n.uX)(),(0,n.CE)("div",je,[(0,n.bF)(J,{"app-state":t.value,ref:"canvas"},null,8,["app-state"]),(0,n.bF)((0,u.R1)(ce.A),{show:M.value,"onUpdate:show":o[0]||(o[0]=e=>M.value=e),preset:"card",style:{width:"600px"},title:"统计数据",size:"huge",bordered:!1,onUpdateShow:o[1]||(o[1]=e=>{e||(t.value.messageStatistic={})})},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.value.messageStatistic,(e,t)=>((0,n.uX)(),(0,n.Wv)(ue,{key:t,msg:(0,u.R1)(c).messages[t]},{suffix:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(de.Ay),null,{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(ve.Ay),{span:12},{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(fe._),null,{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(Se.A))]),_:1}),(0,n.bF)((0,u.R1)(pe.A),{from:0,to:e.views},null,8,["to"])]),_:2},1024),(0,n.bF)((0,u.R1)(ve.Ay),{span:12},{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(fe._),null,{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(Xe.A))]),_:1}),(0,n.bF)((0,u.R1)(pe.A),{from:0,to:e.likes},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["msg"]))),128))]),_:1},8,["show"]),(0,n.bF)((0,u.R1)(ge.A),{show:l.value,"onUpdate:show":o[4]||(o[4]=e=>l.value=e),width:_.value>800?800:_.value,placement:"left"},{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(me.A),null,{default:(0,n.k6)(()=>[(0,n.Lk)("div",We,[(0,n.bF)((0,u.R1)(he.A),{style:{"flex-grow":"1","overflow-y":"scroll","overflow-x":"hidden"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.value.flows.length,(e,s)=>((0,n.uX)(),(0,n.Wv)(Te,{key:s,label:(0,u.R1)(A).flowLabel[s],"onUpdate:label":e=>(0,u.R1)(A).flowLabel[s]=e,source:t.value.flows[s],"onUpdate:source":e=>t.value.flows[s]=e,flow:s},null,8,["label","onUpdate:label","source","onUpdate:source","flow"]))),128)),(0,n.bF)((0,u.R1)(N.Ay),{class:"flowControl"},{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(he.A),{vertical:""},{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(be.Ay),{onClick:o[2]||(o[2]=e=>t.value.flows.push([]))},{default:(0,n.k6)(()=>[...o[11]||(o[11]=[(0,n.eW)("添加",-1)])]),_:1}),(0,n.bF)((0,u.R1)(be.Ay),{onClick:o[3]||(o[3]=e=>t.value.flows.pop()),disabled:t.value.flows.length<=1},{default:(0,n.k6)(()=>[...o[12]||(o[12]=[(0,n.eW)("移除",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["show","width"]),(0,n.bF)((0,u.R1)(ge.A),{class:"user-editor-container",show:s.value,"onUpdate:show":o[8]||(o[8]=e=>s.value=e),width:_.value>500?500:_.value,onUpdateShow:o[9]||(o[9]=e=>{e||((0,u.R1)(c).userFlowTags[t.value.editingUser]=v.value.map(e=>(0,u.R1)(A).flowLabel.indexOf(e)).filter(e=>e>0),console.log((0,u.R1)(c).userFlowTags[t.value.editingUser]),t.value.editingUser=-1)})},{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(me.A),{"native-scrollbar":!1},{header:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(ye.A),{subtitle:"用户分析",onBack:o[5]||(o[5]=e=>s.value=!1)}),(0,n.Lk)("h1",null,"#"+(0,a.v_)((0,u.R1)(T)(t.value.editingUser)),1)]),default:(0,n.k6)(()=>[(0,n.Lk)("p",null,[(0,n.bF)((0,u.R1)(ke.A),{value:v.value,"onUpdate:value":o[7]||(o[7]=e=>v.value=e),onCreate:g},{input:(0,n.k6)(({submit:e,deactivate:t})=>[(0,n.bF)((0,u.R1)(we.A),{ref_key:"autoCompleteInstRef",ref:m,value:h.value,"onUpdate:value":o[6]||(o[6]=e=>h.value=e),size:"small",options:b.value,placeholder:"添加订阅","clear-after-select":!0,onSelect:t=>e(t),onBlur:t},null,8,["value","options","onSelect","onBlur"])]),_:1},8,["value"])]),(0,n.bF)((0,u.R1)(Re.A),{class:"user-editor",type:"segment",animated:""},{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(xe.A),{name:"new",tab:"最新发言"},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.value.uncollectedMessages[t.value.editingUser],e=>((0,n.uX)(),(0,n.Wv)(ue,{msg:(0,u.R1)(c).messages[e],key:e},{action:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(he.A),{justify:"space-between"},{default:(0,n.k6)(()=>[(0,n.bF)((0,u.R1)(be.Ay),{onClick:t=>k((0,u.R1)(c).messages[e])},{default:(0,n.k6)(()=>[...o[13]||(o[13]=[(0,n.eW)("收集",-1)])]),_:1},8,["onClick"]),(0,n.bF)((0,u.R1)(be.Ay),{onClick:t=>y((0,u.R1)(c).messages[e])},{default:(0,n.k6)(()=>[...o[14]||(o[14]=[(0,n.eW)("忽略",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["msg"]))),128))]),_:1}),(0,n.bF)((0,u.R1)(xe.A),{name:"history",tab:"历史发言"},{default:(0,n.k6)(()=>[(0,n.bF)(ie,{source:i(t.value.editingUser),filter:e=>!0,select:!1},null,8,["source"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show","width"]),(0,n.Lk)("div",$e,[(0,n.bF)((0,u.R1)(be.Ay),{round:"",type:"primary",size:"large",onClick:R},{default:(0,n.k6)(()=>[...o[15]||(o[15]=[(0,n.eW)("结束回合",-1)])]),_:1})]),(0,n.Lk)("div",Ie,[(0,n.bF)((0,u.R1)(be.Ay),{round:"",type:"primary",size:"large",onClick:o[10]||(o[10]=e=>l.value=!0)},{default:(0,n.k6)(()=>[...o[16]||(o[16]=[(0,n.eW)("编辑推送流",-1)])]),_:1})])]))}});const Le=Ke;var Oe=Le;(0,l.Ef)(Oe).mount("#app")}},t={};function s(l){var n=t[l];if(void 0!==n)return n.exports;var u=t[l]={exports:{}};return e[l].call(u.exports,u,u.exports,s),u.exports}s.m=e,function(){var e=[];s.O=function(t,l,n,u){if(!l){var a=1/0;for(c=0;c<e.length;c++){l=e[c][0],n=e[c][1],u=e[c][2];for(var o=!0,r=0;r<l.length;r++)(!1&u||a>=u)&&Object.keys(s.O).every(function(e){return s.O[e](l[r])})?l.splice(r--,1):(o=!1,u<a&&(a=u));if(o){e.splice(c--,1);var i=n();void 0!==i&&(t=i)}}return t}u=u||0;for(var c=e.length;c>0&&e[c-1][2]>u;c--)e[c]=e[c-1];e[c]=[l,n,u]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var l in t)s.o(t,l)&&!s.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,u,a=l[0],o=l[1],r=l[2],i=0;if(a.some(function(t){return 0!==e[t]})){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(r)var c=r(s)}for(t&&t(l);i<a.length;i++)u=a[i],s.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return s.O(c)},l=self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=s.O(void 0,[504],function(){return s(6167)});l=s.O(l)})();
//# sourceMappingURL=app.bfd5ed29.js.map