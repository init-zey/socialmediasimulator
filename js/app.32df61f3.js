(function(){"use strict";var e={2964:function(e,a,t){var n=t(5130),o=t(6768),s=t(144),r=(t(4114),t(8111),t(2489),t(3110),t(8335),t(4232));t(7588),t(1701);const l={};function i(e,a){e in l||(l[e]={});const t=Object.keys(l[e]).length-1;return l[e][t]=a,t}function u(e,a){e in l&&delete l[e][a]}function c(e,...a){e in l&&Object.values(l[e]).forEach(e=>{e(...a)})}var d=t(6051);new d.Ay({apiKey:"sk-uFDUPAriuBg6l84rhrFxcRect2V0gpH59KVXj8dxG6wblr5p",baseURL:"http://localhost:8080/llmapi",dangerouslyAllowBrowser:!0});async function v(e){return e}var h=["Dr_Gears","Lee_Byron","Kain_Pathos_Crow","Kraito","Lt_Masipag","cyrus013","far2","HK-016","FritzWillie","Jagyr","GeoMandell","Bijhan","A_Fat_Ghost","CR056","Arcibi","Askew","Dilzo","regedit","Volpes","Binks","K25","The_Raven","Moto42","DisgruntledGrunt","Rossalcopter","no_one","Re_Watcher","Dr_Denizen_Nomad","axlan","Van_Dorn","jezebella","RoboCicero","R4-J-Admin","Slate","Richmond","Godwin","Albireo","Doctor_Device","scratskinner","M_Gargantua","Daydreamin","Pair_Of_Ducks","Lawyer_Dog","Fallen_W","Tapioca_Shine","DrakeRunner","soul1382","WillDreil","FaeDine","gscshoyru","Eth","Guildenstern","AsmodeusDark","Raaxis","Bigsquid","Katokijime","Professor_Q","Overstuffed_Dragon","NamelessPersonnel","Isaac_Roth","Gulliver","Keith_Essorexx","Dr_Xodar","RiotGearEpsilon","Cthulhu1138","DrClef","geistdeskrieg","ITHIDET","Moose_Fisher","Choel","Dr_Teeth","Callis_Carnival","Kulzn","Eberstrom","Eremus","Iceberg_7","Dr_Waldo_Flagg","Sc0tch","Palhinuk","snorlison","Dr_Kondraki","Ramming_Stone","Khama","ReasearcherWeiss","mwknight","Captain_A","sirbestdone","BlastYoBoots","Dr_Gerald","Hugh_the_Hand","Dr_Wacey","PennywiseTheClown","LordAndromeda","Loomer","Overseer","judgedeadd","Dr_Ouros","elauzel","qsmike","theta","Seth_Beasley","Agent_Kramer","Redacted","Agent-Red","agatharights","Garenator","Mr_Burke","Dave_Rapp","oxygen83","Devas","SinisdarToste","JonnyD","super_man","Agent_Wolfcreed","Sokolov","apocalemur","Diarca","Reagle","unconscionable","Wheen","Qliphah","Dascoyne","krathar","nuravenightmare","Mezzo","Leyendecker","Axicore","V_the_Happy_Lurker","Haaaaaach","08-MD3P","Issac_Roth","JoystickHero","Agent_Thornsmith","Zemyla","MidnightMiono","NightroadAX","Kilgore_Trout","Treadedwater","fenderson","Maledictis","theburp","Dr_NPC","Urashiman","AntagonistNo666","Mistermonster","BananaSpider","Butler","Kenny_Strife","Ross_Smith","SingleEyebrow","Catdrake","Hinoa","ManualSearch","Kaos_Machina","Trid","Yubi_Shines","Nifar","WillBlack","NineAndNinetyHours","Picto","RazDaz","Alwayswatching","Kunou","lentilstew","GleefulNihilism","sloppyjoes7","Kasu","Dr_Ballou","Dr_Gloaming","CptBellman","mack2028","LordHaHa","Infynite","Agent_Circeus","Sethanda","dougpphbos","Haseri","weavermount","esmerelder","Xamnam","ModernMajorGeneral","TiberiusThyben","twelvevoid","NerfJihad","listmaker","nkhorlin","Ekzentric_Lohner","Unlucky_Scarecrow","M_Faust","SpoonOfEvil","Phantasmgoria","Buburubu","Krisnack","Shinyo","Dr_Mentha","NekoChris","Xeans","meh64","Kilo_Bravo","Xewleer","Marathon","Mr_Huggles","Devilock","Glaive","Peri_McGovern","dreamandwonder","Dr_Voss","yirimyah","Dr_Rath","Sobaa","Melfice","Ech0Sierra","Wolfun","Futhum","Dragon_of_Life","MattyWilliams","APaddedCell","Selph","GG_Crono","DrTVague","David_B_Brown","MrAnt","Pig_catapult","Gowlling","Lacynth","DrPaladynian","DrBar","DrBanner","Alan_Raven","Skali_Sharpnose","cotfi2","IT_Spook","DoctorPoivre","Hans_Ziegler","Shatterfront","Mikeavelli","Thisfox","Mulciber","RhettSarlin","Dr_English","Dr_Atticus","MountainMan","Dabo_Jones","Imerican","Felgraf","Dr_Gemini","Aero17","Dr_Fuller","Guthlaf","bryantv","Bouncl","Amarth","host13","PacifistDalek","Flatscam","Elvis_Christ","Raphomet","SugarDonut","Lycanious","Dr_deCuir","Drewbear","DrRoger","DrKens","DoctorPhaustus","Duntada_Man","Dr_Sutler","Dante_Connors","ZKZombiekitty","TyranaRaptor","thefifthman","Anna_Graham","MrUnimport","Spaztique","darkrequiem0","Dr_Gilmore","DelLeon","Dr_Lennon","WhereDidItGo","Sophia_Light","Moley","Oksbad","Lance_Silverman","Zenner","ClockworkIndustries","Dr_Frohman","aaronkalmon","JimmyD","poiuppx","AllanMarshall","SO_Gideon","Heiden","Deva","sonicjoeplus","Rolaran","aikoe","Lucian_Ostrum","ClockworkMage","Camwyn","Arovet","DanP","Dr_Stevenson","seisatsu","Seventh_Soul","Sisial","Ph4yt3","Whitewings","Lat_Ware","Flux","Matilde_Beiton","Autonomous","Azeltir","Zeon_Twilight","jhubert","TheArchivist","Frank_Horrigan","XStickman","jesdynf","Negativity","EmancipatedEmptiness","nyxetera","Dr_Cooper","SamResuAjnin","OddOne","Jack_Denton","MelWong","Waxx","FMRadio","Brucy","flowstoneknight","Aposiopesis","Nicolas_Rei","ginkitsu","Benjiman_Slivkoff","TrueSnow","rippen2020","Skinavish","Sonn","Rick_Revelry","Dr_Rundfunk","Sorts","Old_Charlie","Legendary","Arcalane","icarussmith","Utanith","Dumori","Hobelhouse","BlackMetalVenom","Mr_Citric","GreenJay","Samosael","UtterlyUseless","Luxtizer","Domura","Nicholas_Logan","Longsight","DrEverettMann","Agent_Peters","BeeDee","kai_hawk","Koryu_Ninja","Timpani","JSoban","SophosBlitz","Mordecai","Clipperton","Dr_Love","Iax","mrbill","AgentSchism","Mexora","Doctor_Lehrkin","Meister_Chancellor","Agent_Agetn_Chalice","DrInferno","Dr_Rhaomi","Sillyman","Dr_Geogaddi","Wires","Quikngruvn","Partileman","AgentGray","logansorenssen","underthered","ledtim","apocryphal","Mathias1356","Citizen_Erased","Servitor_2152","Dr_Demo","sightlesseyes","Eyclonus","KnightofNEE","CheesyJelly","Penguinizer","TheCustodian","finnguy","lynx2210","sulfa","metalshop","P_aul","Donny_Marko","carriontrooper","Sensei_Le_Roof","EjoThims","Dr_Hyrule","HawkW","Omar_Karindu","DrMocha","Room21","Ryusui","Noaqiyeum","Aibaleet","Khisareth","Fates_End","Homnibombus","Moonsquares","klaw646","Avery_Cates","Dhaos","Tabbyclaw","Dr_Anadi","Dr_Schubert","Dr_Sharp","hellbore","DocTrilby","Shewp","BoxShrinker","blakyoshi7","Ellen_Traytin","Chatni_Aeon","phlip45","Agent_Wilkes","Agent_Barnes","BrickBat","Dr_West","Dr_Edelstein","Dr_Motive","drweaver","LobstahBisck","BonSequitur","Matt_Dalton","Janus_Sunaj","Aurailen","katiekawaii","noogenesis","Pale_Chapter","Wolfwoods","Dr_Talson","quantumshard","Erulogos","CEMartin","Gnosis","Sofaspud","Qarim_Trablusi","Cowardly","DrBlaze","RenwickCustomer","alchahest","Rastair","Rael","Frank_Wheeler","Archelon","Lacer","Radioactive_Zombie","jo_black","Xphex","thattallfellow","Gnostalgia","Alephra","Shadow_Panther","Cornbread_TP","Grooth","Helcaraxe","Maniette","Chromapolitan","HaudNomen","CTHalwell","Dakkan","Nioki","BrentOGara","Photosynthetic","RavenGrave","Smapti","Soulbane","Izixs","Kylen_Phylar","Mayu_Zane","EllisLarrimi","wallyc","Mount","Don_Andy","Chevallier","Slight","IronSyndicate","Mutilated_Face","Kyte","AcidDrops","Atrum_Faustus","Valandar","Ariamaki","AaronKeskitalo","limited_moon","DoktorRamhbel","Edcrab","kendrakirai","Finn_Mackenzie","wanabeswordsman","Peter_Ibrahim","CForrester","Doctor_Rasis","Aespir","fgsfds","Daetrin","TheAristocrat","tunedtoadeadchannel","hylli","Shaviv","Phenominon","Pons","Vangelis","Sgeo","Irrisia","Captain_Lhurgoyf","AmbiguousPronoun","Schaufus","Dialed","thekit","Sidle","cky_throwaway","Grent","duali7y","mwchase","doubleblaze","Jack_Clarkson","SimpleCadence","Quixotess","RetsofNoraa","wjmacguffin","potatoman73","ProfSnider","G_Fox","Blade_bane","Ralphomon","tomatogoatee","retrocombine","Dr_Sigurd","Firock_Finion","symetrichaos","DrStokes","Kab_#224","JKyle","Jetman123","xoder","TheGunheart","auraseer","Pieguy259","PTL","Devilot","Virgo666","Josef_Kald","Tom90deg","OgremanSam","DMPath","Falcon_Tasangi","Ignifer","Magnight","Alazar","Draconis-Wyrm","Texanhick20","Warp_Eater","rootbeer277","Lugh_Lamhfhada","FPST","Zartosht","agent893","Jorum","Spenser_Babyak","Lopsidation","Dr_Aries","Laudre","Shadowreaver","zaratustra","Xelkelvos","Mahmoth","Slicer","Major_Harker","Genobee","FatherG","Mr_LeBlanc","Jack_Neil","CensorFairy","Zaeyde","BeamBrain","Letaluss","Kitsy","Leicontis","MrXeZe","Izzhov","tombones","Drakeblood4","Kingreaper","Schumacher","Thelogman","Wildt","Lowell","Agent_Godless","Spartan_0214","Axiotheie","Espinoza","Kimura_Okagawa","Dr_Adams","Tabi","saevitia","Eikouta","Hollowing","MorkaisChosen","Jack_Rankin","SirZerous","blackmage","Chungy_McBungy","Neohumanoid","The_Stray","Andreas128","Riser","Arugula","Dreamaniac","mosquit0","bleggs","Trevkor","Ortin","Preachieved","karajade","saultydog","Dr_Alpha","Doctor_Ninja","doink67isaac","Aryn","Data_Corrupted","Joshua_Leon","Caliban1972","Michael_Hurd","FillerB","norms29","Tyenkrovy","Misplaced_Memory","Mr_Acis","Lecturn","Chameleon_X","cyber95","Alex_January","kaitwospirit","lab7","Aeish","InnocentBystander","Kaiser_Mortuus","DrSaurus","Dr_Wolf","julie_profumo","wormyguy","iamtycho","Freeze_Rabbit","Agent_Kelka","HumbertHumbert","DisasterGrind","LaranosTZ","Ian_Maxwell","Quillpaw","Soviet_Jesus","FullHazard","Light_Guardian","The_Blank","Dakka","GundarkEars","GolemServant","Descendant_X","Alex_Allen","bogleech","Jarmatus","Evilkritter","Odolowa","RichardJ28","Metaphorphosis","nutsrice","Iron_Wolf","Jonathon_Redley","Rexina_Idiotarum","Di_Terra","Liaoken","Tholral","SoManyPants","Calabast","Sir_Mize","Doctor_Manhattan","coolerkid","Daili_Lama","Imp_Gnome","Mul","Hidenozuke","Dr_Schroeder"];const f=["动画综合","漫画","婆罗门","电影","主播管人","卡牌桌游","战锤","胶佬","铁道厨","VOCALOID","小马","东方","舰娘"];let p={userTexts:[],messageTexts:[],generateQueue:[],flowLabel:["主推送流"]};function m(){const e=localStorage.getItem("text");null!=e&&(p=JSON.parse(e))}function _(){p={userTexts:[],messageTexts:[],generateQueue:[],flowLabel:["主推送流"]}}function g(e){if(e<0||e>=p.userTexts.length)return h[e%h.length];const a=p.userTexts[e].name;return 0!=C.userType[e]?"#"+a:a}const k=["神经质","幽默","严肃"];function y(e){return e[Math.floor(Math.random()*k.length)]}function b(e){return`[${e}]一句话总结这篇社媒博文。`}let R=!1;async function M(){if(R||void 0==p.generateQueue||0==p.generateQueue.length)return;const e=p.generateQueue[0];if(void 0==e)return;console.log("生成新消息"),R=!0,p.messageTexts.length-1<e&&p.messageTexts.push({content:"",minimumVersion:"",time:""});const a=C.messages[e];if(void 0!=a){let t=y(["对OTHER不感兴趣。"]);a.v>.5&&(t=y(["我记得OTHER，其实人品还不错","OTHER这人挺正常的","认可了@OTHER","天哪这简直就是我@OTHER"])),a.v<-.5&&(t=y(["@OTHER 我是不是你的一辈子","OTHER也是神人了","避雷OTHER，纯纯恶心人小丑","OTHER你看看自己说的什么话，你自己笑了没。"])),t=t.replace("OTHER",g(a.j));const n=await v(b(t));p.messageTexts[e]={content:t,minimumVersion:n,time:A(a.t)},c("generatedMessage",e,t),p.generateQueue.shift()}R=!1,console.log("消息生成完毕")}async function w(e){void 0!=p.generateQueue&&(e.id>=p.messageTexts.length||""==p.messageTexts[e.id].content)&&p.generateQueue.push(e.id)}const x=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function A(e){const a=e+100,t=(a/365+22).toFixed(),n=(a%365/12).toFixed(),o=a%7;return(12*Math.random()).toFixed()+":"+(60*Math.random()).toFixed()+" "+(Math.random()>.5?"P":"A")+"M • "+`${x[o]} ${n}, ${t}`}function D(e,a,t){const n=-t;return n>.5?"对":n<-.5?"？":"无感"}function S(e,a,t,n){if(e==a){if(t>=.5&&n<.5)return"变好了";if(t<=.5&&n>.5)return"不纯粹了";if(t>=-.5&&n<-.5)return"不烂了";if(t<=-.5&&n>-.5)return"烂完了"}return t>=.5&&n<.5?"接受OTHER":t<=.5&&n>.5?"不再认可OTHER":t>=-.5&&n<-.5?"不再排斥OTHER":t<=-.5&&n>-.5?"排斥OTHER":""}let C={userMemory:{},userGraph:{},messages:[],userType:[],userLife:[],userCount:0,userFlowTags:[]};const L=(0,s.KR)(0),F=(0,s.KR)(100);function T(){C={userMemory:{},userGraph:{},messages:[],userType:[],userLife:[],userCount:0,userFlowTags:[]},L.value=0,F.value=100,c("resetProgress")}function W(){T();const e=localStorage.getItem("progress");null!=e&&E(JSON.parse(e)),L.value=parseInt(localStorage.getItem("time")??"0"),F.value=parseInt(localStorage.getItem("score")??"0")}function P(){localStorage.setItem("progress",JSON.stringify(C)),localStorage.setItem("time",L.value.toString()),localStorage.setItem("score",F.value.toString())}function E(e){T(),C=e;for(let a=0;a<C.userCount;a++)c("createdUser",a);C.messages.forEach(e=>{c("addedMessage",e)})}function B(e,a){return K(e,a,C.userGraph)}function K(e,a,t){if(e>a)return K(a,e,t);const n=e.toString(32)+"_"+a.toString(32);return n in t?t[n]:0}function G(e,a,t){I(e,a,t,C.userGraph)}function I(e,a,t,n){if(e>a)return void I(a,e,t,n);const o=e.toString(32)+"_"+a.toString(32);n[o]=t}function X(e,a,t,n){const o={id:C.messages.length,a:e,i:a,j:t,v:n,t:L.value};return C.messages.push(o),c("addedMessage",o),o}function O(e,a,t){const n=B(e,a),o=n+t;G(e,a,o);const s=e,r=a;if(0==C.userType[s]&&0==C.userType[r]){const e=S(s,r,o,n);""!=e&&(c("userBubbleText",s,e.replace("OTHER",g(r))),c("userBubbleText",r,e.replace("OTHER",g(s))))}return t}const H=0;function j(e,a=!1){let t=0;B(e,e);for(let n=0;n<C.userCount;n++){if(!N(n))continue;const o=B(e,n);for(let s=n;s<C.userCount;s++){if(!N(s))continue;const r=B(e,s),l=B(s,n),i=o*r*l-H;a&&(console.log(`Gpo=${r}`),console.log(`Gox=${l}`),console.log(`Gpx=${o}`),console.log(`i(p=${e},o=${s},x=${n})=${i}`)),t-=Math.min(i,0)}}return t}function U(e,a){let t=0;const n=B(e,a);for(let o=0;o<C.userCount;o++){if(!N(o))continue;const s=B(a,o),r=B(e,o),l=-Math.min(n*s*r-H,0),i=.01;let u=0;const c=n+i;u=o==a?e==o?c*c*c:s*c*c:s*r*c,u=-Math.min(u-H,0),t+=(u-l)/i}return t}async function z(e,a){if(a==e.a)return;C.userMemory[e.i]=e.j,C.userMemory[e.j]=e.i;const t=B(e.i,e.j),n=j(a);G(e.i,e.j,e.v);const o=j(a);G(e.i,e.j,t);const s=o-n;O(a,a,.01*Math.abs(s));const r=Math.abs(s),l=s>0?s:Math.random()*Math.abs(s)*.5;c("viewedMessage",r),c("likedMessage",l),r>.1&&c("messageResponsed",a,D(a,e,s)),c("messageGainedScore",5*Math.ceil(Math.abs(s)+Math.max(s,0)))}function N(e){return 0!=C.userLife[e]}function J(e){for(let a=0;a<C.userCount;a++){if(!N(a))continue;if(C.userLife[a]>0&&(C.userLife[a]=Math.max(C.userLife[a]-e,0)),0!=C.userType[a])continue;let t=-1,n=-1;for(let e=a+1;e<C.userCount;e++){if(!N(e))continue;const o=-U(a,e)*(C.userMemory[a]==e?.5:1);Math.abs(o)>Math.abs(t)&&(t=o,n=e)}n>=0&&O(a,n,e*t)}}function $(e,a){const t=(e,a)=>Math.abs(B(e,a))<.5;let n=t(e,a);if(!n){let o=!1;for(let n=1;n<a-e&&!o;n++)o=!t(e,e+n)&&!t(e+n,a);let s=!1;for(let n=1;n<e-a+C.userCount&&!s;n++){let o=a+n;o>=C.userCount&&(o-=C.userCount),s=!t(o,e)&&!t(a,o)}n=o&&s}return n}function Q(e,a="",t="",n=!1,o=-1){const s=C.userCount;if(C.userCount+=1,C.userType.push(e),C.userLife.push(o),""==a?p.userTexts.push({name:0==e?h[s]:f[s%f.length],prompt:""}):p.userTexts.push({name:a,prompt:t}),n)for(let r=0;r<C.userCount;r++)if(0==C.userType[r]){const e=Math.random();e<.33?(G(r,s,.6),c("userBubbleText",r,"同感")):e>.66?(G(r,s,-.6),c("userBubbleText",r,"什么鬼")):c("userBubbleText",r,"不感兴趣")}c("createdUser",s)}function V(e,a){if(Math.abs(B(e,a))>=.5)return!0;for(let t=0;t<C.userCount;t++)if(N(t)&&Math.abs(B(e,t))>=.5&&Math.abs(B(a,t))>=.5)return!0;return!1}const Y={class:"username"},Z={key:0,class:"bubble"};var q=(0,o.pM)({__name:"CanvasUser",props:{user:{},selected:{type:Boolean},focused:{type:Boolean}},setup(e){const a=e;function t(){c("userPressed",a.user.id)}const n=(0,s.KR)("hello world"),l=(0,s.KR)(0);let d=0;return(0,o.sV)(()=>{setInterval(()=>{l.value>0&&(l.value-=.01)},10),d=i("userBubbleText",(e,t)=>{e!=a.user.id||l.value>0||(l.value=3+3*Math.random(),n.value=t)})}),(0,o.xo)(()=>{u("userBubbleText",d)}),(a,i)=>((0,o.uX)(),(0,o.CE)("div",{class:"canvas-user",onClick:t},[(0,o.Lk)("span",Y,(0,r.v_)((0,s.R1)(g)(e.user.id)),1),l.value>=0?((0,o.uX)(),(0,o.CE)("div",Z,(0,r.v_)(n.value),1)):(0,o.Q3)("",!0)]))}}),ee=t(1241);const ae=(0,ee.A)(q,[["__scopeId","data-v-aa1925ac"]]);var te=ae;const ne=150,oe=1/60,se=100;var re=(0,o.pM)({__name:"GameCanvas",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){function a(e){return(d.value+e.x)*h.value-.5*e.radius+e.dx}function t(e){return(v.value+e.y)*h.value-.5*e.radius+e.dy}function n(e){const n=a(e),o=t(e);return n>-100&&n<window.innerWidth+100&&o>-100&&o<window.innerHeight+100}const l=(0,s.KR)([]);i("resetProgress",()=>{l.value=[]});const u=(0,o.fn)(e,"modelValue"),d=(0,s.KR)(.5*window.innerWidth),v=(0,s.KR)(.5*window.innerHeight),h=(0,s.KR)(1);i("userPressed",e=>{if(void 0==u.value)return;if(0!=C.userType[e])return;let a=u.value.selectedUsers;if("select-relationship"==u.value?.mode){if(a.includes(e))u.value.focusedUser!=e?u.value.focusedUser=e:(u.value.selectedUsers=a.filter(a=>a!=e),u.value.focusedUser=-1);else if(u.value.focusedUser=e,a.push(e),2==a.length){const e=a[0],t=a[1];u.value.focusedUser==e?c("relationSelected",e,t):c("relationSelected",t,e),u.value.focusedUser=-1,u.value.selectedUsers=[]}}else a.includes(e)?u.value.selectedUsers=a.filter(a=>a!=e):u.value.selectedUsers.push(e)});let f=!1,p=0,m=0,_=0,g=0,k=0,y=0,b=0,R=0,M=-1;function w(e){if(e.preventDefault(),1==e.touches.length){const a=e.touches[0];k=a.clientX,y=a.clientY,b=d.value,R=v.value}}function x(e){O=-1,e.preventDefault(),0==e.touches.length&&(M=-1)}function A(e){if(e.preventDefault(),1==e.touches.length&&-1==M){const a=e.touches[0];_=a.clientX,g=a.clientY,d.value=_-k+b,v.value=g-y+R}else if(2==e.touches.length){const a=e.touches[0].clientX,t=e.touches[0].clientY,n=e.touches[1].clientX,o=e.touches[1].clientY,s=Math.sqrt((a-n)*(a-n)+(t-o)*(t-o));if(M>0){let e=.01*(s-M);e<-1&&(e=-1),e>1&&(e=1),e+=1,P((a+n)/2,(t+o)/2,e)}M=s}}function D(e){4==e.buttons&&(d.value+=e.movementX/h.value,v.value+=e.movementY/h.value),_=e.clientX,g=e.clientY,f="broadcast"==u.value?.mode&&1==e.buttons}function S(e){1==e.buttons&&(f="broadcast"==u.value?.mode,p=e.clientX,m=e.clientY),T=e.buttons}let L,F,T=0;function W(e){O=-1,void 0!=u.value&&(1==T&&(u.value.selectedUsers=[],u.value.focusedUser=-1),f&&Math.abs(_-p)>10&&Math.abs(g-m)>10&&(u.value.selectedUsers=l.value.filter(a=>{if(void 0==u.value)return;const t=(a.x+d.value)*h.value,n=(a.y+v.value)*h.value;let o=!!e.shiftKey&&u.value.selectedUsers.includes(a.id);return(t>p&&t<_||t>_&&t<p)&&(n>m&&n<g||n>g&&n<m)&&(o=!0),o}).map(e=>e.id)),f=!1)}function P(e,a,t){let n=h.value,o=e/n-d.value,s=a/n-v.value;h.value*=t;let r=h.value,l=e/r-d.value,i=a/r-v.value;d.value+=l-o,v.value+=i-s}function E(e){let a=.01*e.wheelDelta;a<0&&(a+=2),a<0||a>2||P(e.clientX,e.clientY,a)}const K=oe*se;function G(e,a,t,n,o,s,r){const l=t-e,i=n-a,u=l*l+i*i,c=Math.sqrt(u),d=ne*s,v=15*r;let h=v*(c-d)/u*K;return o&&c>=d&&(h=0),{x:l*h,y:i*h}}function I(){X();for(let e=0;e<l.value.length;e++){const a=l.value[e];if(a.radius=40+10*B(a.id,a.id),isNaN(a.radius)&&(a.radius=40),a.radius>50&&(a.radius=50),a.radius<30&&(a.radius=30),0==C.userType[a.id]){const t=j(e,!1);isNaN(t)?(a.dx=10*Math.random(),a.dy=10*Math.random()):(a.dx=t*Math.random()*2,a.dy=t*Math.random()*2,a.dx>10?a.dx=10:a.dx<0&&(a.dx=0),a.dy>10?a.dy=10:a.dy<0&&(a.dy=0))}for(let t=e+1;t<l.value.length;t++){const n=l.value[t],o=$(e,t);let s=G(a.x,a.y,n.x,n.y,o,o?1:.5,.5);a.vx+=s.x,a.vy+=s.y,n.vx-=s.x,n.vy-=s.y}}Object.values(l.value).forEach(e=>{e.vx*=1-.2*K,e.vy*=1-.2*K,e.va-=.05*e.vx*K,e.a+=e.va*K,e.va*=1-.5*K,Math.abs(e.a)>5&&(e.a*=1-.1*K),O!=e.id&&(e.x+=e.vx*K,e.y+=e.vy*K)})}function X(){if(void 0==u.value)return;L.width=window.innerWidth,L.height=window.innerHeight;for(let t=0;t<C.userCount;t++){if(!N(t))continue;const e=l.value[t];if(void 0!=e)for(let a=t+1;a<C.userCount;a++){if(!N(a))continue;const n=l.value[a],o=B(t,a),s=B(t,a),r=(C.userLife[t]<0?1:Math.min(C.userLife[t],1))*(C.userLife[a]<0?1:Math.min(C.userLife[a],1));let i=Math.abs(o);i>1&&(i=1),i<0&&(i=0),i=i>.5?1:0,i*=r;const u="22",c=`#${o<0?"ff":"00"}${u}${o>=0?"ff":"00"}${Math.floor(255*i).toString(16).padStart(2,"0")}`;let f=Math.abs(s);f>1&&(f=1),f<0&&(f=0),f=f>.5?1:0,f*=r;const p=`#${s<0?"ff":"00"}${u}${s>=0?"ff":"00"}${Math.floor(255*f).toString(16).padStart(2,"0")}`,m=(e.x+d.value)*h.value,_=(e.y+v.value)*h.value,g=(n.x+d.value)*h.value,k=(n.y+v.value)*h.value,y=F.createLinearGradient(m,_,g,k);y.addColorStop(0,c),y.addColorStop(1,p),F.strokeStyle=y,F.beginPath(),F.setLineDash([10,3]),F.moveTo(m,_),F.lineTo(g,k),F.stroke()}}const e=_-p,a=g-m;f&&Math.abs(e)>10&&Math.abs(a)>10&&(F.rect(p,m,e,a),F.fillStyle="#00000033",F.fill())}(0,o.sV)(()=>{L=document.getElementById("lines"),F=L.getContext("2d"),setInterval(I,1e3*oe),i("createdUser",e=>{l.value.push({id:e,x:e%2*100,y:100*Math.floor(e/2),dx:0,dy:0,vx:0,vy:0,va:0,a:0,radius:40})}),i("removedUser",()=>{l.value.pop()}),i("tryGetBroadcastCollectedMessageTargets",()=>{void 0!=u.value&&(c("getBroadcastCollectedMessageTargets",u.value.selectedUsers),u.value.selectedUsers=[],u.value.focusedUser=-1)}),window.addEventListener("keydown",e=>{"a"==e.key?(d.value+=30,e.preventDefault()):"d"==e.key?(d.value-=30,e.preventDefault()):"w"==e.key?(v.value+=30,e.preventDefault()):"s"==e.key?(v.value-=30,e.preventDefault()):"q"==e.key?(P(.5*window.innerWidth,.5*window.innerHeight,.9),e.preventDefault()):"e"==e.key&&(P(.5*window.innerWidth,.5*window.innerHeight,1.1),e.preventDefault())})});let O=-1;function H(e,a){if(-1!=O){const t=l.value[O];t.x+=e/h.value,t.y+=a/h.value}}return(e,i)=>((0,o.uX)(),(0,o.CE)("div",{class:"canvas",style:(0,r.Tr)({"background-size":20*h.value+"px "+20*h.value+"px","background-position":d.value*h.value+"px "+v.value*h.value+"px"})},[(0,o.Lk)("div",{class:"canvas-bg2",style:(0,r.Tr)({"background-size":80*h.value+"px "+80*h.value+"px","background-position":d.value*h.value+"px "+v.value*h.value+"px"})},null,4),(0,o.Lk)("div",{class:"mouse-input-handler",onMousedown:S,onMouseup:W,onMousemove:D,onTouchstart:w,onTouchmove:A,onTouchend:x,onPointermove:i[0]||(i[0]=e=>H(e.movementX,e.movementY)),onWheel:E},null,32),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.value.filter(e=>(0,s.R1)(N)(e.id)&&n(e)),e=>((0,o.uX)(),(0,o.Wv)(te,{key:e.id,onPointerdown:a=>(0,s.i9)(O)?O.value=e.id:O=e.id,onMousemove:i[1]||(i[1]=e=>H(e.movementX,e.movementY)),onPointerup:i[2]||(i[2]=e=>(0,s.i9)(O)?O.value=-1:O=-1),onTouchstart:i[3]||(i[3]=e=>{const a=e.touches[0];(0,s.i9)(_)?_.value=a.clientX:_=a.clientX,(0,s.i9)(g)?g.value=a.clientY:g=a.clientY}),onTouchmove:i[4]||(i[4]=e=>{const a=e.touches[0],t=a.clientX-(0,s.R1)(_),n=a.clientY-(0,s.R1)(g);H(t,n),(0,s.i9)(_)?_.value=a.clientX:_=a.clientX,(0,s.i9)(g)?g.value=a.clientY:g=a.clientY}),onTouchend:i[5]||(i[5]=e=>(0,s.i9)(O)?O.value=-1:O=-1),user:e,selected:u.value?.selectedUsers.includes(e.id)??!1,focused:u.value?.focusedUser==e.id,style:(0,r.Tr)({left:a(e)+"px",top:t(e)+"px","font-weight":u.value?.selectedUsers.includes(e.id)?"600":"300",opacity:(0,s.R1)(C).userLife[e.id]<0?1:(0,s.R1)(C).userLife[e.id],width:e.radius+"px",height:e.radius+"px",transform:`rotate(${e.a}deg)`})},null,8,["onPointerdown","user","selected","focused","style"]))),128)),i[6]||(i[6]=(0,o.Lk)("canvas",{id:"lines"},null,-1))],4))}});const le=(0,ee.A)(re,[["__scopeId","data-v-1b0640e6"]]);var ie=le,ue=t(2517),ce=t(2151),de=t(1373);const ve={class:"author"},he={key:1},fe={class:"content"},pe={class:"time"};var me=(0,o.pM)({__name:"MessageCard",props:{msg:{}},setup(e){const a=e;let t=(0,s.KR)(""),n=(0,s.KR)("");setInterval(()=>{const e=p.messageTexts[a.msg.id];"undefined"!=typeof e&&""!=e.content&&(t.value=e.content)},1);return(a,l)=>((0,o.uX)(),(0,o.Wv)((0,s.R1)(ue.Ay),{class:"message-card","content-class":"message-content","header-style":"padding: 5px","footer-style":"padding-bottom: 5px",hoverable:""},{header:(0,o.k6)(()=>[(0,o.Lk)("div",ve,"@"+(0,r.v_)((0,s.R1)(g)(e.msg.a)),1)]),"header-extra":(0,o.k6)(()=>[(0,o.RG)(a.$slots,"header-extra")]),footer:(0,o.k6)(()=>[(0,o.RG)(a.$slots,"action")]),default:(0,o.k6)(()=>[""==(0,s.R1)(t)?((0,o.uX)(),(0,o.Wv)((0,s.R1)(ce.A),{key:0,text:"",repeat:2})):((0,o.uX)(),(0,o.CE)("div",he,[(0,o.Lk)("p",fe,[(0,o.bF)((0,s.R1)(de.Ay),{"line-clamp":2},{default:(0,o.k6)(()=>[(0,o.eW)((0,r.v_)((0,s.R1)(t)),1)]),_:1})])])),(0,o.RG)(a.$slots,"suffix"),(0,o.Lk)("div",pe,(0,r.v_)((0,s.R1)(n)),1)]),_:3}))}});const _e=(0,ee.A)(me,[["__scopeId","data-v-1689678b"]]);var ge=_e,ke=t(7387),ye=t(7941),be=t(2169),Re=t(4526),Me=t(6739),we=t(8819),xe=t(3981),Ae=t(6815),De=t(7966),Se=t(6693),Ce=t(9310),Le=t(8122),Fe=t(4317),Te=t(7328),We=t(62),Pe=t(6233),Ee=t(4977),Be=t(8802),Ke=t(8051),Ge=t(7838),Ie=t(3994),Xe=t(5374),Oe=t(3195);const He={class:"status-bar"},je={class:"time"},Ue={class:"status-icons"},ze={class:"network-info"},Ne={class:"signal"},Je={class:"battery-info"};var $e=(0,o.pM)({__name:"StatusBar",setup(e){const a=(0,s.KR)(""),t=new Date;function n(){let e=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");a.value=`${e}:${n}`}return n(),(0,o.sV)(()=>{setInterval(()=>{n()},1e4)}),(e,t)=>((0,o.uX)(),(0,o.CE)("div",He,[(0,o.Lk)("div",je,(0,r.v_)(a.value),1),(0,o.Lk)("div",Ue,[(0,o.Lk)("div",ze,[(0,o.Lk)("div",Ne,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(4,e=>(0,o.Lk)("div",{key:e,class:"signal-bar"})),64))]),t[0]||(t[0]=(0,o.Lk)("span",{class:"network-type"},"WIRED",-1))]),(0,o.bF)((0,s.R1)(De._),{size:20},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Xe.A))]),_:1}),(0,o.Lk)("div",Je,[t[1]||(t[1]=(0,o.Lk)("span",{class:"battery-percent"},"100%",-1)),(0,o.bF)((0,s.R1)(De._),{size:24},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Oe.A))]),_:1})])])]))}});const Qe=(0,ee.A)($e,[["__scopeId","data-v-2e8e4f5a"]]);var Ve=Qe;const Ye={start1:{maxProgress:1,reward:()=>{c("addMission","start2")},title:"选择任意关系",desc:"通过单击连续选择两个用户。"},start2:{maxProgress:20,reward:()=>{c("addMission","start3")},title:"获取点数",desc:"重复刚才的操作，搜索并推送极端言论，初次获得20个点数。"},start3:{maxProgress:1,reward:()=>{c("addStoreItem",{name:"接入平台",desc:"当你做好准备，就使用这个。",effectdesc:"初始化游戏。",cost:0,effect:"start",count:1}),c("addMission","start4")},title:"自动平衡",desc:"点击右下角的按钮，让时间开始流逝。"},start4:{maxProgress:1,reward:()=>{},title:"接入平台",desc:"在左下角打开平台策略面板，使用“接入平台”。"}},Ze={class:"app"},qe={key:1},ea={class:"pageside",style:{top:"0",left:"0",right:"0"}},aa={key:0},ta={key:0},na={key:1},oa={class:"buttons"},sa={class:"pageside",style:{bottom:"0",left:"0",right:"0",background:"white",color:"black",margin:"0","box-shadow":"0 0 3px rgba(1,1,1,0.3)",padding:"0.5em"}},ra={class:"buttons",style:{"margin-top":"auto"}},la={style:{margin:"auto"}},ia={key:0},ua={key:1},ca=10;var da=(0,o.pM)({__name:"App",setup(e){const a=(0,ke.J)(),t=(0,s.KR)(null==localStorage.getItem("help")),n=(0,s.KR)(!1);function l(){W(),m();const e=localStorage.getItem("appstate");null!=e&&(d.value=JSON.parse(e)),a.success("已读取");const t=localStorage.getItem("store");null!=t&&(D=JSON.parse(t))}function u(){localStorage.setItem("appstate",JSON.stringify(d.value)),P(),localStorage.setItem("text",JSON.stringify(p)),a.success("已保存"),localStorage.setItem("store",JSON.stringify(D))}(0,o.sV)(()=>{localStorage.setItem("help",""),window.addEventListener("keydown",e=>{" "==e.key&&(d.value.paused=!d.value.paused,c("missionProceed","start3",1),a.info(d.value.paused?"已暂停":"已恢复"),e.preventDefault())}),O();const e=10;setInterval(()=>{d.value.paused||f.value||S(e/1e3)},e),window.setScore=e=>{F.value=e},i("missionProceed",(e,a)=>{-1!=d.value.missionProgress[e]&&e in d.value.missionProgress&&d.value.missionProgress[e]>=0&&(d.value.missionProgress[e]+=a)}),i("addMission",e=>{e in d.value.missionProgress||(d.value.missionProgress[e]=0,d.value.missionCount+=1)}),i("addStoreItem",e=>{D.push(e)}),i("addScore",e=>{})});const d=(0,s.KR)({mode:"select-relationship",editingRelationship:{i:-1,j:-1},paused:!0,selectedUsers:[],focusedUser:-1,collectedCost:{},missionProgress:{start1:0},missionCount:1}),v=(0,s.KR)(void 0),h=(0,s.KR)(!1),f=(0,s.KR)(!1);function k(){return{views:0,likes:0,score:0,responses:{}}}let y=(0,s.KR)(k());function b(e,a,t){v.value=void 0,v.value=X(e,e,a,t),F.value-=ca*R(e,a)}function R(e,a){const t=`${Math.min(e,a)}_${Math.max(e,a)}`;return t in d.value.collectedCost?d.value.collectedCost[t]:1}i("relationSelected",(e,a)=>{"select-relationship"==d.value.mode&&(h.value=!0,v.value=void 0,d.value.editingRelationship={i:e,j:a},c("missionProceed","start1",1),1==d.value.missionProgress["start1"]&&(h.value=!1))}),(0,o.wB)(F,e=>{e<=ca&&(I.value=!0)});const x={10:()=>(Q(1,"年度游戏提名","",!0,5),"TGB发布了年度游戏提名。")},A={start:()=>{for(let e=0;e<3;e++)j();c("missionProceed","start4",1),a.warning("整个平台现在对你开放。")},"add-user":()=>{H()},"add-topic":()=>{j()},argue:()=>{for(let e=0;e<C.userCount;e++)if(0==C.userType[e])for(let a=0;a<C.userCount;a++)1==C.userType[e]&&Math.random()<.25&&G(e,a,-B(e,a))}};let D=[{name:"增加版面",desc:"横向扩张。",effectdesc:"随机创建新一个主题，附带2-5个用户。",cost:200,effect:"add-topic",count:-1},{name:"吸引用户",desc:"纵向扩张。",effectdesc:"随机创建一个用户，附带1个认同关系。",cost:50,effect:"add-user",count:-1},{name:"话题争执",desc:"四分之一的热爱不是一成不变的。",effectdesc:"翻转25%的话题关系。",cost:100,effect:"argue",count:-1}];function S(e){const t=Math.floor(L.value);if(L.value+=e,Math.floor(L.value)-t>0){F.value-=1;for(let e in x)e==L.value.toFixed()&&a.warning(x[e]())}J(e)}function E(){if(h.value=!1,void 0==v.value)return;y.value={views:0,likes:0,score:0,responses:{}};for(let n=0;n<C.userCount;n++)0==C.userType[n]&&z(v.value,n);G(v.value.i,v.value.j,v.value.v),f.value=!0,d.value.paused=!0,d.value.mode="select-relationship";const e=v.value.i,a=v.value.j,t=`${Math.min(e,a)}_${Math.max(e,a)}`;t in d.value.collectedCost||(d.value.collectedCost[t]=1),d.value.collectedCost[t]+=1}i("addedMessage",e=>w(e)),setInterval(()=>{M()},100),setInterval(()=>{K.value=window.innerWidth},1);const K=(0,s.KR)(0);i("viewedMessage",e=>{y.value.views+=e}),i("likedMessage",e=>{y.value.likes+=e}),i("messageGainedScore",e=>{y.value.score+=e,F.value+=e,c("missionProceed","start2",e)}),i("messageResponsed",(e,a)=>{y.value.responses[e]=a});const I=(0,s.KR)(!1);function O(){Q(0),Q(0),Q(0),G(0,1,1),G(0,2,1),G(1,2,1)}function H(){Q(0);let e=C.userCount-1;G(e,Math.floor(e*Math.random()),1),G(e,e,0)}function j(){Q(1);const e=C.userCount,a=2+Math.ceil(3*Math.random());for(let t=0;t<a;t++){Q(0);for(let a=0;a<e-1;a++)1==C.userType[a]&&G(e+t,a,.2*(Math.floor(3*Math.random())-1));G(e+t,e-1,1)}for(let t=0;t<a;t++)for(let n=0;n<a;n++)G(e+t,e+n,Math.floor(3*Math.random())-1);for(let t=0;t<a;t++)G(e+t,e+t,0)}return i("resetProgress",()=>{d.value={mode:"select-relationship",editingRelationship:{i:0,j:0},paused:!0,selectedUsers:[],focusedUser:-1,collectedCost:{},missionProgress:{start1:0},missionCount:1},y.value=k(),n.value=!1,_()}),(e,a)=>{const i=(0,o.g2)("center");return(0,o.uX)(),(0,o.CE)("div",Ze,[(0,o.bF)(ie,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),ref:"canvas"},null,8,["modelValue"]),(0,o.Lk)("div",{class:(0,r.C4)(d.value.paused?"vintage vintage-paused":"vintage")},null,2),(0,o.bF)((0,s.R1)(ye.A),{show:f.value,"onUpdate:show":a[2]||(a[2]=e=>f.value=e),preset:"card",style:{"max-width":"375px","min-height":"667px"},size:"huge",bordered:!1,onUpdateShow:a[3]||(a[3]=e=>{}),closable:!1,"header-style":{padding:0},"content-style":{display:"flex"}},{header:(0,o.k6)(()=>[(0,o.bF)(Ve)]),default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(be.A),{vertical:"",justify:"space-between",style:{width:"100%"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Re.A),{subtitle:"新消息",onBack:a[1]||(a[1]=e=>f.value=!1)}),void 0!=v.value?((0,o.uX)(),(0,o.Wv)(ge,{key:0,msg:v.value},{suffix:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(be.A),{style:{margin:"0"}},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,s.R1)(y).responses,(e,a)=>((0,o.uX)(),(0,o.Wv)((0,s.R1)(Me.Ay),{key:a,round:""},{default:(0,o.k6)(()=>[(0,o.eW)((0,r.v_)((0,s.R1)(g)(a))+" "+(0,r.v_)(e),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["msg"])):(0,o.Q3)("",!0),(0,o.bF)((0,s.R1)(we.Ay),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(xe.Ay),{span:12},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ae.A),{label:"浏览",value:(1e3*(0,s.R1)(y).views).toFixed()},{prefix:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Be.A))]),_:1})]),_:1},8,["value"])]),_:1}),(0,o.bF)((0,s.R1)(xe.Ay),{span:12},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ae.A),{label:"点赞",value:((0,s.R1)(y).likes*Math.max(Math.random(),.5)*1e3).toFixed()},{prefix:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ke.A))]),_:1})]),_:1},8,["value"])]),_:1}),(0,o.bF)((0,s.R1)(xe.Ay),{span:24},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ae.A),{label:"点数获取",value:(0,s.R1)(y).score.toFixed()},{prefix:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),(0,o.bF)((0,s.R1)(Se.A),{to:"#app",show:h.value,"onUpdate:show":a[8]||(a[8]=e=>h.value=e),width:K.value>500?500:K.value},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ce.A),{"native-scrollbar":!1},{header:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Re.A),{subtitle:"关系分析",onBack:a[4]||(a[4]=e=>h.value=!1)}),(0,o.Lk)("h1",null,(0,r.v_)((0,s.R1)(g)(d.value.editingRelationship.i))+"与"+(0,r.v_)((0,s.R1)(g)(d.value.editingRelationship.j)),1)]),default:(0,o.k6)(()=>[(0,s.R1)(V)(d.value.editingRelationship.i,d.value.editingRelationship.j)?((0,o.uX)(),(0,o.Wv)((0,s.R1)(Le.A),{key:0,vertical:""},{default:(0,o.k6)(()=>[void 0==v.value?((0,o.uX)(),(0,o.Wv)((0,s.R1)(Fe.Ay),{key:0,onClick:a[5]||(a[5]=e=>b(d.value.editingRelationship.i,d.value.editingRelationship.j,1))},{default:(0,o.k6)(()=>[(0,o.eW)("搜索正面极端(-"+(0,r.v_)(ca*R(d.value.editingRelationship.i,d.value.editingRelationship.j)),1),(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A)),a[16]||(a[16]=(0,o.eW)(")",-1))]),_:1})]),_:1})):(0,o.Q3)("",!0),void 0==v.value?((0,o.uX)(),(0,o.Wv)((0,s.R1)(Fe.Ay),{key:1,onClick:a[6]||(a[6]=e=>b(d.value.editingRelationship.i,d.value.editingRelationship.j,-1))},{default:(0,o.k6)(()=>[(0,o.eW)("搜索反面极端(-"+(0,r.v_)(ca*R(d.value.editingRelationship.i,d.value.editingRelationship.j)),1),(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A)),a[17]||(a[17]=(0,o.eW)(")",-1))]),_:1})]),_:1})):(0,o.Q3)("",!0),void 0!=v.value?((0,o.uX)(),(0,o.Wv)((0,s.R1)(Fe.Ay),{key:2,onClick:E,type:"primary"},{default:(0,o.k6)(()=>[...a[18]||(a[18]=[(0,o.eW)("推送",-1)])]),_:1})):(0,o.Q3)("",!0),void 0!=v.value?((0,o.uX)(),(0,o.Wv)((0,s.R1)(Fe.Ay),{key:3,onClick:a[7]||(a[7]=e=>v.value=void 0),type:"primary"},{default:(0,o.k6)(()=>[...a[19]||(a[19]=[(0,o.eW)("取消",-1)])]),_:1})):(0,o.Q3)("",!0),void 0!=v.value?((0,o.uX)(),(0,o.Wv)(ge,{key:4,msg:v.value},{action:(0,o.k6)(()=>[...a[20]||(a[20]=[])]),_:1},8,["msg"])):(0,o.Q3)("",!0)]),_:1})):((0,o.uX)(),(0,o.CE)("div",qe," 无可用关系 "))]),_:1})]),_:1},8,["show","width"]),(0,o.bF)((0,s.R1)(ye.A),{show:I.value,"onUpdate:show":a[10]||(a[10]=e=>I.value=e),preset:"card",style:{width:"500px"},title:"游戏结束",size:"huge",bordered:!1,"mask-closable":!1},{action:(0,o.k6)(()=>[(0,o.bF)(i,null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Fe.Ay),{onClick:a[9]||(a[9]=e=>{I.value=!1,(0,s.R1)(T)(),O()})},{default:(0,o.k6)(()=>[...a[24]||(a[24]=[(0,o.eW)("重新开始",-1)])]),_:1})]),_:1})]),default:(0,o.k6)(()=>[(0,o.Lk)("h3",null,[a[21]||(a[21]=(0,o.eW)("你耗尽了",-1)),(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A))]),_:1}),a[22]||(a[22]=(0,o.eW)("，让平台拥有了",-1)),(0,o.bF)((0,s.R1)(Te.A),{to:(0,s.R1)(C).userCount},null,8,["to"]),a[23]||(a[23]=(0,o.eW)("个用户。",-1))])]),_:1},8,["show"]),(0,o.Lk)("div",ea,[(0,o.bF)((0,s.R1)(be.A),{class:"missions",style:{"margin-bottom":"auto"},vertical:""},{default:(0,o.k6)(()=>[a[26]||(a[26]=(0,o.Lk)("b",null,"任务列表",-1)),d.value.missionCount>0?((0,o.uX)(),(0,o.CE)("div",aa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(d.value.missionProgress,(e,t)=>((0,o.uX)(),(0,o.Wv)((0,s.R1)(be.A),{key:t},{default:(0,o.k6)(()=>[-1!=e?((0,o.uX)(),(0,o.CE)("div",ta,[(0,o.Lk)("p",null,[(0,o.Lk)("b",null,(0,r.v_)((0,s.R1)(Ye)[t].title),1),(0,o.eW)(" "+(0,r.v_)((0,s.R1)(Ye)[t].desc)+" ",1),e>=(0,s.R1)(Ye)[t].maxProgress?((0,o.uX)(),(0,o.Wv)((0,s.R1)(Fe.Ay),{key:0,type:"warning",onClick:e=>{d.value.missionProgress[t]=-1,d.value.missionCount-=1,(0,s.R1)(Ye)[t].reward()}},{default:(0,o.k6)(()=>[...a[25]||(a[25]=[(0,o.eW)("完成",-1)])]),_:1},8,["onClick"])):(0,o.Q3)("",!0)]),(0,o.bF)((0,s.R1)(We.A),{type:"line",percentage:Math.floor(e/(0,s.R1)(Ye)[t].maxProgress*100)},{default:(0,o.k6)(()=>[(0,o.eW)((0,r.v_)(e)+"/"+(0,r.v_)((0,s.R1)(Ye)[t].maxProgress),1)]),_:2},1032,["percentage"])])):(0,o.Q3)("",!0)]),_:2},1024))),128))])):((0,o.uX)(),(0,o.CE)("div",na," 无任务 "))]),_:1}),(0,o.Lk)("div",oa,[(0,o.bF)((0,s.R1)(Fe.Ay),{onClick:u,type:"primary"},{default:(0,o.k6)(()=>[...a[27]||(a[27]=[(0,o.eW)("保存",-1)])]),_:1}),(0,o.bF)((0,s.R1)(Fe.Ay),{onClick:l,type:"primary"},{default:(0,o.k6)(()=>[...a[28]||(a[28]=[(0,o.eW)("读取",-1)])]),_:1}),(0,o.bF)((0,s.R1)(Fe.Ay),{onClick:a[11]||(a[11]=e=>t.value=!t.value),type:"info"},{default:(0,o.k6)(()=>[...a[29]||(a[29]=[(0,o.eW)("查看帮助",-1)])]),_:1})])]),(0,o.Lk)("div",sa,[(0,o.Lk)("div",ra,[(0,o.bF)((0,s.R1)(Le.A),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Fe.Ay),{size:"large",onClick:a[12]||(a[12]=e=>n.value=!0)},{default:(0,o.k6)(()=>[...a[30]||(a[30]=[(0,o.eW)("平台策略",-1)])]),_:1}),(0,o.Lk)("div",la,[(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ie.A))]),_:1}),(0,o.eW)(" "+(0,r.v_)((0,s.R1)(L).toFixed())+" ",1),(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A))]),_:1}),(0,o.eW)(" "+(0,r.v_)((0,s.R1)(F)),1)])]),_:1})]),a[31]||(a[31]=(0,o.Lk)("div",{style:{margin:"auto",color:"gainsboro"}},[(0,o.Lk)("a",{style:{color:"gainsboro","text-decoration":"none"},href:"https://github.com/init-zey/socialmediasimulator"},"社媒算法模拟器"),(0,o.eW)("@吉士蛋麦芬三明治 ")],-1)),(0,o.bF)((0,s.R1)(Fe.Ay),{style:{"margin-top":"auto","margin-bottom":"auto"},size:"large",onClick:a[13]||(a[13]=e=>{d.value.paused=!d.value.paused,(0,s.R1)(c)("missionProceed","start3",1)})},{default:(0,o.k6)(()=>[(0,o.eW)((0,r.v_)(d.value.paused?"继续":"暂停")+" Space",1)]),_:1})]),(0,o.bF)((0,s.R1)(ye.A),{show:t.value,"onUpdate:show":a[14]||(a[14]=e=>t.value=e),style:{width:"auto",margin:"auto"},title:"帮助",preset:"card"},{default:(0,o.k6)(()=>[a[46]||(a[46]=(0,o.Lk)("p",null,"我们的平台快要寿终正寝了，作为推送算法，我们该做点事情。",-1)),(0,o.Lk)("p",null,[(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A))]),_:1}),a[32]||(a[32]=(0,o.eW)("是你的",-1)),a[33]||(a[33]=(0,o.Lk)("b",null,"流量点数",-1)),a[34]||(a[34]=(0,o.eW)("，它是你最重要的资源，一旦耗尽，我们就没救了。",-1))]),(0,o.Lk)("p",null,[(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A))]),_:1}),a[35]||(a[35]=(0,o.eW)("的数量显示在左下角。",-1))]),(0,o.bF)((0,s.R1)(Pe.A)),a[47]||(a[47]=(0,o.Lk)("p",null,[(0,o.eW)("你屏幕上的标签都是我们平台的"),(0,o.Lk)("b",null,"用户"),(0,o.eW)("，此外还有"),(0,o.Lk)("b",null,"#话题"),(0,o.eW)("。线条则是"),(0,o.Lk)("b",null,"关系"),(0,o.eW)("。")],-1)),a[48]||(a[48]=(0,o.Lk)("p",null,[(0,o.Lk)("span",{style:{color:"red"}},"红色"),(0,o.eW)("=排斥，"),(0,o.Lk)("span",{style:{color:"blue"}},"蓝色"),(0,o.eW)("=认可。")],-1)),(0,o.Lk)("p",null,[a[36]||(a[36]=(0,o.eW)("一旦你有足够多",-1)),(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A))]),_:1}),a[37]||(a[37]=(0,o.eW)("，就可以吸引更多",-1)),a[38]||(a[38]=(0,o.Lk)("b",null,"用户",-1)),a[39]||(a[39]=(0,o.eW)("，甚至添加新",-1)),a[40]||(a[40]=(0,o.Lk)("b",null,"话题",-1)),a[41]||(a[41]=(0,o.eW)("。",-1))]),(0,o.bF)((0,s.R1)(Pe.A)),a[49]||(a[49]=(0,o.Lk)("p",null,"关系不只是两个用户之间的事情。",-1)),a[50]||(a[50]=(0,o.Lk)("p",null,[(0,o.eW)("在人类眼中，"),(0,o.Lk)("span",{style:{color:"red"}},"敌人"),(0,o.eW)("的"),(0,o.Lk)("span",{style:{color:"red"}},"敌人"),(0,o.eW)("是"),(0,o.Lk)("span",{style:{color:"朋友"}},"朋友"),(0,o.eW)("，"),(0,o.Lk)("span",{style:{color:"blue"}},"朋友"),(0,o.eW)("的"),(0,o.Lk)("span",{style:{color:"blue"}},"朋友"),(0,o.eW)("还是"),(0,o.Lk)("span",{style:{color:"blue"}},"朋友"),(0,o.eW)("。")],-1)),a[51]||(a[51]=(0,o.Lk)("p",null,"当事实与预期出现差距时，人类就会感到不平衡。",-1)),a[52]||(a[52]=(0,o.Lk)("p",null,"大部分信息都很无聊，但你有个绝招。",-1)),(0,o.Lk)("p",null,[a[42]||(a[42]=(0,o.eW)("你能花费",-1)),(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A))]),_:1}),a[43]||(a[43]=(0,o.eW)("搜索并放大两个用户群之间的极端言论，制造更多变数。变数越大，浏览越多；越符合观看者的预期，点赞越多。",-1))]),(0,o.Lk)("p",null,[a[44]||(a[44]=(0,o.eW)("浏览和点赞之和会转为",-1)),(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A))]),_:1}),a[45]||(a[45]=(0,o.eW)("。",-1))]),a[53]||(a[53]=(0,o.Lk)("p",null,"每次进行相同的搜索，代价都会变高。",-1))]),_:1},8,["show"]),(0,o.bF)((0,s.R1)(ye.A),{show:n.value,"onUpdate:show":a[15]||(a[15]=e=>n.value=e),style:{margin:"50px"},title:"平台策略",preset:"card"},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Le.A),{wrap:!0},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,s.R1)(D).filter(e=>0!=e.count),(e,t)=>((0,o.uX)(),(0,o.Wv)((0,s.R1)(ue.Ay),{style:{width:"auto",height:"auto"},key:t},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ee.A),null,{header:(0,o.k6)(()=>[(0,o.eW)((0,r.v_)(e.name),1)]),"header-extra":(0,o.k6)(()=>[e.cost>0?((0,o.uX)(),(0,o.CE)("p",ia,[(0,o.eW)((0,r.v_)(e.cost)+" ",1),(0,o.bF)((0,s.R1)(De._),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Ge.A))]),_:1})])):(0,o.Q3)("",!0),e.count>0?((0,o.uX)(),(0,o.CE)("p",ua,[a[54]||(a[54]=(0,o.eW)("剩余次数",-1)),(0,o.Lk)("b",null,(0,r.v_)(e.count),1)])):(0,o.Q3)("",!0)]),description:(0,o.k6)(()=>[(0,o.Lk)("i",null,(0,r.v_)(e.effectdesc),1)]),action:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(Fe.Ay),{onClick:a=>{F.value-=e.cost,A[e.effect](),n.value=!1,e.count-=1}},{default:(0,o.k6)(()=>[...a[55]||(a[55]=[(0,o.eW)("使用",-1)])]),_:1},8,["onClick"])]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,r.v_)(e.desc)+" ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["show"])])}}});const va=da;var ha=va,fa=t(9798),pa={__name:"AppContainer",setup(e){return(e,a)=>((0,o.uX)(),(0,o.Wv)((0,s.R1)(fa.A),null,{default:(0,o.k6)(()=>[(0,o.bF)(ha)]),_:1}))}};const ma=pa;var _a=ma;(0,n.Ef)(_a).mount("#app")}},a={};function t(n){var o=a[n];if(void 0!==o)return o.exports;var s=a[n]={exports:{}};return e[n].call(s.exports,s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(a,n,o,s){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],s=e[c][2];for(var l=!0,i=0;i<n.length;i++)(!1&s||r>=s)&&Object.keys(t.O).every(function(e){return t.O[e](n[i])})?n.splice(i--,1):(l=!1,s<r&&(r=s));if(l){e.splice(c--,1);var u=o();void 0!==u&&(a=u)}}return a}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,o,s]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var o,s,r=n[0],l=n[1],i=n[2],u=0;if(r.some(function(a){return 0!==e[a]})){for(o in l)t.o(l,o)&&(t.m[o]=l[o]);if(i)var c=i(t)}for(a&&a(n);u<r.length;u++)s=r[u],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(c)},n=self["webpackChunksocial_media_sim"]=self["webpackChunksocial_media_sim"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],function(){return t(2964)});n=t.O(n)})();
//# sourceMappingURL=app.32df61f3.js.map