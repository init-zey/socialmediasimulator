{"version":3,"file":"js/app.bfd5ed29.js","mappings":"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","sources":["webpack://vue-project/./src/event.ts","webpack://vue-project/./src/game.ts","webpack://vue-project/./src/llm.ts","webpack://vue-project/./src/text.ts","webpack://vue-project/./src/components/CanvasUser.vue?4afb","webpack://vue-project/./src/components/CanvasUser.vue","webpack://vue-project/./src/components/CanvasUser.vue?7b96","webpack://vue-project/./src/components/GameCanvas.vue","webpack://vue-project/./src/components/GameCanvas.vue?d007","webpack://vue-project/./src/components/GameCanvas.vue?cf9f","webpack://vue-project/./src/components/MessageCard.vue?0f40","webpack://vue-project/./src/components/MessageCard.vue","webpack://vue-project/./src/components/MessageCard.vue?3d29","webpack://vue-project/./src/components/MessageList.vue?13dd","webpack://vue-project/./src/components/MessageList.vue","webpack://vue-project/./src/components/MessageList.vue?2e85","webpack://vue-project/./src/components/MessageFlow.vue?6cd4","webpack://vue-project/./src/components/MessageFlow.vue","webpack://vue-project/./src/components/MessageFlow.vue?8110","webpack://vue-project/./src/App.vue?2a5e","webpack://vue-project/./src/App.vue","webpack://vue-project/./src/App.vue?7ccd","webpack://vue-project/./src/main.ts","webpack://vue-project/webpack/bootstrap","webpack://vue-project/webpack/runtime/chunk loaded","webpack://vue-project/webpack/runtime/compat get default export","webpack://vue-project/webpack/runtime/define property getters","webpack://vue-project/webpack/runtime/global","webpack://vue-project/webpack/runtime/hasOwnProperty shorthand","webpack://vue-project/webpack/runtime/make namespace object","webpack://vue-project/webpack/runtime/jsonp chunk loading","webpack://vue-project/webpack/startup"],"sourcesContent":["const events:Record<string, Record<string, (...params:any[])=>void>> = {}\nexport function subscribe(event:string, action:(...params:any[])=>void):number\n{\n    if (!(event in events))\n    {\n        events[event] = {}\n    }\n    const key = Object.keys(events[event]).length-1;\n    events[event][key] = action;\n    return key;\n}\nexport function desubscribe(event:string, key:number):void\n{\n    if (event in events)\n    {\n        delete events[event][key];\n    }\n}\nexport function emit(event:string, ...args:any[]):void\n{\n    if (event in events)\n    {\n        Object.values(events[event]).forEach(action => {\n            action(...args);\n        });\n    }\n}","import { emit } from \"./event\";\n\nexport interface Message {id:number, i:number, j:number, v:number, t:number}\n\nexport interface Progress{\n  userMemory: Record<number, Array<number>>;\n  subjectiveUserGraph: Record<number, Record<string, number>>;\n  messages: Array<Message>;\n  userCount: number;\n  userType: Array<number>;\n  userFlowTags: Array<Array<number>>;\n  time: number;\n}\n\nexport let progress:Progress = {\n  userMemory: {},\n  subjectiveUserGraph: {},\n  messages: [],\n  userType: [],\n  userCount: 0,\n  userFlowTags: [],\n  time: 0\n}\n\nexport function setProgress(newProgress:Progress)\n{\n  emit(\"resetProgress\");\n  progress = newProgress;\n  for(let i=0;i<progress.userCount;i++)\n  {\n    emit(\"createdUser\",i);\n  }\n  progress.messages.forEach(msg => {\n    emit('addedMessage', msg);\n  });\n}\n\nexport function getSubjectUserGraph(user:number):Record<string,number>\n{\n  if (!(user in progress.subjectiveUserGraph))\n  {\n    progress.subjectiveUserGraph[user] = {};\n  }\n  return progress.subjectiveUserGraph[user];\n}\n\nexport function rGetIn(a:number,b:number,graph:Record<string,number>):number\n{\n  if(a>b){\n    return rGetIn(b,a,graph);\n  }\n  const k = a.toString(32)+'_'+b.toString(32);\n  if (!(k in graph)) {\n    return 0;\n  }\n  return graph[k];\n}\n\nexport function rSetIn(a:number,b:number,v:number,graph:Record<string,number>)\n{\n  if(a>b) {\n    rSetIn(b,a,v,graph);\n    return;\n  }\n  const k = a.toString(32)+'_'+b.toString(32);\n  graph[k] = v;\n}\n\nexport function processPushTask(tasks:Array<number>,flow:number)\n{\n  for(let user=0;user<progress.userCount;user++)\n  {\n    if (progress.userType[user]!=0) continue;\n    const flowTags = progress.userFlowTags[user];\n    if (flow!=0&&(flowTags==undefined||!flowTags.includes(flow))) continue;\n    for(const msgId of tasks){\n      pushMsgToUser(progress.messages[msgId], user);\n    }\n  }\n}\n\nexport function createMessage(i:number, j:number, v:number)\n{\n  const msg = {id:progress.messages.length,i,j,v,t:progress.time};\n  progress.messages.push(msg);\n  emit('addedMessage', msg);\n}\n\nfunction changeAttitude(user:number, target:number, d:number):number\n{\n  const graph = getSubjectUserGraph(user);\n  const value=rGetIn(user,target,graph)+d;\n  rSetIn(user,target,value,graph);\n  if (Math.abs(d) > 0.5) createMessage(user,target,value);\n  return d;\n}\n\nfunction updateUser(user:number)\n{\n  console.log(`update ${user}`);\n  let maxIPD = 0;\n  let maxIPD_o = -1;\n  for(let o=0;o<progress.userCount;o++)\n  {\n    const IPD = instabilityPartialD(user, o);\n    console.log(`IPD(${user},${o})=${IPD}`);\n    if (Math.abs(IPD) > Math.abs(maxIPD))\n    {\n      maxIPD = IPD;\n      maxIPD_o = o;\n    }\n  }\n  console.log(`maxIPD=${maxIPD},maxIPD_o=${maxIPD_o}`);\n  if(maxIPD_o>=0)\n  {\n    if (maxIPD < 0.1) maxIPD = 0.1;\n    if (maxIPD > 10) maxIPD = 10;\n    changeAttitude(user, maxIPD_o, -maxIPD);\n  }\n}\n\nfunction instability(p:number)\n{\n  const G = getSubjectUserGraph(p);\n  let s = 0;\n  for(let x=0;x<progress.userCount;x++)\n  {\n    const Gpx = rGetIn(p,x,G);\n    for(let o=0;o<progress.userCount;o++)\n    {\n      const Gpo = rGetIn(p,o,G);\n      const Gox = rGetIn(o,x,G);\n      const i = Gpo*Gox-Gpx;\n      s+=i*i;\n    }\n  }\n  return s;\n}\n\n// function instabilityPartialD(p:number,o:number)\n// {\n//   const dGpo = 0.01;\n//   const pdir = instabilitydGpo(p,o,dGpo);\n//   const ndir = instabilitydGpo(p,o,-dGpo);\n//   return (pdir + ndir) * 0.5;\n// }\n\nfunction instabilityPartialD(p:number,o:number)\n{\n  const G = getSubjectUserGraph(p);\n  let d = 0;\n  const Gpo = rGetIn(p,o,G);\n  for(let x=0;x<progress.userCount;x++)\n  {\n    const Gox = rGetIn(o,x,G);\n    const Gpx = rGetIn(p,x,G);\n    d+=Gox*(Gpo*Gox-Gpx);\n    d-=Gpx*Gox-Gpo;\n  }\n  const GooSub = rGetIn(o,o,G)-1;\n  d-=Gpo*GooSub*GooSub;\n  return d;\n}\n\nexport function pushMsgToUser(msg:Message, user:number)\n{\n  if(!(user in progress.userMemory))\n  {\n    progress.userMemory[user] = [];\n  }\n  progress.userMemory[user].push(msg.id);\n  const graph = getSubjectUserGraph(user);\n  const oldInstability = instability(user);\n  rSetIn(msg.i,msg.j,msg.v,graph);\n  const newInstability = instability(user);\n  const d = oldInstability - newInstability;\n  console.log('d:',d);\n  emit('viewedMessage', msg.id, Math.abs(d));\n  emit('likedMessage', msg.id, d>0?d:0+Math.random()*Math.abs(d)*0.5);\n}\n\nexport function updateUsers()\n{\n  for(let i=0;i<progress.userCount;i++)\n  {\n    if(progress.userType[i]!=0) continue;\n    updateUser(i);\n  }\n}\n\nexport function getRepulsion(i:number, j:number):boolean\n{\n    const rij=(a:number,b:number)=>Math.abs(rGetIn(a,b,getSubjectUserGraph(a)))<0.5;\n    let repulsion = rij(i,j);\n    if (!repulsion)\n    {\n        let innerRepulsion = false;\n        for(let d=1;d<j-i&&!innerRepulsion;d++)\n        {\n            innerRepulsion = !rij(i,i+d)&&!rij(i+d,j);\n        }\n        let outterRepulsion = false;\n        for(let d=1;d<i-j+progress.userCount&&!outterRepulsion;d++)\n        {\n            let o = j+d;\n            if (o >= progress.userCount)\n            {\n                o -= progress.userCount;\n            }\n            outterRepulsion = !rij(o,i)&&!rij(j,o);\n        }\n        repulsion = innerRepulsion && outterRepulsion;\n    }\n    return repulsion;\n}\n\nexport function createUser(type:number)\n{\n    const id = progress.userCount;\n    progress.userCount += 1;\n    progress.userType.push(type);\n    emit(\"createdUser\",id);\n}\n\nexport function removeUser()\n{\n  progress.userCount -= 1;\n  progress.userType.pop();\n  emit(\"removedUser\");\n}\n\nexport default {}","import OpenAI from \"openai\"\n\nconst client = new OpenAI({\n    apiKey: \"sk-uFDUPAriuBg6l84rhrFxcRect2V0gpH59KVXj8dxG6wblr5p\",\n    baseURL: \"http://localhost:8080/llmapi\",\n    dangerouslyAllowBrowser: true\n})\n\nfunction delay(ms:number) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport async function chat(msg:string)\n{\n    await delay(100);\n    return msg;\n    for (let attempt = 1; attempt <= 2; attempt++) {\n        try {\n            const completion = await client.chat.completions.create({\n                model: \"kimi-k2-turbo-preview\",\n                messages: [\n                    {\"role\": \"system\", \"content\": msg},\n                ],\n                temperature: 0.6,\n            })\n            return completion.choices[0].message.content??\"\";\n        }\n        catch (e)\n        {\n            await delay(5000);\n            console.error(e);\n        }\n    }\n    return \"\";\n}","import { emit } from \"./event\"\nimport { Message, progress } from \"./game\"\nimport { chat } from \"./llm\"\n\nexport interface UserText {\n    name:string,\n    prompt:string\n}\nexport interface MessageText {\n    title: string,\n    content: string,\n    minimumVersion: string\n}\n\nexport const text:{\n    userTexts:Array<UserText>,\n    messageTexts:Array<MessageText>,\n    generateQueue:Array<number>,\n    flowLabel:Array<string>\n}={\n    userTexts: [],\n    messageTexts: [],\n    generateQueue: [],\n    flowLabel: ['主推送流']\n}\n\nconst textSource = localStorage.getItem('text');\nif (textSource != null)\n{\n    // text = JSON.parse(textSource);\n}\n\nfunction getUserText(id:number):UserText\n{\n    if (id >= 0 && id < text.userTexts.length) return text.userTexts[id];\n    return {\n        name: '',\n        prompt: ''\n    }\n}\n\nexport function getUserName(id:number):string\n{\n    if (id<0 || id>=text.userTexts.length) return id.toString();\n    return text.userTexts[id].name\n}\n\nfunction getFullUserPrompt(id:number)\n{\n    // const basicPrompt = getUserText(id).prompt;\n    let historyContainer = \"\";\n    if (id in progress.userMemory && progress.userMemory[id].length>0)\n    {\n        historyContainer = `你需要参考的信息：[${progress.userMemory[id].filter(m=>m<text.messageTexts.length).map(m=>text.messageTexts[m].minimumVersion).join()}]。`;\n    }\n    return `${historyContainer}`;\n}\n\nconst traits:Array<string> = [\"神经质\",\"幽默\",\"严肃\"];\n\nfunction randomPick(arr:Array<string>):string\n{\n    return arr[Math.floor(Math.random()*traits.length)];\n}\n\nfunction getRelationshipDiffDescribe(relationship:number,other:string):string\n{\n    if (relationship > 0.5) return `对${other}的认同`;\n    if (relationship < 0.5) return `反对${other}`;\n    return `对社交媒体平台推送机制的反感`;\n}\nfunction getRelationshipDescribe(relationship:number):string\n{\n    if (relationship > 0.5) return \"认同\";\n    if (relationship < 0.5) return \"排斥\";\n    return \"不感兴趣\";\n}\n\nfunction getMessageContentPrompt(msg:Message):string\n{\n    return `扮演一名社交媒体用户虚构贴文。你的个性：${randomPick(traits)}。${getFullUserPrompt(msg.i)}要求1：长度1句话。要求2：站在${getUserText(msg.i).prompt}的视角表达你${getRelationshipDiffDescribe(msg.v,getUserText(msg.j).prompt)}。`;\n}\n\nfunction getMessageTitlePrompt(content:string):string\n{\n    return `[${content}]扮演作者，选择1个短语作为标题，不要出现任何标点符号。`;\n}\nfunction getMessageMinimumVersionPrompt(content:string):string\n{\n    return `[${content}]一句话总结这篇社媒博文。`;\n}\n\nlet generating = false;\n\nexport async function processGenerateQueue()\n{\n    if (generating || text.generateQueue == undefined || text.generateQueue.length==0) return;\n    const msg = text.generateQueue[0];\n    if (msg==undefined) return;\n    console.log(\"生成新消息\");\n    generating = true;\n    if (text.messageTexts.length - 1 < msg)\n    {\n        text.messageTexts.push({\n            title: \"\",\n            content: \"\",\n            minimumVersion: \"\"\n        });\n    }\n    const content = await chat(getMessageContentPrompt(progress.messages[msg]));\n    const title = await chat(getMessageTitlePrompt(content));\n    const minimumVersion = await chat(getMessageMinimumVersionPrompt(content));\n    text.messageTexts[msg] = {title, content, minimumVersion}\n    localStorage.setItem('text', JSON.stringify(text));\n    emit(\"generatedMessage\", msg, title, content);\n    text.generateQueue.shift();\n    generating = false;\n    console.log(\"消息生成完毕\");\n}\n\nexport async function startGenerateMessage(msg:Message)\n{\n    if (text.generateQueue != undefined && (msg.id>=text.messageTexts.length || text.messageTexts[msg.id].title == ''))\n    {\n        text.generateQueue.push(msg.id);\n    }\n}\n\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"username\" }\n\nimport { emit } from '@/event';\n\nimport { NBadge } from 'naive-ui';\nimport { getUserName } from '@/text';\nimport { progress } from '@/game';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CanvasUser',\n  props: {\n    id: {},\n    x: {},\n    y: {},\n    selected: { type: Boolean },\n    focused: { type: Boolean },\n    px: {},\n    py: {},\n    ps: {},\n    badgeDefault: {},\n    badgeInfo: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\nfunction onClick()\n{\n  emit('userPressed', props.id);\n}\nconst type=progress.userType[props.id];\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"canvas-user\",\n    style: _normalizeStyle({left: (__props.px + __props.x) * __props.ps - 20 + 'px', top: (__props.py + __props.y) * __props.ps - 20 + 'px', outline: (__props.selected?'2px':'1px') + ' solid '+ (__props.focused?'#ff0':'#000'), 'border-radius': ((_unref(type)==0)?50:0)+'%'}),\n    onClick: onClick\n  }, [\n    _createVNode(_unref(NBadge), {\n      value: __props.badgeDefault,\n      offset: [10,-5]\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NBadge), {\n          value: __props.badgeInfo,\n          type: 'info',\n          offset: [10,30]\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_1, _toDisplayString(_unref(getUserName)(__props.id)), 1)\n          ]),\n          _: 1\n        }, 8, [\"value\"])\n      ]),\n      _: 1\n    }, 8, [\"value\"])\n  ], 4))\n}\n}\n\n})","<template>\n  <div class=\"canvas-user\" :style=\"{left: (px + x) * ps - 20 + 'px', top: (py + y) * ps - 20 + 'px', outline: (selected?'2px':'1px') + ' solid '+ (focused?'#ff0':'#000'), 'border-radius': ((type==0)?50:0)+'%'}\"\n  @click=\"onClick\"\n  >\n    <n-badge :value=\"badgeDefault\" :offset=\"[10,-5]\">\n    <n-badge :value=\"badgeInfo\" :type=\"'info'\" :offset=\"[10,30]\">\n    <div class=\"username\">{{ getUserName(id) }}</div>\n    </n-badge>\n    </n-badge>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { emit } from '@/event';\nimport { defineProps } from 'vue'\nimport { NBadge } from 'naive-ui';\nimport { getUserName } from '@/text';\nimport { progress } from '@/game';\nconst props = defineProps<{\n  id: number,\n  x: number,\n  y: number,\n  selected: boolean,\n  focused: boolean,\n  px: number,\n  py: number,\n  ps: number,\n  badgeDefault: number,\n  badgeInfo: number\n}>();\nfunction onClick()\n{\n  emit('userPressed', props.id);\n}\nconst type=progress.userType[props.id];\n</script>\n\n<style scoped>\n.canvas-user\n{\n  position: absolute;\n  outline: 1px solid #000;\n  background: #fff;\n  color: #000;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  -webkit-user-drag: none;\n  cursor: pointer;\n}\n.username\n{\n  margin: auto;\n  font-weight: bold;\n  text-wrap-mode: nowrap;\n}\n</style>","import script from \"./CanvasUser.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CanvasUser.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CanvasUser.vue?vue&type=style&index=0&id=3ecaf952&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3ecaf952\"]])\n\nexport default __exports__","<template>\n<div class=\"canvas\"\n:style=\"{'background-size': 20*s+'px '+20*s+'px', 'background-position': x*s+'px '+y*s+'px'}\">\n    <div class=\"mouse-input-handler\" @mousedown=\"onMousedown\" @mouseup=\"onMouseup\" @mousemove=\"onMousemove\" @touchstart=\"onTouchStart\" @touchend=\"onTouchEnd\" @touchmove=\"onTouchMove\" @wheel=\"onWheel\"></div>\n    <CanvasUser v-for=\"user in state.users\" :key=\"user.id\"\n    :id=\"user.id\" :x=\"user.x\" :y=\"user.y\" :px=\"x\" :py=\"y\" :ps=\"s\" :selected=\"state.selectedUsers.includes(user.id)\" :focused=\"state.focusedUser==user.id\"\n    :badge-default=\"(user.id in appState.uncollectedMessages)?appState.uncollectedMessages[user.id].length:0\"\n    :badge-info=\"0\"\n    />\n    <canvas id=\"lines\"/>\n</div>\n</template>\n\n<script setup lang=\"ts\">\nimport { getRepulsion, getSubjectUserGraph, progress, rGetIn } from '../game'\nimport { defineProps, onMounted, Ref, ref } from 'vue'\nimport CanvasUser from './CanvasUser.vue'\nimport { subscribe } from '../event'\nimport { AppState } from '@/App.vue';\ntype User = {\n    id: number;\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n};\nconst state:Ref<{\n    users: Array<User>,\n    selectedUsers: Array<number>\n    focusedUser: number\n}> = ref({\n  users: [],\n  selectedUsers: [],\n  focusedUser: -1\n})\n\nconst props = defineProps<{appState:AppState}>();\n\nconst x = ref(0);\nconst y = ref(0);\nconst s = ref(1);\nsubscribe('userPressed', (id)=>\n{\n    if (props.appState.mode == 'user-edit') return;\n    let selectedUsers = state.value.selectedUsers;\n    if (selectedUsers.includes(id))\n    {\n        if (state.value.focusedUser != id)\n        {\n            state.value.focusedUser = id;\n        }\n        else\n        {\n            state.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n            state.value.focusedUser = -1;\n        }\n    }\n    else{\n        state.value.focusedUser = id;\n        selectedUsers.push(id);\n    }\n})\n\nlet multiSelecting = false;\nlet multiSelectStartX = 0;\nlet multiSelectStartY = 0;\nlet mouseX = 0;\nlet mouseY = 0;\nlet touchStartX = 0;\nlet touchStartY = 0;\nlet touchStartCanvasX = 0;\nlet touchStartCanvasY = 0;\nlet touchesDistance = -1;\n\nfunction onTouchStart(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1)\n    {\n        const touch = e.touches[0];\n        touchStartX = touch.clientX;\n        touchStartY = touch.clientY;\n        touchStartCanvasX = x.value;\n        touchStartCanvasY = y.value;\n    }\n}\n\nfunction onTouchEnd(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 0)\n    {\n        touchesDistance = -1;\n    }\n}\n\nfunction onTouchMove(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1 && touchesDistance == -1)\n    {\n        const touch = e.touches[0];\n        mouseX = touch.clientX;\n        mouseY = touch.clientY;\n        x.value = mouseX - touchStartX + touchStartCanvasX;\n        y.value = mouseY - touchStartY + touchStartCanvasY;\n    }\n    else if (e.touches.length == 2)\n    {\n        const x1 = e.touches[0].clientX;\n        const y1 = e.touches[0].clientY;\n        const x2 = e.touches[1].clientX;\n        const y2 = e.touches[1].clientY;\n        const d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        if (touchesDistance>0)\n        {\n            let delta = (d - touchesDistance) * 0.01;\n            if (delta < -1)\n            {\n                delta = -1;\n            }\n            if (delta > 1)\n            {\n                delta = 1;\n            }\n            delta += 1;\n            // if (delta < 0)\n            // {\n            //     delta += 1;\n            // }\n            changeScale((x1+x2)/2, (y1+y2)/2, delta);\n        }\n        touchesDistance = d;\n    }\n}\n\nfunction onMousemove(e:any)\n{\n    if (e.buttons==4) {\n        x.value += e.movementX / s.value;\n        y.value += e.movementY / s.value;\n    }\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n    multiSelecting = e.buttons==1;\n}\n\nfunction onMousedown(e:any)\n{\n    if (e.buttons==1)\n    {\n        multiSelecting = true;\n        multiSelectStartX=e.clientX;\n        multiSelectStartY=e.clientY;\n    }\n    bgDownButtons = e.buttons;\n}\n\nlet bgDownButtons = 0;\n\n\nfunction onMouseup(e:any)\n{\n    if (bgDownButtons == 1)\n    {\n        state.value.selectedUsers = [];\n        state.value.focusedUser = -1;\n    }\n    if (multiSelecting && Math.abs(mouseX - multiSelectStartX) > 10 && Math.abs(mouseY - multiSelectStartY) > 10)\n    {\n        state.value.selectedUsers = state.value.users.filter(user=>\n        {\n            const ux = (user.x + x.value) * s.value;\n            const uy = (user.y + y.value) * s.value;\n            let newSelecteState = e.shiftKey?state.value.selectedUsers.includes(user.id):false;\n            if (((ux > multiSelectStartX && ux < mouseX) || (ux > mouseX && ux < multiSelectStartX))\n            && ((uy > multiSelectStartY && uy < mouseY) || (uy > mouseY && uy < multiSelectStartY)))\n            {\n                newSelecteState = true;\n            }\n            return newSelecteState;\n        }).map(user=>user.id);\n    }\n    multiSelecting = false;\n}\n\nfunction changeScale(mx:number, my:number, delta:number)\n{\n\n    let s1 = s.value;\n    let mx1 = mx / s1 - x.value;\n    let my1 = my / s1 - y.value;\n    s.value *= delta;\n    let s2 = s.value;\n    let mx2 = mx / s2 - x.value;\n    let my2 = my / s2 - y.value;\n    x.value += mx2 - mx1;\n    y.value += my2 - my1;\n}\n\nfunction onWheel(e:any)\n{\n    let delta = e.wheelDelta * 0.01;\n    if (delta < 0)\n    {\n        delta += 2.0;\n    }\n    if (delta < 0 || delta > 2.0) return;\n    changeScale(e.clientX, e.clientY, delta);\n}\n\nlet linesCanvas:any;\nlet linesCtx:any;\n\nconst idealDist = 150;\nconst delta = 1/60;\nconst stepLength = 100;\nconst d = delta * stepLength;\n\nfunction getForce(ax:number, ay:number, bx:number, by:number, repulsion:boolean, idealDistScale:number, strengthScale:number) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ls = dx * dx + dy * dy;\n    const l = Math.sqrt(ls);\n    const tl = idealDist * idealDistScale;\n    const s = 15 * strengthScale;\n    let f = s * (l - tl) / ls * d;\n    if (repulsion && l >= tl)\n    {\n        f = 0;\n    }\n    return {\n        x: dx * f,\n        y: dy * f\n    }\n}\n\nonMounted(()=>{\n    linesCanvas = document.getElementById('lines');\n    linesCtx = linesCanvas.getContext(\"2d\");\n    setInterval(physicsProcess,delta*1000);\n    subscribe(\"createdUser\", (id:number)=>{\n        state.value.users.push({\n            id: id,\n            x: (id % 2) * 100,\n            y: Math.floor(id / 2) * 100,\n            vx: 0,\n            vy: 0\n        });\n    });\n    subscribe(\"removedUser\", ()=>{\n        state.value.users.pop();\n    });\n});\n\nfunction physicsProcess()\n{\n    const users = state.value.users;\n    for (let i = 0; i < progress.userCount-1; i++) {\n        const a = users[i];\n        for (let j = i + 1; j < progress.userCount; j++) {\n            const b = users[j];\n            const repulsion = getRepulsion(i,j);\n            let f = getForce(a.x, a.y, b.x, b.y, repulsion, repulsion?1:0.5, repulsion?0.5:0.5);\n            a.vx += f.x;\n            a.vy += f.y;\n            b.vx -= f.x;\n            b.vy -= f.y;\n        }\n    }\n    Object.values(state.value.users).forEach(user=>\n        {\n            user.vx *= 1 - (0.2 * d);\n            user.vy *= 1 - (0.2 * d);\n            user.vx -= user.x * 0.01 * d;\n            user.vy -= user.y * 0.01 * d;\n            user.x += user.vx * d;\n            user.y += user.vy * d;\n        }\n    )\n    redraw();\n}\n\nfunction redraw()\n{\n    linesCanvas.width = window.innerWidth;\n    linesCanvas.height = window.innerHeight;\n    if (props.appState.editingUser >= 0)\n    {\n        const graph = getSubjectUserGraph(props.appState.editingUser);\n        Object.entries(graph).forEach(([k,r])=>{\n            const splited = k.split('_');\n            const fromId = parseInt(splited[0],32);\n            const toId = parseInt(splited[1],32);\n            const from = state.value.users[fromId];\n            const to = state.value.users[toId];\n            let a = Math.abs(r);\n            if (a > 1) a = 1;\n            if (a < 0) return;\n            const x1 = (from.x+x.value)*s.value;\n            const y1 = (from.y+y.value)*s.value;\n            const x2 = (to.x+x.value)*s.value;\n            const y2 = (to.y+y.value)*s.value;\n            linesCtx.strokeStyle = '#000';\n            linesCtx.font = \"16px Arial\";\n            linesCtx.fillText(r.toFixed(2).toString(), (x1+x2)*0.5, (y1+y2)*0.5);\n            const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n            // const style = `#000`;\n            linesCtx.strokeStyle = style;\n            linesCtx.beginPath();\n            linesCtx.moveTo(x1, y1);\n            linesCtx.lineTo(x2, y2);\n            linesCtx.stroke();\n        });\n    }\n    else\n    {\n        for (const fromId in progress.subjectiveUserGraph)\n        {\n            const from = state.value.users[fromId];\n            Object.entries(progress.subjectiveUserGraph[fromId]).forEach(([k,r])=>{\n                const splited = k.split('_');\n                const keyFrom = splited[0];\n                if (keyFrom != (fromId.toString())) return;\n                const toId = parseInt(splited[1],32);\n                const to = state.value.users[toId];\n                let a = Math.abs(r);\n                if (a > 1) a = 1;\n                if (a < 0) return;\n                const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n                // const style = `#000`;\n                linesCtx.strokeStyle = style;\n                linesCtx.beginPath();\n                linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n                linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n                linesCtx.stroke();\n            })\n        }\n    }\n    // for(let i=0;i<progress.userCount;i++)\n    // {\n    //     for(let j=i+1;j<progress.userCount;j++)\n    //     {\n    //         const from = state.value.users[i];\n    //         const to = state.value.users[j];\n    //         const repulsion = getRepulsion(i,j);\n    //         const style = `#00ff00${(!repulsion)?'ff':'00'}`;\n    //         linesCtx.strokeStyle = style;\n    //         linesCtx.beginPath();\n    //         linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n    //         linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n    //         linesCtx.stroke();\n    //     }\n    // }\n    const w = mouseX-multiSelectStartX;\n    const h = mouseY-multiSelectStartY;\n    if (multiSelecting && Math.abs(w) > 10 && Math.abs(h) > 10)\n    {\n        linesCtx.rect(multiSelectStartX, multiSelectStartY, w, h);\n        linesCtx.fillStyle = '#00000033';\n        linesCtx.fill();\n    }\n}\n\n</script>\n\n<style scoped>\n.canvas\n{\n    position: absolute;\n    width: 100vw;\n    height: 100vh;\n    scroll-behavior:unset;\n    background-image:\n    linear-gradient(to right, gainsboro 1px, transparent 1px),\n    linear-gradient(to bottom, gainsboro 1px, transparent 1px);\n}\n.bg\n{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n}\n.mouse-input-handler\n{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n</style>","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, normalizeStyle as _normalizeStyle } from \"vue\"\n\nimport { getRepulsion, getSubjectUserGraph, progress, rGetIn } from '../game'\nimport { onMounted, Ref, ref } from 'vue'\nimport CanvasUser from './CanvasUser.vue'\nimport { subscribe } from '../event'\nimport { AppState } from '@/App.vue';\ntype User = {\n    id: number;\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n};\nconst idealDist = 150;\nconst delta = 1/60;\nconst stepLength = 100;\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'GameCanvas',\n  props: {\n    appState: {}\n  },\n  setup(__props: any) {\n\nconst state:Ref<{\n    users: Array<User>,\n    selectedUsers: Array<number>\n    focusedUser: number\n}> = ref({\n  users: [],\n  selectedUsers: [],\n  focusedUser: -1\n})\n\nconst props = __props;\n\nconst x = ref(0);\nconst y = ref(0);\nconst s = ref(1);\nsubscribe('userPressed', (id)=>\n{\n    if (props.appState.mode == 'user-edit') return;\n    let selectedUsers = state.value.selectedUsers;\n    if (selectedUsers.includes(id))\n    {\n        if (state.value.focusedUser != id)\n        {\n            state.value.focusedUser = id;\n        }\n        else\n        {\n            state.value.selectedUsers = selectedUsers.filter(i=>i!=id);\n            state.value.focusedUser = -1;\n        }\n    }\n    else{\n        state.value.focusedUser = id;\n        selectedUsers.push(id);\n    }\n})\n\nlet multiSelecting = false;\nlet multiSelectStartX = 0;\nlet multiSelectStartY = 0;\nlet mouseX = 0;\nlet mouseY = 0;\nlet touchStartX = 0;\nlet touchStartY = 0;\nlet touchStartCanvasX = 0;\nlet touchStartCanvasY = 0;\nlet touchesDistance = -1;\n\nfunction onTouchStart(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1)\n    {\n        const touch = e.touches[0];\n        touchStartX = touch.clientX;\n        touchStartY = touch.clientY;\n        touchStartCanvasX = x.value;\n        touchStartCanvasY = y.value;\n    }\n}\n\nfunction onTouchEnd(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 0)\n    {\n        touchesDistance = -1;\n    }\n}\n\nfunction onTouchMove(e: TouchEvent)\n{\n    e.preventDefault();\n    if (e.touches.length == 1 && touchesDistance == -1)\n    {\n        const touch = e.touches[0];\n        mouseX = touch.clientX;\n        mouseY = touch.clientY;\n        x.value = mouseX - touchStartX + touchStartCanvasX;\n        y.value = mouseY - touchStartY + touchStartCanvasY;\n    }\n    else if (e.touches.length == 2)\n    {\n        const x1 = e.touches[0].clientX;\n        const y1 = e.touches[0].clientY;\n        const x2 = e.touches[1].clientX;\n        const y2 = e.touches[1].clientY;\n        const d = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        if (touchesDistance>0)\n        {\n            let delta = (d - touchesDistance) * 0.01;\n            if (delta < -1)\n            {\n                delta = -1;\n            }\n            if (delta > 1)\n            {\n                delta = 1;\n            }\n            delta += 1;\n            // if (delta < 0)\n            // {\n            //     delta += 1;\n            // }\n            changeScale((x1+x2)/2, (y1+y2)/2, delta);\n        }\n        touchesDistance = d;\n    }\n}\n\nfunction onMousemove(e:any)\n{\n    if (e.buttons==4) {\n        x.value += e.movementX / s.value;\n        y.value += e.movementY / s.value;\n    }\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n    multiSelecting = e.buttons==1;\n}\n\nfunction onMousedown(e:any)\n{\n    if (e.buttons==1)\n    {\n        multiSelecting = true;\n        multiSelectStartX=e.clientX;\n        multiSelectStartY=e.clientY;\n    }\n    bgDownButtons = e.buttons;\n}\n\nlet bgDownButtons = 0;\n\n\nfunction onMouseup(e:any)\n{\n    if (bgDownButtons == 1)\n    {\n        state.value.selectedUsers = [];\n        state.value.focusedUser = -1;\n    }\n    if (multiSelecting && Math.abs(mouseX - multiSelectStartX) > 10 && Math.abs(mouseY - multiSelectStartY) > 10)\n    {\n        state.value.selectedUsers = state.value.users.filter(user=>\n        {\n            const ux = (user.x + x.value) * s.value;\n            const uy = (user.y + y.value) * s.value;\n            let newSelecteState = e.shiftKey?state.value.selectedUsers.includes(user.id):false;\n            if (((ux > multiSelectStartX && ux < mouseX) || (ux > mouseX && ux < multiSelectStartX))\n            && ((uy > multiSelectStartY && uy < mouseY) || (uy > mouseY && uy < multiSelectStartY)))\n            {\n                newSelecteState = true;\n            }\n            return newSelecteState;\n        }).map(user=>user.id);\n    }\n    multiSelecting = false;\n}\n\nfunction changeScale(mx:number, my:number, delta:number)\n{\n\n    let s1 = s.value;\n    let mx1 = mx / s1 - x.value;\n    let my1 = my / s1 - y.value;\n    s.value *= delta;\n    let s2 = s.value;\n    let mx2 = mx / s2 - x.value;\n    let my2 = my / s2 - y.value;\n    x.value += mx2 - mx1;\n    y.value += my2 - my1;\n}\n\nfunction onWheel(e:any)\n{\n    let delta = e.wheelDelta * 0.01;\n    if (delta < 0)\n    {\n        delta += 2.0;\n    }\n    if (delta < 0 || delta > 2.0) return;\n    changeScale(e.clientX, e.clientY, delta);\n}\n\nlet linesCanvas:any;\nlet linesCtx:any;\n\nconst d = delta * stepLength;\n\nfunction getForce(ax:number, ay:number, bx:number, by:number, repulsion:boolean, idealDistScale:number, strengthScale:number) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ls = dx * dx + dy * dy;\n    const l = Math.sqrt(ls);\n    const tl = idealDist * idealDistScale;\n    const s = 15 * strengthScale;\n    let f = s * (l - tl) / ls * d;\n    if (repulsion && l >= tl)\n    {\n        f = 0;\n    }\n    return {\n        x: dx * f,\n        y: dy * f\n    }\n}\n\nonMounted(()=>{\n    linesCanvas = document.getElementById('lines');\n    linesCtx = linesCanvas.getContext(\"2d\");\n    setInterval(physicsProcess,delta*1000);\n    subscribe(\"createdUser\", (id:number)=>{\n        state.value.users.push({\n            id: id,\n            x: (id % 2) * 100,\n            y: Math.floor(id / 2) * 100,\n            vx: 0,\n            vy: 0\n        });\n    });\n    subscribe(\"removedUser\", ()=>{\n        state.value.users.pop();\n    });\n});\n\nfunction physicsProcess()\n{\n    const users = state.value.users;\n    for (let i = 0; i < progress.userCount-1; i++) {\n        const a = users[i];\n        for (let j = i + 1; j < progress.userCount; j++) {\n            const b = users[j];\n            const repulsion = getRepulsion(i,j);\n            let f = getForce(a.x, a.y, b.x, b.y, repulsion, repulsion?1:0.5, repulsion?0.5:0.5);\n            a.vx += f.x;\n            a.vy += f.y;\n            b.vx -= f.x;\n            b.vy -= f.y;\n        }\n    }\n    Object.values(state.value.users).forEach(user=>\n        {\n            user.vx *= 1 - (0.2 * d);\n            user.vy *= 1 - (0.2 * d);\n            user.vx -= user.x * 0.01 * d;\n            user.vy -= user.y * 0.01 * d;\n            user.x += user.vx * d;\n            user.y += user.vy * d;\n        }\n    )\n    redraw();\n}\n\nfunction redraw()\n{\n    linesCanvas.width = window.innerWidth;\n    linesCanvas.height = window.innerHeight;\n    if (props.appState.editingUser >= 0)\n    {\n        const graph = getSubjectUserGraph(props.appState.editingUser);\n        Object.entries(graph).forEach(([k,r])=>{\n            const splited = k.split('_');\n            const fromId = parseInt(splited[0],32);\n            const toId = parseInt(splited[1],32);\n            const from = state.value.users[fromId];\n            const to = state.value.users[toId];\n            let a = Math.abs(r);\n            if (a > 1) a = 1;\n            if (a < 0) return;\n            const x1 = (from.x+x.value)*s.value;\n            const y1 = (from.y+y.value)*s.value;\n            const x2 = (to.x+x.value)*s.value;\n            const y2 = (to.y+y.value)*s.value;\n            linesCtx.strokeStyle = '#000';\n            linesCtx.font = \"16px Arial\";\n            linesCtx.fillText(r.toFixed(2).toString(), (x1+x2)*0.5, (y1+y2)*0.5);\n            const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n            // const style = `#000`;\n            linesCtx.strokeStyle = style;\n            linesCtx.beginPath();\n            linesCtx.moveTo(x1, y1);\n            linesCtx.lineTo(x2, y2);\n            linesCtx.stroke();\n        });\n    }\n    else\n    {\n        for (const fromId in progress.subjectiveUserGraph)\n        {\n            const from = state.value.users[fromId];\n            Object.entries(progress.subjectiveUserGraph[fromId]).forEach(([k,r])=>{\n                const splited = k.split('_');\n                const keyFrom = splited[0];\n                if (keyFrom != (fromId.toString())) return;\n                const toId = parseInt(splited[1],32);\n                const to = state.value.users[toId];\n                let a = Math.abs(r);\n                if (a > 1) a = 1;\n                if (a < 0) return;\n                const style = `#${(r<0)?'ff':'00'}00${(r>=0)?'ff':'00'}${Math.floor(a*255).toString(16).padStart(2,'0')}`;\n                // const style = `#000`;\n                linesCtx.strokeStyle = style;\n                linesCtx.beginPath();\n                linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n                linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n                linesCtx.stroke();\n            })\n        }\n    }\n    // for(let i=0;i<progress.userCount;i++)\n    // {\n    //     for(let j=i+1;j<progress.userCount;j++)\n    //     {\n    //         const from = state.value.users[i];\n    //         const to = state.value.users[j];\n    //         const repulsion = getRepulsion(i,j);\n    //         const style = `#00ff00${(!repulsion)?'ff':'00'}`;\n    //         linesCtx.strokeStyle = style;\n    //         linesCtx.beginPath();\n    //         linesCtx.moveTo((from.x+x.value)*s.value, (from.y+y.value)*s.value);\n    //         linesCtx.lineTo((to.x+x.value)*s.value, (to.y+y.value)*s.value);\n    //         linesCtx.stroke();\n    //     }\n    // }\n    const w = mouseX-multiSelectStartX;\n    const h = mouseY-multiSelectStartY;\n    if (multiSelecting && Math.abs(w) > 10 && Math.abs(h) > 10)\n    {\n        linesCtx.rect(multiSelectStartX, multiSelectStartY, w, h);\n        linesCtx.fillStyle = '#00000033';\n        linesCtx.fill();\n    }\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"canvas\",\n    style: _normalizeStyle({'background-size': 20*s.value+'px '+20*s.value+'px', 'background-position': x.value*s.value+'px '+y.value*s.value+'px'})\n  }, [\n    _createElementVNode(\"div\", {\n      class: \"mouse-input-handler\",\n      onMousedown: onMousedown,\n      onMouseup: onMouseup,\n      onMousemove: onMousemove,\n      onTouchstart: onTouchStart,\n      onTouchend: onTouchEnd,\n      onTouchmove: onTouchMove,\n      onWheel: onWheel\n    }, null, 32),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.value.users, (user) => {\n      return (_openBlock(), _createBlock(CanvasUser, {\n        key: user.id,\n        id: user.id,\n        x: user.x,\n        y: user.y,\n        px: x.value,\n        py: y.value,\n        ps: s.value,\n        selected: state.value.selectedUsers.includes(user.id),\n        focused: state.value.focusedUser==user.id,\n        \"badge-default\": (user.id in __props.appState.uncollectedMessages)?__props.appState.uncollectedMessages[user.id].length:0,\n        \"badge-info\": 0\n      }, null, 8, [\"id\", \"x\", \"y\", \"px\", \"py\", \"ps\", \"selected\", \"focused\", \"badge-default\"]))\n    }), 128)),\n    _cache[0] || (_cache[0] = _createElementVNode(\"canvas\", { id: \"lines\" }, null, -1))\n  ], 4))\n}\n}\n\n})","import script from \"./GameCanvas.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameCanvas.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameCanvas.vue?vue&type=style&index=0&id=7fbe4dfb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7fbe4dfb\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, renderSlot as _renderSlot } from \"vue\"\n\nconst _hoisted_1 = { key: 1 }\nconst _hoisted_2 = { key: 1 }\n\nimport { Message } from '@/game';\nimport { ref } from 'vue';\nimport { NCard, NSkeleton, NEllipsis } from 'naive-ui';\nimport { text } from '@/text';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MessageCard',\n  props: {\n    msg: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\nlet title = ref(\"\");\nlet content = ref(\"\");\nconst intervalId = setInterval(()=>{\n    const messageText = text.messageTexts[props.msg.id];\n    if (typeof(messageText)!=\"undefined\" && messageText.title != '')\n    {\n        title.value = messageText.title;\n        content.value = messageText.content;\n        // clearInterval(intervalId);\n    }\n}, 1);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NCard), {\n    class: \"message-card\",\n    hoverable: \"\"\n  }, {\n    header: _withCtx(() => [\n      (_unref(title)=='')\n        ? (_openBlock(), _createBlock(_unref(NSkeleton), {\n            key: 0,\n            width: 100,\n            round: \"\"\n          }))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n            _createElementVNode(\"h3\", null, [\n              _createVNode(_unref(NEllipsis), { \"line-clamp\": 2 }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_unref(title)), 1)\n                ]),\n                _: 1\n              })\n            ])\n          ]))\n    ]),\n    action: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"action\")\n    ]),\n    default: _withCtx(() => [\n      (_unref(content)=='')\n        ? (_openBlock(), _createBlock(_unref(NSkeleton), {\n            key: 0,\n            text: \"\",\n            repeat: 2\n          }))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n            _createElementVNode(\"p\", null, _toDisplayString(__props.msg.t), 1),\n            _createElementVNode(\"p\", null, [\n              _createVNode(_unref(NEllipsis), { \"line-clamp\": 2 }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_unref(content)), 1)\n                ]),\n                _: 1\n              })\n            ])\n          ])),\n      _renderSlot(_ctx.$slots, \"suffix\")\n    ]),\n    _: 3\n  }))\n}\n}\n\n})","<template>\n<n-card class=\"message-card\" hoverable>\n    <template #header>\n        <n-skeleton v-if=\"title==''\" :width=\"100\" round />\n        <div v-else>\n            <h3><n-ellipsis :line-clamp=\"2\">{{ title }}</n-ellipsis></h3>\n        </div>\n    </template>\n    <n-skeleton v-if=\"content==''\" text :repeat=\"2\"/>\n    <div v-else>\n        <p>{{msg.t}}</p><p><n-ellipsis :line-clamp=\"2\">{{ content }}</n-ellipsis></p>\n    </div>\n    <slot name=\"suffix\"></slot>\n    <template #action>\n        <slot name=\"action\"></slot>\n    </template>\n</n-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { Message } from '@/game';\nimport { defineProps, ref } from 'vue';\nimport { NCard, NSkeleton, NEllipsis } from 'naive-ui';\nimport { text } from '@/text';\n\nconst props = defineProps<{msg:Message}>();\nlet title = ref(\"\");\nlet content = ref(\"\");\nconst intervalId = setInterval(()=>{\n    const messageText = text.messageTexts[props.msg.id];\n    if (typeof(messageText)!=\"undefined\" && messageText.title != '')\n    {\n        title.value = messageText.title;\n        content.value = messageText.content;\n        // clearInterval(intervalId);\n    }\n}, 1);\n</script>\n\n<style scoped>\n.message-card\n{\n    margin-left: auto;\n    margin-right: auto;\n    margin-top: 20px;\n    padding: 10px;\n    box-shadow:0px 0px 3px 0px rgba(0,0,0,0.5);\n}\n</style>","import script from \"./MessageCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageCard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MessageCard.vue?vue&type=style&index=0&id=61735a0a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-61735a0a\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { Message, progress } from '@/game';\nimport { DataTableColumns } from 'naive-ui';\n\nimport { NDataTable } from 'naive-ui';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MessageList',\n  props: /*@__PURE__*/_mergeModels({\n    source: {},\n    filter: { type: Function },\n    select: { type: Boolean }\n  }, {\n    \"modelValue\": {},\n    \"modelModifiers\": {},\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props: any) {\n\nconst props = __props;\n\nconst checkedRowKeys=_useModel<Array<number>>(__props, \"modelValue\");\n\nfunction createColumns(): DataTableColumns<Message> {\n  return [\n    {\n      title: '创作群体',\n      key: 'i'\n    },\n    {\n      title: '时间',\n      key: 't'\n    },\n    {\n      title: '涉及群体',\n      key: 'j'\n    },\n    {\n      title: '态度',\n      key: 'v'\n    }\n  ]\n}\n\nlet columns=createColumns();\n\nif (props.select)\n{\n  columns = [{\n    type: 'selection',\n    multiple: true,\n    disabled: (row)=>!props.filter(progress.messages[row.id])\n  }, ...columns]\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NDataTable), {\n    \"checked-row-keys\": checkedRowKeys.value,\n    \"onUpdate:checkedRowKeys\": _cache[0] || (_cache[0] = ($event: any) => ((checkedRowKeys).value = $event)),\n    columns: _unref(columns),\n    data: __props.source,\n    pagination: false,\n    bordered: false,\n    \"row-key\": (msg)=>msg.id,\n    striped: \"\"\n  }, null, 8, [\"checked-row-keys\", \"columns\", \"data\", \"row-key\"]))\n}\n}\n\n})","<template>\n<n-data-table\n    v-model:checked-row-keys=\"checkedRowKeys\"\n    :columns=\"columns\"\n    :data=\"source\"\n    :pagination=\"false\"\n    :bordered=\"false\"\n    :row-key=\"(msg:Message)=>msg.id\"\nstriped />\n</template>\n\n<script setup lang=\"ts\">\nimport { Message, progress } from '@/game';\nimport { DataTableColumns } from 'naive-ui';\nimport { defineProps, defineModel } from 'vue';\nimport { NDataTable } from 'naive-ui';\nconst props = defineProps<{source:Array<Message>,filter:(msg:Message)=>boolean,select:boolean}>();\n\nconst checkedRowKeys=defineModel<Array<number>>();\n\nfunction createColumns(): DataTableColumns<Message> {\n  return [\n    {\n      title: '创作群体',\n      key: 'i'\n    },\n    {\n      title: '时间',\n      key: 't'\n    },\n    {\n      title: '涉及群体',\n      key: 'j'\n    },\n    {\n      title: '态度',\n      key: 'v'\n    }\n  ]\n}\n\nlet columns=createColumns();\n\nif (props.select)\n{\n  columns = [{\n    type: 'selection',\n    multiple: true,\n    disabled: (row)=>!props.filter(progress.messages[row.id])\n  }, ...columns]\n}\n\n</script>\n\n<style scoped>\n\n</style>","import script from \"./MessageList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageList.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode } from \"vue\"\n\nimport { progress } from '@/game';\nimport MessageCard from './MessageCard.vue';\nimport draggable from 'vuedraggable';\n\nimport { NButton, NInput, NTag, NCard } from 'naive-ui';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MessageFlow',\n  props: /*@__PURE__*/_mergeModels({\n    flow: {}\n  }, {\n    \"source\": {},\n    \"sourceModifiers\": {},\n    \"label\": {},\n    \"labelModifiers\": {},\n  }),\n  emits: [\"update:source\", \"update:label\"],\n  setup(__props: any) {\n\n\nconst source = _useModel<Array<number>>(__props, \"source\");\nconst label = _useModel<string>(__props, \"label\");\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_center = _resolveComponent(\"center\")!\n\n  return (_openBlock(), _createBlock(_unref(NCard), { class: \"flow\" }, {\n    default: _withCtx(() => [\n      _createVNode(_component_center, null, {\n        default: _withCtx(() => [\n          (__props.flow==0)\n            ? (_openBlock(), _createBlock(_unref(NTag), { key: 0 }, {\n                default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n                  _createTextVNode(\"主推送流\", -1)\n                ]))]),\n                _: 1\n              }))\n            : (_openBlock(), _createBlock(_unref(NInput), {\n                key: 1,\n                value: label.value,\n                \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((label).value = $event)),\n                size: \"small\",\n                type: \"text\",\n                placeholder: \"自定义推送流\"\n              }, null, 8, [\"value\"]))\n        ]),\n        _: 1\n      }),\n      _createVNode(_unref(draggable), {\n        modelValue: source.value,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((source).value = $event)),\n        animation: \"200\",\n        \"item-key\": \"element\",\n        group: \"flow\",\n        style: {\"height\":\"100%\"}\n      }, {\n        item: _withCtx((element) => [\n          _createElementVNode(\"div\", null, [\n            _createVNode(MessageCard, {\n              msg: _unref(progress).messages[element.element]\n            }, {\n              action: _withCtx(() => [\n                _createVNode(_unref(NButton), {\n                  onClick: ($event: any) => (source.value=source.value?.filter(m=>m!=element.element))\n                }, {\n                  default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n                    _createTextVNode(\"移除\", -1)\n                  ]))]),\n                  _: 1\n                }, 8, [\"onClick\"])\n              ]),\n              _: 2\n            }, 1032, [\"msg\"])\n          ])\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n    <n-card class=\"flow\">\n        <center>\n            <n-tag v-if=\"flow==0\">主推送流</n-tag>\n            <n-input v-else v-model:value=\"label\" size=\"small\" type=\"text\" placeholder=\"自定义推送流\"/>\n        </center>\n        <draggable\n            v-model=\"source\"\n            animation=\"200\"\n            item-key=\"element\"\n            group=\"flow\"\n            style=\"height: 100%;\"\n        >\n        <template #item=\"element\">\n            <div>\n                <MessageCard :msg=\"progress.messages[element.element]\">\n                    <template #action>\n                        <n-button @click=\"source=source?.filter(m=>m!=element.element)\">移除</n-button>\n                    </template>\n                </MessageCard>\n            </div>\n        </template>\n        <!-- <p>{{ element }}</p> -->\n        </draggable>\n    </n-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { progress } from '@/game';\nimport MessageCard from './MessageCard.vue';\nimport draggable from 'vuedraggable';\nimport { defineProps, defineModel } from 'vue';\nimport { NButton, NInput, NTag, NCard } from 'naive-ui';\n\ndefineProps<{flow:number}>();\nconst source = defineModel<Array<number>>(\"source\");\nconst label = defineModel<string>(\"label\");\n</script>","import script from \"./MessageFlow.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageFlow.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, withCtx as _withCtx, createBlock as _createBlock, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"app\" }\nconst _hoisted_2 = { class: \"flows\" }\nconst _hoisted_3 = { class: \"corner-buttons corner-buttons-rb\" }\nconst _hoisted_4 = { class: \"corner-buttons corner-buttons-lb\" }\n\nimport { computed, nextTick, onMounted, Ref, ref, watch } from 'vue';\nimport GameCanvas from './components/GameCanvas.vue';\nimport MessageCard from './components/MessageCard.vue';\nimport MessageList from './components/MessageList.vue';\nimport { createUser, Message, progress, processPushTask, getSubjectUserGraph, rSetIn, updateUsers } from './game';\nimport { subscribe } from './event';\nimport { NPageHeader, NTabs, NTabPane, NDrawer, NDrawerContent, NButton, NFlex, NDynamicTags, AutoCompleteInst, NAutoComplete, NCard, NModal, NIcon, NRow, NCol, NNumberAnimation } from 'naive-ui';\nimport { getUserName, processGenerateQueue, text } from './text';\nimport { startGenerateMessage } from './text';\nimport MessageFlow from './components/MessageFlow.vue';\nimport { View, ThumbsUp } from '@vicons/carbon'\n\nexport interface AppState {\n    mode: \"user-edit\" | \"connect\" | \"disconnect\";\n    editingUser: number;\n    uncollectedMessages: Record<number,Array<number>>;\n    flows: Array<Array<number>>;\n    messageStatistic: Record<number, {views:number,likes:number}>\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\nonMounted(()=>{\n    // const progressSource = localStorage.getItem('progress');\n    // if (progressSource != null)\n    // {\n    //     setProgress(JSON.parse(progressSource));\n    // }\n    // else\n    // {\n        \n    // }\n    // const appstateSource = localStorage.getItem('appstate');\n    // if (appstateSource != null)\n    // {\n    //     appState.value = JSON.parse(appstateSource);\n    // }\n    // window.addEventListener('beforeunload', ()=>{\n    //     localStorage.setItem('appstate', JSON.stringify(appState.value))\n    //     localStorage.setItem('progress', JSON.stringify(progress));\n    // });\n    createUser(0);\n    createUser(0);\n    createUser(1);\n    createUser(1);\n    for(let p=0;p<progress.userCount;p++)\n    {\n        const G = getSubjectUserGraph(p);\n        for(let x=0;x<progress.userCount;x++)\n        {\n            for(let o=x;o<progress.userCount;o++)\n            {\n                if (x==p)\n                {\n                    rSetIn(x,o,1,G);\n                }\n                else\n                {\n                    rSetIn(x,o,-1,G);\n                }\n            }\n        }\n    }\n    text.userTexts.push(\n        {\n            name: \"学生\",\n            prompt: \"\"\n        },\n        {\n            name: \"丘\",\n            prompt: \"\"\n        },\n        {\n            name: \"人品\",\n            prompt: \"\"\n        },\n        {\n            name: \"数学\",\n            prompt: \"\"\n        }\n    );\n    // const studenGraph = getSubjectUserGraph(0);\n});\n\nconst appState:Ref<AppState> = ref({\n    mode:'user-edit',\n    editingUser:-1,\n    uncollectedMessages:{},\n    collectedMessages:[],\n    flows:[[]],\n    messageStatistic:{}\n});\n\nconst showUserEditor = ref(false);\nconst showFlowsEditor = ref(false);\n\nconst messages = ref(progress.messages);\nfunction getUserMessages(author:number)\n{\n    return messages.value.filter(m=>m.i==author);\n}\n\nconst editingFlowTags:Ref<Array<string>> = ref([]);\nfunction onCreateFlowTag(tag:string):string\n{\n    if (editingFlowTags.value.includes(tag))return \"\";\n    const flow = text.flowLabel.indexOf(tag);\n    if (flow==undefined) return \"\";\n    if (flow<=0) return \"\";\n    return tag;\n}\nconst autoCompleteInstRef = ref<AutoCompleteInst | null>(null)\nwatch(autoCompleteInstRef, (value) => {\n  if (value)\n    nextTick(() => value.focus())\n})\nconst flowTagInputValue = ref('');\nconst flowTagOptions = computed(() => {\n  if (flowTagInputValue.value === null) {\n    return []\n  }\n  return text.flowLabel.filter(label=>!editingFlowTags.value.includes(label)&&label.includes(flowTagInputValue.value)).map((completion) => {\n    return {\n      label: completion,\n      value: completion\n    }\n  })\n})\nsubscribe('userPressed', (id)=>\n{\n    if (progress.userType[id]==0)\n    {\n        if (appState.value.mode==\"user-edit\")\n        {\n            showUserEditor.value = true;\n            appState.value.editingUser = id;\n            while (progress.userFlowTags.length <= id)\n            {\n                progress.userFlowTags.push([]);\n            }\n            editingFlowTags.value = progress.userFlowTags[id].map(flow=>text.flowLabel[flow]);\n        }\n    }\n})\n\nsubscribe('addedMessage', (msg:Message)=>{\n    if (!(msg.i in appState.value.uncollectedMessages))\n    {\n        appState.value.uncollectedMessages[msg.i] = [];\n    }\n    appState.value.uncollectedMessages[msg.i].push(msg.id);\n});\n\nfunction forgetMsg(msg:Message)\n{\n    appState.value.uncollectedMessages[msg.i] = appState.value.uncollectedMessages[msg.i].filter(m=>m!=msg.id);\n}\nfunction collectMsg(msg:Message)\n{\n    forgetMsg(msg);\n    appState.value.flows[0].push(msg.id);\n}\nfunction finishRound()\n{\n    progress.time += 1;\n    appState.value.uncollectedMessages = {};\n    for(let flow=0;flow<appState.value.flows.length;flow++)\n    {\n        processPushTask(appState.value.flows[flow],flow);\n        appState.value.flows[flow] = [];\n    }\n    updateUsers();\n    showStatistic.value = true;\n}\nsubscribe('addedMessage', (msg:Message)=>startGenerateMessage(msg));\nsetInterval(() => {\n    processGenerateQueue();\n}, 1000);\nsetInterval(() => {\n    windowWidth.value = window.innerWidth;\n}, 1);\nconst windowWidth = ref(0);\n// const flowsPage = ref(1);\n// const flowsPageSize = 3;\n// function getFlowPage()\n// {\n//     let arr = [];\n//     for(let i=0;i<(Math.min(flowsPage.value*flowsPageSize,appState.value.flows.length)-1)%(flowsPageSize)+1;i++)\n//     {\n//         arr.push((flowsPage.value-1) * flowsPageSize + i);\n//     }\n//     return arr;\n// }\n// const flowsPageCount = ref(1);\n// watch(appState.value.flows, (newValue)=>{\n//     flowsPageCount.value = Math.ceil(newValue.length/flowsPageSize);\n//     flowsPage.value = flowsPageCount.value;\n// });\nsubscribe('viewedMessage',(msgId,view)=>{\n    if(!(msgId in appState.value.messageStatistic)) appState.value.messageStatistic[msgId] = {views:0,likes:0};\n    appState.value.messageStatistic[msgId].views += view;\n})\nsubscribe('likedMessage',(msgId,like)=>{\n    if(!(msgId in appState.value.messageStatistic)) appState.value.messageStatistic[msgId] = {views:0,likes:0};\n    appState.value.messageStatistic[msgId].likes += like;\n})\nconst showStatistic = ref(false);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(GameCanvas, {\n      \"app-state\": appState.value,\n      ref: \"canvas\"\n    }, null, 8, [\"app-state\"]),\n    _createVNode(_unref(NModal), {\n      show: showStatistic.value,\n      \"onUpdate:show\": _cache[0] || (_cache[0] = ($event: any) => ((showStatistic).value = $event)),\n      preset: \"card\",\n      style: {\"width\":\"600px\"},\n      title: \"统计数据\",\n      size: \"huge\",\n      bordered: false,\n      onUpdateShow: _cache[1] || (_cache[1] = (show)=>{if(!show)appState.value.messageStatistic={}})\n    }, {\n      default: _withCtx(() => [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(appState.value.messageStatistic, (statistic, msg) => {\n          return (_openBlock(), _createBlock(MessageCard, {\n            key: msg,\n            msg: _unref(progress).messages[msg]\n          }, {\n            suffix: _withCtx(() => [\n              _createVNode(_unref(NRow), null, {\n                default: _withCtx(() => [\n                  _createVNode(_unref(NCol), { span: 12 }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(NIcon), null, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(View))\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_unref(NNumberAnimation), {\n                        from: 0,\n                        to: statistic.views\n                      }, null, 8, [\"to\"])\n                    ]),\n                    _: 2\n                  }, 1024),\n                  _createVNode(_unref(NCol), { span: 12 }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(NIcon), null, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(ThumbsUp))\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_unref(NNumberAnimation), {\n                        from: 0,\n                        to: statistic.likes\n                      }, null, 8, [\"to\"])\n                    ]),\n                    _: 2\n                  }, 1024)\n                ]),\n                _: 2\n              }, 1024)\n            ]),\n            _: 2\n          }, 1032, [\"msg\"]))\n        }), 128))\n      ]),\n      _: 1\n    }, 8, [\"show\"]),\n    _createVNode(_unref(NDrawer), {\n      show: showFlowsEditor.value,\n      \"onUpdate:show\": _cache[4] || (_cache[4] = ($event: any) => ((showFlowsEditor).value = $event)),\n      width: windowWidth.value>800?800:windowWidth.value,\n      placement: 'left'\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NDrawerContent), null, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_2, [\n              _createVNode(_unref(NFlex), { style: {\"flex-grow\":\"1\",\"overflow-y\":\"scroll\",\"overflow-x\":\"hidden\"} }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(appState.value.flows.length, (i, flow) => {\n                    return (_openBlock(), _createBlock(MessageFlow, {\n                      key: flow,\n                      label: _unref(text).flowLabel[flow],\n                      \"onUpdate:label\": ($event: any) => ((_unref(text).flowLabel[flow]) = $event),\n                      source: appState.value.flows[flow],\n                      \"onUpdate:source\": ($event: any) => ((appState.value.flows[flow]) = $event),\n                      flow: flow\n                    }, null, 8, [\"label\", \"onUpdate:label\", \"source\", \"onUpdate:source\", \"flow\"]))\n                  }), 128)),\n                  _createVNode(_unref(NCard), { class: \"flowControl\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(NFlex), { vertical: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(NButton), {\n                            onClick: _cache[2] || (_cache[2] = ($event: any) => (appState.value.flows.push([])))\n                          }, {\n                            default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n                              _createTextVNode(\"添加\", -1)\n                            ]))]),\n                            _: 1\n                          }),\n                          _createVNode(_unref(NButton), {\n                            onClick: _cache[3] || (_cache[3] = ($event: any) => (appState.value.flows.pop())),\n                            disabled: appState.value.flows.length<=1\n                          }, {\n                            default: _withCtx(() => [...(_cache[12] || (_cache[12] = [\n                              _createTextVNode(\"移除\", -1)\n                            ]))]),\n                            _: 1\n                          }, 8, [\"disabled\"])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"show\", \"width\"]),\n    _createVNode(_unref(NDrawer), {\n      class: \"user-editor-container\",\n      show: showUserEditor.value,\n      \"onUpdate:show\": _cache[8] || (_cache[8] = ($event: any) => ((showUserEditor).value = $event)),\n      width: windowWidth.value>500?500:windowWidth.value,\n      onUpdateShow: _cache[9] || (_cache[9] = (show)=>{if(!show){\n            _unref(progress).userFlowTags[appState.value.editingUser]=editingFlowTags.value.map(label=>_unref(text).flowLabel.indexOf(label)).filter(flow=>flow>0);\n            console.log(_unref(progress).userFlowTags[appState.value.editingUser]);\n            appState.value.editingUser=-1;\n        }})\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NDrawerContent), { \"native-scrollbar\": false }, {\n          header: _withCtx(() => [\n            _createVNode(_unref(NPageHeader), {\n              subtitle: \"用户分析\",\n              onBack: _cache[5] || (_cache[5] = ($event: any) => (showUserEditor.value=false))\n            }),\n            _createElementVNode(\"h1\", null, \"#\" + _toDisplayString(_unref(getUserName)(appState.value.editingUser)), 1)\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"p\", null, [\n              _createVNode(_unref(NDynamicTags), {\n                value: editingFlowTags.value,\n                \"onUpdate:value\": _cache[7] || (_cache[7] = ($event: any) => ((editingFlowTags).value = $event)),\n                onCreate: onCreateFlowTag\n              }, {\n                input: _withCtx(({ submit, deactivate }) => [\n                  _createVNode(_unref(NAutoComplete), {\n                    ref_key: \"autoCompleteInstRef\",\n                    ref: autoCompleteInstRef,\n                    value: flowTagInputValue.value,\n                    \"onUpdate:value\": _cache[6] || (_cache[6] = ($event: any) => ((flowTagInputValue).value = $event)),\n                    size: \"small\",\n                    options: flowTagOptions.value,\n                    placeholder: \"添加订阅\",\n                    \"clear-after-select\": true,\n                    onSelect: ($event: any) => (submit($event)),\n                    onBlur: deactivate\n                  }, null, 8, [\"value\", \"options\", \"onSelect\", \"onBlur\"])\n                ]),\n                _: 1\n              }, 8, [\"value\"])\n            ]),\n            _createVNode(_unref(NTabs), {\n              class: \"user-editor\",\n              type: \"segment\",\n              animated: \"\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_unref(NTabPane), {\n                  name: \"new\",\n                  tab: \"最新发言\"\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList((appState.value.uncollectedMessages[appState.value.editingUser]), (msgId) => {\n                      return (_openBlock(), _createBlock(MessageCard, {\n                        msg: _unref(progress).messages[msgId],\n                        key: msgId\n                      }, {\n                        action: _withCtx(() => [\n                          _createVNode(_unref(NFlex), { justify: \"space-between\" }, {\n                            default: _withCtx(() => [\n                              _createVNode(_unref(NButton), {\n                                onClick: ($event: any) => (collectMsg(_unref(progress).messages[msgId]))\n                              }, {\n                                default: _withCtx(() => [...(_cache[13] || (_cache[13] = [\n                                  _createTextVNode(\"收集\", -1)\n                                ]))]),\n                                _: 1\n                              }, 8, [\"onClick\"]),\n                              _createVNode(_unref(NButton), {\n                                onClick: ($event: any) => (forgetMsg(_unref(progress).messages[msgId]))\n                              }, {\n                                default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n                                  _createTextVNode(\"忽略\", -1)\n                                ]))]),\n                                _: 1\n                              }, 8, [\"onClick\"])\n                            ]),\n                            _: 2\n                          }, 1024)\n                        ]),\n                        _: 2\n                      }, 1032, [\"msg\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_unref(NTabPane), {\n                  name: \"history\",\n                  tab: \"历史发言\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(MessageList, {\n                      source: getUserMessages(appState.value.editingUser),\n                      filter: (msg)=>true,\n                      select: false\n                    }, null, 8, [\"source\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"show\", \"width\"]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createVNode(_unref(NButton), {\n        round: \"\",\n        type: \"primary\",\n        size: \"large\",\n        onClick: finishRound\n      }, {\n        default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n          _createTextVNode(\"结束回合\", -1)\n        ]))]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createVNode(_unref(NButton), {\n        round: \"\",\n        type: \"primary\",\n        size: \"large\",\n        onClick: _cache[10] || (_cache[10] = ($event: any) => (showFlowsEditor.value=true))\n      }, {\n        default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n          _createTextVNode(\"编辑推送流\", -1)\n        ]))]),\n        _: 1\n      })\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { computed, nextTick, onMounted, Ref, ref, watch } from 'vue';\nimport GameCanvas from './components/GameCanvas.vue';\nimport MessageCard from './components/MessageCard.vue';\nimport MessageList from './components/MessageList.vue';\nimport { createUser, Message, progress, processPushTask, getSubjectUserGraph, rSetIn, updateUsers } from './game';\nimport { subscribe } from './event';\nimport { NPageHeader, NTabs, NTabPane, NDrawer, NDrawerContent, NButton, NFlex, NDynamicTags, AutoCompleteInst, NAutoComplete, NCard, NModal, NIcon, NRow, NCol, NNumberAnimation } from 'naive-ui';\nimport { getUserName, processGenerateQueue, text } from './text';\nimport { startGenerateMessage } from './text';\nimport MessageFlow from './components/MessageFlow.vue';\nimport { View, ThumbsUp } from '@vicons/carbon'\n\nonMounted(()=>{\n    // const progressSource = localStorage.getItem('progress');\n    // if (progressSource != null)\n    // {\n    //     setProgress(JSON.parse(progressSource));\n    // }\n    // else\n    // {\n        \n    // }\n    // const appstateSource = localStorage.getItem('appstate');\n    // if (appstateSource != null)\n    // {\n    //     appState.value = JSON.parse(appstateSource);\n    // }\n    // window.addEventListener('beforeunload', ()=>{\n    //     localStorage.setItem('appstate', JSON.stringify(appState.value))\n    //     localStorage.setItem('progress', JSON.stringify(progress));\n    // });\n    createUser(0);\n    createUser(0);\n    createUser(1);\n    createUser(1);\n    for(let p=0;p<progress.userCount;p++)\n    {\n        const G = getSubjectUserGraph(p);\n        for(let x=0;x<progress.userCount;x++)\n        {\n            for(let o=x;o<progress.userCount;o++)\n            {\n                if (x==p)\n                {\n                    rSetIn(x,o,1,G);\n                }\n                else\n                {\n                    rSetIn(x,o,-1,G);\n                }\n            }\n        }\n    }\n    text.userTexts.push(\n        {\n            name: \"学生\",\n            prompt: \"\"\n        },\n        {\n            name: \"丘\",\n            prompt: \"\"\n        },\n        {\n            name: \"人品\",\n            prompt: \"\"\n        },\n        {\n            name: \"数学\",\n            prompt: \"\"\n        }\n    );\n    // const studenGraph = getSubjectUserGraph(0);\n});\n\nexport interface AppState {\n    mode: \"user-edit\" | \"connect\" | \"disconnect\";\n    editingUser: number;\n    uncollectedMessages: Record<number,Array<number>>;\n    flows: Array<Array<number>>;\n    messageStatistic: Record<number, {views:number,likes:number}>\n}\n\nconst appState:Ref<AppState> = ref({\n    mode:'user-edit',\n    editingUser:-1,\n    uncollectedMessages:{},\n    collectedMessages:[],\n    flows:[[]],\n    messageStatistic:{}\n});\n\nconst showUserEditor = ref(false);\nconst showFlowsEditor = ref(false);\n\nconst messages = ref(progress.messages);\nfunction getUserMessages(author:number)\n{\n    return messages.value.filter(m=>m.i==author);\n}\n\nconst editingFlowTags:Ref<Array<string>> = ref([]);\nfunction onCreateFlowTag(tag:string):string\n{\n    if (editingFlowTags.value.includes(tag))return \"\";\n    const flow = text.flowLabel.indexOf(tag);\n    if (flow==undefined) return \"\";\n    if (flow<=0) return \"\";\n    return tag;\n}\nconst autoCompleteInstRef = ref<AutoCompleteInst | null>(null)\nwatch(autoCompleteInstRef, (value) => {\n  if (value)\n    nextTick(() => value.focus())\n})\nconst flowTagInputValue = ref('');\nconst flowTagOptions = computed(() => {\n  if (flowTagInputValue.value === null) {\n    return []\n  }\n  return text.flowLabel.filter(label=>!editingFlowTags.value.includes(label)&&label.includes(flowTagInputValue.value)).map((completion) => {\n    return {\n      label: completion,\n      value: completion\n    }\n  })\n})\nsubscribe('userPressed', (id)=>\n{\n    if (progress.userType[id]==0)\n    {\n        if (appState.value.mode==\"user-edit\")\n        {\n            showUserEditor.value = true;\n            appState.value.editingUser = id;\n            while (progress.userFlowTags.length <= id)\n            {\n                progress.userFlowTags.push([]);\n            }\n            editingFlowTags.value = progress.userFlowTags[id].map(flow=>text.flowLabel[flow]);\n        }\n    }\n})\n\nsubscribe('addedMessage', (msg:Message)=>{\n    if (!(msg.i in appState.value.uncollectedMessages))\n    {\n        appState.value.uncollectedMessages[msg.i] = [];\n    }\n    appState.value.uncollectedMessages[msg.i].push(msg.id);\n});\n\nfunction forgetMsg(msg:Message)\n{\n    appState.value.uncollectedMessages[msg.i] = appState.value.uncollectedMessages[msg.i].filter(m=>m!=msg.id);\n}\nfunction collectMsg(msg:Message)\n{\n    forgetMsg(msg);\n    appState.value.flows[0].push(msg.id);\n}\nfunction finishRound()\n{\n    progress.time += 1;\n    appState.value.uncollectedMessages = {};\n    for(let flow=0;flow<appState.value.flows.length;flow++)\n    {\n        processPushTask(appState.value.flows[flow],flow);\n        appState.value.flows[flow] = [];\n    }\n    updateUsers();\n    showStatistic.value = true;\n}\nsubscribe('addedMessage', (msg:Message)=>startGenerateMessage(msg));\nsetInterval(() => {\n    processGenerateQueue();\n}, 1000);\nsetInterval(() => {\n    windowWidth.value = window.innerWidth;\n}, 1);\nconst windowWidth = ref(0);\n// const flowsPage = ref(1);\n// const flowsPageSize = 3;\n// function getFlowPage()\n// {\n//     let arr = [];\n//     for(let i=0;i<(Math.min(flowsPage.value*flowsPageSize,appState.value.flows.length)-1)%(flowsPageSize)+1;i++)\n//     {\n//         arr.push((flowsPage.value-1) * flowsPageSize + i);\n//     }\n//     return arr;\n// }\n// const flowsPageCount = ref(1);\n// watch(appState.value.flows, (newValue)=>{\n//     flowsPageCount.value = Math.ceil(newValue.length/flowsPageSize);\n//     flowsPage.value = flowsPageCount.value;\n// });\nsubscribe('viewedMessage',(msgId,view)=>{\n    if(!(msgId in appState.value.messageStatistic)) appState.value.messageStatistic[msgId] = {views:0,likes:0};\n    appState.value.messageStatistic[msgId].views += view;\n})\nsubscribe('likedMessage',(msgId,like)=>{\n    if(!(msgId in appState.value.messageStatistic)) appState.value.messageStatistic[msgId] = {views:0,likes:0};\n    appState.value.messageStatistic[msgId].likes += like;\n})\nconst showStatistic = ref(false);\n</script>\n\n<template>\n<div class=\"app\">\n    <!-- <p v-for=\"flow,flowId in appState.flows\" :key=\"flowId\">{{ flowId }}</p> -->\n    <GameCanvas :app-state=\"appState\" ref=\"canvas\"/>\n    <n-modal v-model:show=\"showStatistic\" preset=\"card\" style=\"width: 600px;\" title=\"统计数据\" size=\"huge\" :bordered=\"false\"\n        @update-show=\"(show)=>{if(!show)appState.messageStatistic={}}\"\n    >\n        <MessageCard v-for=\"(statistic, msg) in appState.messageStatistic\" :key=msg :msg=\"progress.messages[msg]\">\n            <template #suffix>\n                <n-row>\n                    <n-col :span=\"12\">\n                        <n-icon><View/></n-icon>\n                        <n-number-animation :from=\"0\" :to=\"statistic.views\"/>\n                    </n-col>\n                    <n-col :span=\"12\">\n                        <n-icon><ThumbsUp/></n-icon>\n                        <n-number-animation :from=\"0\" :to=\"statistic.likes\"/>\n                    </n-col>\n                </n-row>\n            </template>\n        </MessageCard>\n    </n-modal>\n    <n-drawer v-model:show=\"showFlowsEditor\" :width=\"windowWidth>800?800:windowWidth\" :placement=\"'left'\">\n        <n-drawer-content>\n            <div class=\"flows\">\n                <n-flex style=\"flex-grow: 1;overflow-y: scroll;overflow-x: hidden;\">\n                    <MessageFlow v-for=\"i,flow in appState.flows.length\" :key=\"flow\" v-model:label=\"text.flowLabel[flow]\" v-model:source=\"appState.flows[flow]\" :flow=\"flow\"/>\n                    <NCard class=\"flowControl\">\n                        <n-flex vertical>\n                            <n-button @click=\"appState.flows.push([])\">添加</n-button>\n                            <n-button @click=\"appState.flows.pop()\" :disabled=\"appState.flows.length<=1\">移除</n-button>\n                        </n-flex>\n                    </NCard>\n                </n-flex>\n                <!-- <n-pagination v-model:page=\"flowsPage\" :page-count=\"flowsPageCount\"/> -->\n            </div>\n        </n-drawer-content>\n    </n-drawer>\n        <n-drawer class=\"user-editor-container\" v-model:show=\"showUserEditor\" :width=\"windowWidth>500?500:windowWidth\" @update-show=\"(show)=>{if(!show){\n            progress.userFlowTags[appState.editingUser]=editingFlowTags.map(label=>text.flowLabel.indexOf(label)).filter(flow=>flow>0);\n            console.log(progress.userFlowTags[appState.editingUser]);\n            appState.editingUser=-1;\n        }}\">\n            <n-drawer-content :native-scrollbar=\"false\">\n                <template #header>\n                    <NPageHeader subtitle=\"用户分析\" @back=\"showUserEditor=false\"></NPageHeader>\n                    <h1>#{{ getUserName(appState.editingUser) }}</h1>\n                </template>\n                <p>\n                <n-dynamic-tags v-model:value=\"editingFlowTags\" @create=onCreateFlowTag>\n                    <template #input=\"{ submit, deactivate }\">\n                    <n-auto-complete\n                        ref=\"autoCompleteInstRef\"\n                        v-model:value=\"flowTagInputValue\"\n                        size=\"small\"\n                        :options=\"flowTagOptions\"\n                        placeholder=\"添加订阅\"\n                        :clear-after-select=\"true\"\n                        @select=\"submit($event)\"\n                        @blur=\"deactivate\"\n                    />\n                    </template>\n                </n-dynamic-tags>\n                </p>\n                <n-tabs class=\"user-editor\" type=\"segment\" animated>\n                    <n-tab-pane name=\"new\" tab=\"最新发言\">\n                        <MessageCard :msg=\"progress.messages[msgId]\" v-for=\"msgId in (appState.uncollectedMessages[appState.editingUser])\" :key=\"msgId\">\n                            <template #action>\n                                <n-flex justify=\"space-between\">\n                                    <n-button @click=\"collectMsg(progress.messages[msgId])\">收集</n-button>\n                                    <n-button @click=\"forgetMsg(progress.messages[msgId])\">忽略</n-button>\n                                </n-flex>\n                            </template>\n                        </MessageCard>\n                    </n-tab-pane>\n                    <n-tab-pane name=\"history\" tab=\"历史发言\">\n                        <MessageList :source=\"getUserMessages(appState.editingUser)\" :filter=\"(msg)=>true\" :select=\"false\"/>\n                    </n-tab-pane>\n                </n-tabs>\n            </n-drawer-content>\n        </n-drawer>\n        <div class=\"corner-buttons corner-buttons-rb\">\n            <n-button round type=\"primary\" size=\"large\" @click=\"finishRound\">结束回合</n-button>\n        </div>\n        <div class=\"corner-buttons corner-buttons-lb\">\n            <n-button round type=\"primary\" size=\"large\" @click=\"showFlowsEditor=true\">编辑推送流</n-button>\n        </div>\n</div>\n</template>\n\n<style>\nbody\n{\n    margin: 0;\n    overflow: hidden;\n}\n\n.app\n{\n    display: flex;\n    width: 100vw;\n    height: 100vh;\n}\n.corner-buttons\n{\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n.corner-buttons-lb\n{\n    left: 20px;\n    bottom: 20px;\n}\n.corner-buttons-rb\n{\n    right: 20px;\n    bottom: 20px;\n}\n@media (max-width: 500px) {\n    .user-editor-container {\n        width: 400px;\n    }\n}\n.flows\n{\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n.flow\n{\n    overflow-y: scroll;\n    width: 300px;\n    height: 100%;\n    margin: 8px;\n    box-shadow: 0 0 5px 0px rgba(0,0,0,0.5);\n}\n.flow::-webkit-scrollbar {\n    display: none;\n}\n.flowControl\n{\n    width: 300px;\n    margin: 8px;\n    height: min-content;\n    display: flex;\n    flex-direction: column;\n}\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=8f3a7e14&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_project\"] = self[\"webpackChunkvue_project\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6167); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["events","subscribe","event","action","key","Object","keys","length","emit","args","values","forEach","progress","userMemory","subjectiveUserGraph","messages","userType","userCount","userFlowTags","time","getSubjectUserGraph","user","rGetIn","a","b","graph","k","toString","rSetIn","v","processPushTask","tasks","flow","flowTags","undefined","includes","msgId","pushMsgToUser","createMessage","i","j","msg","id","t","push","changeAttitude","target","d","value","Math","abs","updateUser","console","log","maxIPD","maxIPD_o","o","IPD","instabilityPartialD","instability","p","G","s","x","Gpx","Gpo","Gox","GooSub","oldInstability","newInstability","random","updateUsers","getRepulsion","rij","repulsion","innerRepulsion","outterRepulsion","createUser","type","OpenAI","apiKey","baseURL","dangerouslyAllowBrowser","delay","ms","Promise","resolve","setTimeout","async","chat","text","userTexts","messageTexts","generateQueue","flowLabel","localStorage","getItem","getUserText","name","prompt","getUserName","getFullUserPrompt","historyContainer","filter","m","map","minimumVersion","join","traits","randomPick","arr","floor","getRelationshipDiffDescribe","relationship","other","getMessageContentPrompt","getMessageTitlePrompt","content","getMessageMinimumVersionPrompt","generating","processGenerateQueue","title","setItem","JSON","stringify","shift","startGenerateMessage","_hoisted_1","class","_defineComponent","__name","props","y","selected","Boolean","focused","px","py","ps","badgeDefault","badgeInfo","setup","__props","onClick","_ctx","_cache","_openBlock","_createElementBlock","style","_normalizeStyle","left","top","outline","_unref","_createVNode","NBadge","offset","default","_withCtx","_createElementVNode","_toDisplayString","_","__exports__","idealDist","delta","stepLength","appState","state","ref","users","selectedUsers","focusedUser","mode","multiSelecting","multiSelectStartX","multiSelectStartY","mouseX","mouseY","touchStartX","touchStartY","touchStartCanvasX","touchStartCanvasY","touchesDistance","onTouchStart","e","preventDefault","touches","touch","clientX","clientY","onTouchEnd","onTouchMove","x1","y1","x2","y2","sqrt","changeScale","onMousemove","buttons","movementX","movementY","onMousedown","bgDownButtons","linesCanvas","linesCtx","onMouseup","ux","uy","newSelecteState","shiftKey","mx","my","s1","mx1","my1","s2","mx2","my2","onWheel","wheelDelta","getForce","ax","ay","bx","by","idealDistScale","strengthScale","dx","dy","ls","l","tl","f","physicsProcess","vx","vy","redraw","width","window","innerWidth","height","innerHeight","editingUser","entries","r","splited","split","fromId","parseInt","toId","from","to","strokeStyle","font","fillText","toFixed","padStart","beginPath","moveTo","lineTo","stroke","keyFrom","w","h","rect","fillStyle","fill","onMounted","document","getElementById","getContext","setInterval","pop","onTouchstart","onTouchend","onTouchmove","_Fragment","_renderList","_createBlock","CanvasUser","uncollectedMessages","_hoisted_2","messageText","NCard","hoverable","header","NSkeleton","round","NEllipsis","_createTextVNode","_renderSlot","$slots","repeat","_mergeModels","source","Function","select","emits","checkedRowKeys","_useModel","createColumns","columns","multiple","disabled","row","NDataTable","$event","data","pagination","bordered","striped","label","_component_center","_resolveComponent","NTag","NInput","size","placeholder","draggable","modelValue","animation","group","item","element","MessageCard","NButton","_hoisted_3","_hoisted_4","collectedMessages","flows","messageStatistic","showUserEditor","showFlowsEditor","getUserMessages","author","editingFlowTags","onCreateFlowTag","tag","indexOf","autoCompleteInstRef","watch","nextTick","focus","flowTagInputValue","flowTagOptions","computed","completion","forgetMsg","collectMsg","finishRound","showStatistic","windowWidth","view","views","likes","like","GameCanvas","NModal","show","preset","onUpdateShow","statistic","suffix","NRow","NCol","span","NIcon","View","NNumberAnimation","ThumbsUp","NDrawer","placement","NDrawerContent","NFlex","MessageFlow","vertical","NPageHeader","subtitle","onBack","NDynamicTags","onCreate","input","submit","deactivate","NAutoComplete","ref_key","options","onSelect","onBlur","NTabs","animated","NTabPane","tab","justify","MessageList","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","splice","n","getter","__esModule","definition","defineProperty","enumerable","get","g","globalThis","this","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}